Version 1
SubGoalCombiner SGC_AND
INITSECTION
DB_Dialogs(S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d,GOB_NerdyGoblinSage_6c453a75-1ced-8002-22c3-3e4bb799570f);

DB_ItemOwnerShipTriggers("WLD_Main_A",S_GOB_NerdySage_Ownership_b09d7817-8dda-4d06-99b7-1ae58efffaf8,S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d);

DB_HasItemEvent((ITEM)S_GOB_VoloGoblinsGuide_b98a3bd2-a17d-4e01-a433-1bd339d3f5f6,(FLAG)GOB_HasVoloGoblinManuscript_72110c64-d3f6-be69-7a4d-d2156b986964);
DB_GiveItemToEvent((ITEM)S_GOB_VoloGoblinsGuide_b98a3bd2-a17d-4e01-a433-1bd339d3f5f6,(FLAG)GOB_GiveVoloGoblinManuscript_99d51809-3cda-5457-99ba-2aefd5a6fd9c);

// Book copy for giving it in goblin hunt celebration dialog with caged Volo
DB_HasItemEvent((ITEM)S_GOB_VoloGoblinsGuide_Copy_f1e89064-e9db-47e2-add6-67f8f72e1a74,(FLAG)GOB_HasVoloGoblinManuscriptCopy_c43a7897-cdfa-4d13-9fe5-597d6303e96f);
DB_GiveItemToEvent((ITEM)S_GOB_VoloGoblinsGuide_Copy_f1e89064-e9db-47e2-add6-67f8f72e1a74,(FLAG)GOB_GiveVoloGoblinManuscriptCopy_576981eb-3bca-439b-9876-855a5e5d50dc);

DB_SceneManager(S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d,"GOB_NerdyGoblinSage_Scene");
KBSECTION
IF
FlagSet((FLAG)GOB_VoloBallad_State_OnStage_0bc1d7d7-9129-4c6e-188d-054640cea3b9,_,_)
THEN
SetFlag((FLAG)GOB_VoloBallad_State_NerdySageGotVolosBook_7409f6c0-6fa1-4f84-82e5-2a059e9d5353);
ToInventory((ITEM)S_GOB_VoloGoblinsGuide_b98a3bd2-a17d-4e01-a433-1bd339d3f5f6,S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d);

IF
FlagSet((FLAG)GOB_FestivitiesArea_State_Swept_01863b85-a514-473a-9fa9-2869612480a2,_,_)
THEN
PROC_NotifyWhenReadyToMoveOn(S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d,"GOB_NerdyGoblinSage_Notify");

PROC
PROC_ReadyToMoveOn(S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d,"GOB_NerdyGoblinSage_Notify")
THEN
SetFlag(GOB_NerdyGoblinSage_DropBook_b4b27ad6-3bfb-cd1f-44a2-d07fb7f36378, S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d);

IF
FlagSet(GOB_NerdyGoblinSage_DropBook_b4b27ad6-3bfb-cd1f-44a2-d07fb7f36378, S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d, _) // flagType: Object
AND
GetFlag(GOB_HasVoloGoblinManuscript_72110c64-d3f6-be69-7a4d-d2156b986964,S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d,1)
THEN
Drop(S_GOB_VoloGoblinsGuide_b98a3bd2-a17d-4e01-a433-1bd339d3f5f6);
ClearOwnership(S_GOB_VoloGoblinsGuide_b98a3bd2-a17d-4e01-a433-1bd339d3f5f6);

IF
FlagSet(GOB_NerdyGoblinSage_DropBook_b4b27ad6-3bfb-cd1f-44a2-d07fb7f36378, S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d, _) // flagType: Object
THEN
PROC_DisappearOutOfSight(S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d,"Run",0,"");
PROC_SceneOver("GOB_NerdyGoblinSage_Scene");

IF
AddedTo(S_GOB_VoloGoblinsGuide_b98a3bd2-a17d-4e01-a433-1bd339d3f5f6,S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d, _)
THEN
ClearFlag((FLAG)GOB_NerdyGoblinSage_DropBook_b4b27ad6-3bfb-cd1f-44a2-d07fb7f36378, S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d); // flagType: Object

IF
FlagSet(GOB_HasVoloGoblinManuscript_72110c64-d3f6-be69-7a4d-d2156b986964,(CHARACTER)_Player,_)
AND
DB_Players(_Player)
THEN
QuestUpdate(_Player,"GOB_NerdyGoblinSage_GotBook","HIDDEN_WLD_Boosters");

PROC
PROC_SceneInterrupted(_,_,"GOB_NerdyGoblinSage_Scene","Attacked")
THEN
SetFlag(GOB_NerdyGoblinSage_DropBook_b4b27ad6-3bfb-cd1f-44a2-d07fb7f36378, S_GOB_NerdyGoblinSage_5f5c8416-8118-4619-8fc9-442304ff0a3d);
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "Act1"
