Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
ReposeAdded(_Player,S_UND_StrengthChair_95409119-5348-4b46-af92-627d1ea8ef07)
AND
DB_Players((CHARACTER)_Player)
THEN
DB_UND_StrengthChair(_Player);

IF
ReposeAdded(_Player,S_UND_StrengthChair_95409119-5348-4b46-af92-627d1ea8ef07)
AND
DB_Players((CHARACTER)_Player)
AND
HasActiveStatus(S_UND_StrengthChair_95409119-5348-4b46-af92-627d1ea8ef07,"UND_SUSSURTREEANTIMAGIC",0)
THEN
ApplyStatus(_Player,"UND_STRENGTH_CHAIR",-1.0,1,S_UND_StrengthChair_95409119-5348-4b46-af92-627d1ea8ef07);

IF
ReposeRemoved(_Player,_)
AND
DB_UND_StrengthChair((CHARACTER)_Player)
THEN
RemoveStatus(_Player,"UND_STRENGTH_CHAIR");
NOT DB_UND_StrengthChair(_Player);

IF
StatusApplied(S_UND_StrengthChair_95409119-5348-4b46-af92-627d1ea8ef07,"UND_SUSSURTREEANTIMAGIC",_,_)
AND
DB_UND_StrengthChair((CHARACTER)_Player)
THEN
RemoveStatus(_Player,"UND_STRENGTH_CHAIR");

IF
StatusRemoved(S_UND_StrengthChair_95409119-5348-4b46-af92-627d1ea8ef07,"UND_SUSSURTREEANTIMAGIC",_,_)
AND
DB_UND_StrengthChair((CHARACTER)_Player)
THEN
ApplyStatus(_Player,"UND_STRENGTH_CHAIR",-1.0,1,S_UND_StrengthChair_95409119-5348-4b46-af92-627d1ea8ef07);

IF
StatusApplied(_Player,"UND_STRENGTH_CHAIR",S_UND_StrengthChair_95409119-5348-4b46-af92-627d1ea8ef07,_)
AND
DB_Players((CHARACTER)_Player)
AND
NOT DB_UND_StrengthChairAD(_Player,_)
THEN
PROC_TryStartAD(UND_SussurTower_PAD_StrengthChair_170e9485-b967-d045-b69d-1d6cf1918f55,_Player);
DB_UND_StrengthChairAD(_Player,0);

IF
StatusRemoved(_Player,"UND_STRENGTH_CHAIR",_,_)
AND
DB_Players((CHARACTER)_Player)
AND
NOT DB_UND_StrengthChairAD(_Player,1)
THEN
PROC_TryStartAD(UND_SussurTower_PAD_StrengthChair_Stand_bcddf1c9-7799-c9e7-35a5-c33ebf5bbaac,_Player);
NOT DB_UND_StrengthChairAD(_Player,0);
DB_UND_StrengthChairAD(_Player,1);


IF
RemovedFrom(S_UND_StrengthChair_Leg_46e7d280-a9e2-47bb-88f2-0f9098e15b93,S_UND_StrengthChair_95409119-5348-4b46-af92-627d1ea8ef07)
AND
GetClosestAlivePlayer(S_UND_StrengthChair_Leg_46e7d280-a9e2-47bb-88f2-0f9098e15b93,_Player,_Dist)
AND
_Dist < 15.0
THEN
LookAtEntity(_Player,S_UND_StrengthChair_Leg_46e7d280-a9e2-47bb-88f2-0f9098e15b93);
PROC_TryStartAD(UND_SussurTower_PAD_StrengthChair_Leg_96314698-6183-b803-601c-dbbf61bf9362,_Player);


//REGION Debug
IF
TextEvent("und_chair_reset")
AND
DB_UND_StrengthChairAD(_Player,_Flag)
THEN
NOT DB_UND_StrengthChairAD(_Player,_Flag);

IF
TextEvent("und_chair_leg")
AND
GetHostCharacter(_Player)
THEN
TeleportTo(S_UND_StrengthChair_Leg_46e7d280-a9e2-47bb-88f2-0f9098e15b93,_Player);
LookAtEntity(_Player,S_UND_StrengthChair_Leg_46e7d280-a9e2-47bb-88f2-0f9098e15b93);
PROC_TryStartAD(UND_SussurTower_PAD_StrengthChair_Leg_96314698-6183-b803-601c-dbbf61bf9362,_Player);
//END_REGION Debug
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "Act1"
