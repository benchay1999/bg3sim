Version 1
SubGoalCombiner SGC_AND
INITSECTION
PROC_DefineSingleOriginMoment((DIALOGRESOURCE)WYR_KillDirectorGortash_Ceremony_5149a422-854a-9e05-433a-0520d87eb112, (TAG)DARK_URGE_fe825e69-1569-471f-9b3f-28fd3b929683, (DIALOGRESOURCE)WYR_KillDirectorGortash_Ceremony_5149a422-854a-9e05-433a-0520d87eb112);

DB_DoubleOriginMoment(WYR_KillDirectorGortash_Ceremony_5149a422-854a-9e05-433a-0520d87eb112,(TAG)KARLACH_9aab4bcd-e1f7-4008-8f7b-f1203789ae9b,(TAG)DARK_URGE_fe825e69-1569-471f-9b3f-28fd3b929683, NULL_00000000-0000-0000-0000-000000000000, (DIALOGRESOURCE)WYR_KillDirectorGortash_Ceremony_OM_Karlach_COM_8f41f789-5ab4-8760-4512-0d3ecfb20416, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, (DIALOGRESOURCE)WYR_KillDirectorGortash_Ceremony_OM_Karlach_COM_8f41f789-5ab4-8760-4512-0d3ecfb20416, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, 10);
DB_OriginDialogTrigger((DIALOGRESOURCE)WYR_KillDirectorGortash_Ceremony_OM_Karlach_COM_8f41f789-5ab4-8760-4512-0d3ecfb20416, (TRIGGER)S_WYR_GortashConfrontation_OM_Trigger_1143d4b0-91fb-49f7-a3f4-973fd3ca69c9);
DB_OriginMoment_MaxDistance((DIALOGRESOURCE)WYR_KillDirectorGortash_Ceremony_OM_Karlach_COM_8f41f789-5ab4-8760-4512-0d3ecfb20416, 40.0);

DB_WYR_KillDirectorGortash_OMEndingFlags((FLAG)WYR_KillDirectorGortash_Ceremony_Event_Entered_0b2590e0-3481-3079-c593-48cd64781028);
DB_WYR_KillDirectorGortash_OMEndingFlags((FLAG)WYR_KillDirectorGortash_Ceremony_Event_OMKarlachArrested_1704592a-beb9-73a5-a0b5-2d91306e7d04);
DB_WYR_KillDirectorGortash_OMEndingFlags((FLAG)WYR_KillDirectorGortash_Ceremony_Event_OMKarlachArrested2_4cfb99cb-f43f-cbf9-1a59-cc304b4e44e4);
DB_WYR_KillDirectorGortash_OMEndingFlags((FLAG)WYR_KillDirectorGortash_Ceremony_Event_OMKarlachCalm_f4a2afe6-2373-9cbf-6a53-6acc0f884c7f);
DB_WYR_KillDirectorGortash_OMEndingFlags((FLAG)WYR_KillDirectorGortash_Ceremony_Event_OMKarlachCalm2_9690c961-d829-f303-981b-1583cdd07346);
DB_WYR_KillDirectorGortash_OMEndingFlags((FLAG)WYR_KillDirectorGortash_Ceremony_Event_OMKarlachCalm3_f33c43d1-84e8-0b4f-35fd-31986b5b7073);
DB_WYR_KillDirectorGortash_OMEndingFlags((FLAG)WYR_KillDirectorGortash_Ceremony_Event_OMDarkUrge_75183414-a5ad-ce7f-6af9-a455a56395a9);
DB_WYR_KillDirectorGortash_OMEndingFlags((FLAG)WYR_KillDirectorGortash_Ceremony_State_AfterDUOM_726a5ab0-1a3f-41d9-4de1-f047257c6908);

DB_WYR_KillDirectorGortash_OMs((DIALOGRESOURCE)WYR_KillDirectorGortash_Ceremony_5149a422-854a-9e05-433a-0520d87eb112);
DB_WYR_KillDirectorGortash_OMs((DIALOGRESOURCE)WYR_KillDirectorGortash_Ceremony_OM_Karlach_COM_8f41f789-5ab4-8760-4512-0d3ecfb20416);

DB_WYR_KillDirectorGortash_SteelWatchers((CHARACTER)S_WYR_AudienceHall_SteelWatcher_000_a8544d37-571c-4bcb-8b4c-c499dbe9c421);
DB_WYR_KillDirectorGortash_SteelWatchers((CHARACTER)S_WYR_AudienceHall_SteelWatcher_001_499e5f36-5640-425f-9ff6-13cb646a0bf8);
DB_WYR_KillDirectorGortash_SteelWatchers((CHARACTER)S_WYR_AudienceHall_SteelWatcher_002_6cb28cb2-905a-4a45-8040-c14dba941b26);
DB_WYR_KillDirectorGortash_SteelWatchers((CHARACTER)S_WYR_AudienceHall_SteelWatcher_003_6622cf7f-a119-4c42-9a1e-b7cc4543dd19);
DB_WYR_KillDirectorGortash_SteelWatchers((CHARACTER)S_WYR_AudienceHall_SteelWatcher_005_12f4bdd7-aaf9-49c1-acb2-8c2e6c13c0c6);
DB_WYR_KillDirectorGortash_SteelWatchers((CHARACTER)S_WYR_AudienceHall_SteelWatcher_006_23dfde6d-09f4-4e9b-9ebf-99094f1a269e);
DB_WYR_KillDirectorGortash_SteelWatchers((CHARACTER)S_WYR_AudienceHall_SteelWatcher_007_3184594a-cd9a-4faf-921b-a60ff2c71727);
DB_WYR_KillDirectorGortash_SteelWatchers((CHARACTER)S_WYR_AudienceHall_SteelWatcher_009_12adabf6-7d53-4e9e-a3e9-17637666b14d);

DB_OneShotPartyTrigger(S_ORI_DarkUrge_BloodweddingFallback_4ccb7b0c-2cff-4d3d-b9dc-d3a284583ff3);

DB_ORI_DarkUrge_BloodWeddingLevels("BGO_Main_A");
DB_ORI_DarkUrge_BloodWeddingLevels("CTY_Main_A");

DB_TopicalGreeting(TG_DarkUrge_GortashOM_e7309f8a-f378-4cfb-8d55-4c5798acb443);
DB_TopicalGreetingStartCondition_FlagSet((FLAG)TG_DarkUrge_GortashOM_e7309f8a-f378-4cfb-8d55-4c5798acb443, (FLAG)ORI_DarkUrge_Event_GortashToldChosen_95308bd0-8327-4267-b18d-eb5d9e270059);
DB_TopicalGreetingEndCondition_LeaveTrigger(TG_DarkUrge_GortashOM_e7309f8a-f378-4cfb-8d55-4c5798acb443, S_WYR_Fortress_SUB_94ca5a54-0813-48b4-9f55-4cb039a63c82);
KBSECTION
//REGION Dark Urge - Butler Inclusion

QRY
QRY_Camp_StartSoloDream_CustomDialogStart((DIALOGRESOURCE)CAMP_DarkUrge_Bloodwedding_SD_e0a79044-1745-8d6c-99f2-21a7226e7fa8,(CHARACTER)_DarkUrge)
AND
DB_ORI_DarkUrge((CHARACTER)_DarkUrge)
AND
QRY_StartDialog_Fixed(CAMP_DarkUrge_Bloodwedding_SD_e0a79044-1745-8d6c-99f2-21a7226e7fa8, S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, S_WYR_OrinsImpersonation_OrinDummy_10bcedcb-ea08-4af7-9946-297e4088e662, (CHARACTER)_DarkUrge)
THEN
MakePlayerActive((CHARACTER)_DarkUrge);

QRY
QRY_StartOverrideDialog(CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _DarkUrge, (GUIDSTRING)_Speaker3, (GUIDSTRING)_Speaker4, (GUIDSTRING)_Speaker5, (GUIDSTRING)_Speaker6, _, _)
AND
NOT DB_StartOverrideDialog_Started(1)
AND
QRY_StartDialog_Fixed(CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67, _DarkUrge, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, (GUIDSTRING)_Speaker3, (GUIDSTRING)_Speaker4, (GUIDSTRING)_Speaker5, (GUIDSTRING)_Speaker6)
THEN
DB_QRYRTN_StartDialog_FailReason("CustomOverride");
PROC_DialogOverridden(CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67, _DarkUrge, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, (GUIDSTRING)_Speaker3, (GUIDSTRING)_Speaker4, (GUIDSTRING)_Speaker5, (GUIDSTRING)_Speaker6);

PROC
PROC_CampNight_StartSelected()
AND
DB_Camp_QueuedNight((FLAG)NIGHT_DarkUrge_Bloodwedding_2fc626ed-db4c-4cc6-a742-0a653a2fe51f)
AND
DB_ORI_DarkUrge((CHARACTER)_DarkUrge)
THEN
TeleportTo(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, (CHARACTER)_DarkUrge);
SetVisible(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 0);
SetDetached(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 1);
TeleportTo(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, (CHARACTER)_DarkUrge);
SetVisible(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 0);
SetDetached(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 1);

//END_REGION


//REGION Gortash ceremony OM

IF
DB_WYR_KillDirectorGortash_OMs(_Dialog)
THEN
DB_OriginMoment_MaxDistance(_Dialog, 20.0); 

//Probably needs refining in orangebox
IF
DialogStarted(_Dialog, _ID)
AND
DB_WYR_KillDirectorGortash_OMs(_Dialog)
AND
DB_WYR_KillDirectorGortash_OMs(_OtherDialog)
THEN
PROC_ClearOriginMoment(_OtherDialog);

PROC
PROC_StartDialog_AddExtraSpeakers((DIALOGRESOURCE)_Dialog, _ID)
AND
DB_WYR_KillDirectorGortash_OMs(_Dialog)
AND
QRY_SpeakerIsAvailableAndInDialogRange(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac)
THEN
PROC_DialogAddSpeakingActor(_ID, S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03);


PROC
PROC_StartDialog_AddExtraSpeakers((DIALOGRESOURCE)_Dialog, _ID)
AND
DB_WYR_KillDirectorGortash_OMs(_Dialog)
AND
DB_WYR_KillDirectorGortash_SteelWatchers(_SteelWatcher)
AND
NOT DB_CantTalk_IgnoreDead(_SteelWatcher)
AND
IsInTrigger(_SteelWatcher, S_WYR_WyrmRock_AudienceHallArea_a078f420-9f5e-452b-9391-e96e754b61c8, 1)
THEN
PROC_DialogAddSpeakingActor(_ID, S_WYR_AudienceHall_SteelWatcher_003_6622cf7f-a119-4c42-9a1e-b7cc4543dd19, 0, 1);

IF
FlagSet(_Flag, _, _ID)
AND
DB_WYR_KillDirectorGortash_OMEndingFlags(_Flag)
THEN
DB_WYR_KillDirectorGortash_RestartAfterDialog(_ID);

// starting a fight during Karlach OM blocks the restart of the main dialog
IF
FlagSet((FLAG)WYR_KillDirectorGortash_Event_StartFight_8a332662-5a53-4b4c-a788-1341a9718b10, _, _ID)
AND
DB_WYR_KillDirectorGortash_RestartAfterDialog(_ID)
THEN
NOT DB_WYR_KillDirectorGortash_RestartAfterDialog(_ID);

IF
DialogEnded(_, _ID)
AND
DB_WYR_KillDirectorGortash_RestartAfterDialog(_ID)
AND
NOT QRY_WYR_KillDirectorGortash_RestartCeremonyDialogAfterOM(_ID)
AND
DB_WYR_KillDirectorGortash_OMEndingFlags(_Flag)
THEN
ClearFlag(_Flag);

// First DU
QRY
QRY_WYR_KillDirectorGortash_RestartCeremonyDialogAfterOM((INTEGER)_DialogID)
AND
NOT DB_OnlyOnce("WYR_KillDirectorGortash_StartCeremonyDialog")
AND
DB_ORI_DarkUrge((CHARACTER)_DarkUrge)
AND
DB_DialogPlayers(_DialogID, _DarkUrge, _)
AND
QRY_WYR_KillDirectorGortash_StartCeremonyDialog(_DarkUrge)
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_StartCeremonyDialog")
THEN
DB_NOOP(1);

// Second: other players
QRY
QRY_WYR_KillDirectorGortash_RestartCeremonyDialogAfterOM((INTEGER)_DialogID)
AND
NOT DB_OnlyOnce("WYR_KillDirectorGortash_StartCeremonyDialog")
AND
DB_DialogPlayers(_DialogID, _Player, _)
AND
_Player != S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c
AND
QRY_WYR_KillDirectorGortash_StartCeremonyDialog((CHARACTER)_Player)
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_StartCeremonyDialog")
THEN
DB_NOOP(1);

// Third: Karlach
QRY
QRY_WYR_KillDirectorGortash_RestartCeremonyDialogAfterOM((INTEGER)_DialogID)
AND
NOT DB_OnlyOnce("WYR_KillDirectorGortash_StartCeremonyDialog")
AND
DB_DialogPlayers(_DialogID, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _)
AND
QRY_WYR_KillDirectorGortash_StartCeremonyDialog(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c)
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_StartCeremonyDialog")
THEN
DB_NOOP(1);

IF
DialogEnded((DIALOGRESOURCE)WYR_KillDirectorGortash_Ceremony_5149a422-854a-9e05-433a-0520d87eb112, _)
AND
DB_WYR_KillDirectorGortash_OMEndingFlags(_Flag)
THEN
ClearFlag(_Flag);



//END_REGION


//REGION BLoodwedding Fallback

IF
FlagSet((FLAG)NIGHT_DarkUrge_Bloodwedding_2fc626ed-db4c-4cc6-a742-0a653a2fe51f, _, _)
THEN
PROC_RemoveOneShotTrigger(S_ORI_DarkUrge_BloodweddingFallback_4ccb7b0c-2cff-4d3d-b9dc-d3a284583ff3);
NOT DB_ORI_DarkUrge_BloodweddingFallback(1);

PROC
PROC_OneShotTriggerEntered(_, S_ORI_DarkUrge_BloodweddingFallback_4ccb7b0c-2cff-4d3d-b9dc-d3a284583ff3)
THEN
DB_ORI_DarkUrge_BloodweddingFallback(1);

IF
DB_ORI_DarkUrge_BloodweddingFallback(1)
AND
NOT DB_Camp_NightMode(1)
AND
DB_ORI_DarkUrge((CHARACTER)_DarkUrge)
AND
NOT DB_CantTalk_IgnoreCombat(_DarkUrge)
THEN
TeleportTo(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, (CHARACTER)_DarkUrge);
SetVisible(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 0);
SetDetached(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 1);
TeleportTo(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, (CHARACTER)_DarkUrge);
SetVisible(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 0);
SetDetached(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 1);

IF
DB_ORI_DarkUrge_BloodweddingFallback(1)
AND
NOT DB_Camp_NightMode(1)
AND
DB_CurrentLevel(_Level)
AND
DB_ORI_DarkUrge_BloodWeddingLevels(_Level)
AND
DB_ORI_DarkUrge((CHARACTER)_DarkUrge)
AND
NOT DB_CantTalk_IgnoreCombat(_DarkUrge)
AND
QRY_StartDialog_Fixed(CAMP_DarkUrge_Bloodwedding_SD_e0a79044-1745-8d6c-99f2-21a7226e7fa8, S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, S_WYR_OrinsImpersonation_OrinDummy_10bcedcb-ea08-4af7-9946-297e4088e662, (CHARACTER)_DarkUrge)
THEN
SetFlag((FLAG)ORI_DarkUrge_State_BloodWeddingFallback_9b4bcdba-adbe-c189-8bb5-08bcdbb15eaf, NULL_00000000-0000-0000-0000-000000000000, 0);
MakePlayerActive((CHARACTER)_DarkUrge);
NOT DB_ORI_DarkUrge_BloodweddingFallback(1);

IF
DialogEnded(CAMP_DarkUrge_Bloodwedding_SD_e0a79044-1745-8d6c-99f2-21a7226e7fa8, _ID)
AND
DB_DialogPlayers(_ID, _DarkUrge, 1)
AND
DB_GlobalFlag((FLAG)ORI_DarkUrge_State_BloodWeddingFallback_9b4bcdba-adbe-c189-8bb5-08bcdbb15eaf)
THEN
ApplyStatus(_DarkUrge, "DAZED", 12.0, 0, NULL_00000000-0000-0000-0000-000000000000);

//END_REGION

//REGION Reactivity BG

PROC
PROC_BlockLootCorpse(_Character, S_LOW_BhaalTemple_ButlerOrin_c4197c67-9fbf-4ac3-8a24-7902ea573c68)
AND
DB_OnlyOnce("ORI_DarkUrge_VB_LootButlerOrin")
THEN
StartVoiceBark((VOICEBARKRESOURCE)ORI_DarkUrge_VB_LootButlerOrin_ddaa46ed-8437-2d00-aa7c-b3b1a9d1d928, _Character);

IF
VoiceBarkStarted((VOICEBARKRESOURCE)ORI_DarkUrge_VB_LootButlerOrin_ddaa46ed-8437-2d00-aa7c-b3b1a9d1d928, _)
THEN
DB_OnlyOnce("ORI_DarkUrge_VB_LootButlerOrin");

//END_REGION


//REGION Journal

IF
FlagSet((FLAG)ORI_State_DarkUrge_KnowsBhaalspawn_d252e937-f659-7458-99d2-4aaf603185a7, _, _)
AND
DB_ORI_DarkUrge(_DarkUrge)
THEN
QuestUpdate(_DarkUrge, "ORI_Avatar_DarkUrge", "Bloodwedding");

IF
DialogStarted((DIALOGRESOURCE)CAMP_DarkUrge_SkippedTempleFinale_SD_8b5bb777-741d-401b-23bb-106ca61b2d59, _)
AND
DB_ORI_DarkUrge(_DarkUrge)
THEN
QuestUpdate(_DarkUrge, "ORI_Avatar_DarkUrge", "BhaalLost");

IF
FlagSet((FLAG)ORI_DarkUrge_State_GortashRevealedCultRole_635fb945-0e95-8440-73de-e86bf3805313, _, _)
AND
DB_ORI_DarkUrge(_DarkUrge)
THEN
QuestUpdate(_DarkUrge, "ORI_Avatar_DarkUrge", "Ceremony");

IF
FlagSet((FLAG)LOW_DevilsFee_Knows_DUConnection_b0ffae48-f024-1576-d08e-9e629ba16618, _, _)
AND
DB_ORI_DarkUrge(_DarkUrge)
THEN
QuestUpdate(_DarkUrge, "ORI_Avatar_DarkUrge", "DevilsFee");

//END_REGION

//REGION Bloodwedding Followup

PROC
PROC_CampNight_PreSelection_Hook()
AND
DB_GlobalFlag(ORI_DarkUrge_State_BloodWeddingFallback_9b4bcdba-adbe-c189-8bb5-08bcdbb15eaf)
AND
NOT DB_GlobalFlag(NIGHT_DarkUrge_BloodWeddingFollowup_993943d4-8774-41b4-8875-94b4600ad232)
THEN
ClearFlag((FLAG)NIGHT_DarkUrge_BloodWeddingFollowup_Requirement_6a4360d8-913b-41c6-a56a-c476ee276186);

PROC
PROC_CampNight_PreSelection_Hook()
AND
DB_GlobalFlag(ORI_DarkUrge_State_BloodWeddingFallback_9b4bcdba-adbe-c189-8bb5-08bcdbb15eaf)
AND
NOT DB_GlobalFlag(NIGHT_DarkUrge_BloodWeddingFollowup_993943d4-8774-41b4-8875-94b4600ad232)
AND
DB_ORI_DarkUrge(_DarkUrge)
AND
DB_InCamp(_DarkUrge)
AND
DB_InCamp((CHARACTER)S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a)
AND
NOT QRY_PreventMPDialogue((CHARACTER)S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _DarkUrge)
THEN
SetFlag((FLAG)NIGHT_DarkUrge_BloodWeddingFollowup_Requirement_6a4360d8-913b-41c6-a56a-c476ee276186);

QRY
QRY_Camp_StartSoloDream_CustomDialogStart(CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67, _DarkUrge)
THEN
DB_NOOP(1); //Make sure default dialogue can't start

QRY
QRY_Camp_StartSoloDream_CustomDialogStart(CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67, _DarkUrge)
AND
DB_InCamp((CHARACTER)S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a)
AND
NOT QRY_PreventMPDialogue((CHARACTER)S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _DarkUrge)
AND
QRY_SpeakerIsAvailable(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a)
AND
DB_InCamp((CHARACTER)S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba)
AND
NOT QRY_PreventMPDialogue((CHARACTER)S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, _DarkUrge)
AND
QRY_SpeakerIsAvailable(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba)
AND
QRY_StartDialog_Fixed(CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67, _DarkUrge, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba)
THEN
DB_OnlyOnce("CAMP_DarkUrge_CFM_BloodweddingFollowup");

QRY
QRY_Camp_StartSoloDream_CustomDialogStart(CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67, _DarkUrge)
AND
DB_InCamp((CHARACTER)S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a)
AND
NOT QRY_PreventMPDialogue((CHARACTER)S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _DarkUrge)
AND
QRY_SpeakerIsAvailable(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a)
AND
NOT DB_OnlyOnce("CAMP_DarkUrge_CFM_BloodweddingFollowup")
AND
QRY_StartDialog_Fixed(CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67, _DarkUrge, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a)
THEN
DB_OnlyOnce("CAMP_DarkUrge_CFM_BloodweddingFollowup");



//END_REGION
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "Act3"
