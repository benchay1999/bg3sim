Version 1
SubGoalCombiner SGC_AND
INITSECTION
DB_Dialogs(S_LOW_SWS_Patrols_OnWall_FF_000_387061e5-478e-4e6c-af05-5aef578a9c32,LOW_SWS_Patrols_OnWall_FF_000_4c68d30c-0fe9-7a63-e381-430126326ede);
DB_Dialogs(S_LOW_SWS_Patrols_OnWall_FF_001_b944774a-ab63-4325-81a0-3931fbbe0842,LOW_SWS_Patrols_OnWall_FF_001_bd66f2ea-fb38-0f00-4a54-6834116c09cd);


// Patrols
DB_Dialogs(S_LOW_SWS_Patrols_000_FF_000_979be68f-f08f-48e0-b299-11284b1e8eeb,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_000_FF_001_01de1cf6-a905-4b96-a605-a912ee4c0cb5,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_000_FF_002_ac0a9a7c-4a93-4093-80cf-3d1594f9fa48,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_001_FF_000_04589068-fb1d-4497-8a54-38eebe94290a,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_001_FF_001_15f6e3e7-8bb7-47af-b4bf-a15ddc18bdd0,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_001_FF_002_6cbbd8c6-ee3f-487d-90e8-d3e80fedd3e1,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_002_FF_000_4bda014f-b1f7-4191-a3f6-93d981ff7e0d,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_002_FF_001_0b75b432-ba58-4d2f-9225-c735a5dc483b,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_002_FF_002_65dde393-dd1d-46d9-8054-34f44cbc74cf,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_003_FF_000_c9fd0b0a-de28-4099-b17b-715b30fa4501,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_003_FF_001_32d20237-fd5b-4b7d-91ba-e9f5934c4e56,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_003_FF_002_49e23622-8969-445f-892a-21561ef3db80,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_004_FF_000_9bf4314a-ff1b-47a2-ad86-33ce59ee8c9c,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_004_FF_001_680ecd79-6fdd-4ac3-af3a-1fec349a5ad9,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);
DB_Dialogs(S_LOW_SWS_Patrols_004_FF_002_66055e15-9f16-44d1-9402-e728fbaf7e10,LOW_SWS_Patrols_FF_Generic_bc08f8b6-237e-57fe-f6f1-cab170ff62ee);

DB_LOW_SWS_PatrolGroupNames("LOW_SWS_Patrol_000");
DB_LOW_SWS_PatrolGroupNames("LOW_SWS_Patrol_001");
DB_LOW_SWS_PatrolGroupNames("LOW_SWS_Patrol_002");
DB_LOW_SWS_PatrolGroupNames("LOW_SWS_Patrol_003");
DB_LOW_SWS_PatrolGroupNames("LOW_SWS_Patrol_004");

DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_000", (CHARACTER)S_LOW_SWS_Patrols_000_SW_844aef4d-f488-41ae-8416-3d3ff4b8b42e, 4);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_000", (CHARACTER)S_LOW_SWS_Patrols_000_FF_000_979be68f-f08f-48e0-b299-11284b1e8eeb, 3);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_000", (CHARACTER)S_LOW_SWS_Patrols_000_FF_001_01de1cf6-a905-4b96-a605-a912ee4c0cb5, 2);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_000", (CHARACTER)S_LOW_SWS_Patrols_000_FF_002_ac0a9a7c-4a93-4093-80cf-3d1594f9fa48, 1);

DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_001", (CHARACTER)S_LOW_SWS_Patrols_001_SW_583ae5a4-a2fb-4208-815a-d4444e2ae7ec, 4);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_001", (CHARACTER)S_LOW_SWS_Patrols_001_FF_000_04589068-fb1d-4497-8a54-38eebe94290a, 3);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_001", (CHARACTER)S_LOW_SWS_Patrols_001_FF_001_15f6e3e7-8bb7-47af-b4bf-a15ddc18bdd0, 2);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_001", (CHARACTER)S_LOW_SWS_Patrols_001_FF_002_6cbbd8c6-ee3f-487d-90e8-d3e80fedd3e1, 1);

DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_002", (CHARACTER)S_LOW_SWS_Patrols_002_SW_71a2a408-6257-42ed-bb0c-3ae255a415a6, 4);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_002", (CHARACTER)S_LOW_SWS_Patrols_002_FF_000_4bda014f-b1f7-4191-a3f6-93d981ff7e0d, 3);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_002", (CHARACTER)S_LOW_SWS_Patrols_002_FF_001_0b75b432-ba58-4d2f-9225-c735a5dc483b, 2);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_002", (CHARACTER)S_LOW_SWS_Patrols_002_FF_002_65dde393-dd1d-46d9-8054-34f44cbc74cf, 1);

DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_003", (CHARACTER)S_LOW_SWS_Patrols_003_SW_98135166-4600-444c-a667-41d74f9ce5a2, 4);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_003", (CHARACTER)S_LOW_SWS_Patrols_003_FF_000_c9fd0b0a-de28-4099-b17b-715b30fa4501, 3);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_003", (CHARACTER)S_LOW_SWS_Patrols_003_FF_001_32d20237-fd5b-4b7d-91ba-e9f5934c4e56, 2);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_003", (CHARACTER)S_LOW_SWS_Patrols_003_FF_002_49e23622-8969-445f-892a-21561ef3db80, 1);

DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_004", (CHARACTER)S_LOW_SWS_Patrols_004_SW_788ff2ad-07a5-412c-aba8-6b99de0b2a7f, 4);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_004", (CHARACTER)S_LOW_SWS_Patrols_004_FF_000_9bf4314a-ff1b-47a2-ad86-33ce59ee8c9c, 3);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_004", (CHARACTER)S_LOW_SWS_Patrols_004_FF_001_680ecd79-6fdd-4ac3-af3a-1fec349a5ad9, 2);
DB_CRIME_Guards_PatrolGroup("LOW_SWS_Patrol_004", (CHARACTER)S_LOW_SWS_Patrols_004_FF_002_66055e15-9f16-44d1-9402-e728fbaf7e10, 1);

PROC_LOW_SWS_InitPatrols();

DB_LOW_SWS_BasiliskGate_CriminalCivilians((CHARACTER)S_LOW_SWS_BasiliskGate_Civilian_000_f2aaa9c2-3b19-422f-93ac-bbceeb8100d2);
DB_LOW_SWS_BasiliskGate_CriminalCivilians((CHARACTER)S_LOW_SWS_BasiliskGate_Civilian_002_2e746867-2f83-477a-b14e-24b84ecd480a);
KBSECTION
IF
DB_CRIME_Guards_PatrolGroup(_PatrolGroupID, _Guard, _)
AND
DB_LOW_SWS_PatrolGroupNames(_PatrolGroupID)
THEN
PROC_CharacterDisableCrime(_Guard, "DangerousMonsterReaction");
PROC_CharacterDisableCrime(_Guard, "DangerousMonsterReactionFallback");

PROC
PROC_LOW_SWS_InitPatrols()
AND
DB_LOW_SWS_PatrolGroupNames(_PatrolID)
THEN
PROC_CRIME_Guards_SetPatrolLeader(_PatrolID);

//REGION Foundry Destroyed state change

IF
FlagSet(GLO_Foundry_State_ControlCentreDestroyed_456906c5-40a6-429e-8e1c-7120a2ef631b,_,_)
THEN
TimerLaunch("LOW_SWS_TransitionState",10000);
PROC_LOW_SWS_Transition();

IF
TimerFinished("LOW_SWS_TransitionState")
THEN
SetFlag(LOW_SWS_DisabledState_709ca754-4a9d-4f55-bc83-9fca078fc153,NULL_00000000-0000-0000-0000-000000000000,0);
PROC_LOW_SWS_Disabled();

PROC
PROC_LOW_SWS_Transition()
THEN
DB_NOOP(1);

PROC
PROC_LOW_SWS_Disabled()
THEN
DB_NOOP(1);

//END_REGION Foundry Destroyed state change

//REGION LOW_SWS_BasiliskGate Civilians available check
PROC
PROC_StateSet_CantTalk(_Civilian)
AND
DB_LOW_SWS_BasiliskGate_CriminalCivilians((CHARACTER)_Civilian)
THEN
SetFlag((FLAG)LOW_SWS_BasiliskGate_CiviliansCantTalk_63ed70a4-562e-4ad1-b3e0-9868c284de62);

PROC
PROC_StateCleared_CantTalk(_Civilian)
AND
DB_LOW_SWS_BasiliskGate_CriminalCivilians((CHARACTER)_Civilian)
AND
NOT QRY_LOW_SWS_BasiliskGate_CriminalCivilian_CheckCantTalk()
THEN
ClearFlag((FLAG)LOW_SWS_BasiliskGate_CiviliansCantTalk_63ed70a4-562e-4ad1-b3e0-9868c284de62);

QRY
QRY_LOW_SWS_BasiliskGate_CriminalCivilian_CheckCantTalk()
AND
DB_LOW_SWS_BasiliskGate_CriminalCivilians(_Civilian)
AND
DB_CantTalk(_Civilian)
THEN
SetFlag((FLAG)LOW_SWS_BasiliskGate_CiviliansCantTalk_63ed70a4-562e-4ad1-b3e0-9868c284de62);
//END_REGION
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "Act3b_LOW_SteelWatchStreets"
