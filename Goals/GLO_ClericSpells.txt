Version 1
SubGoalCombiner SGC_AND
INITSECTION
DB_GLO_Spells_DivineInterventionSpells("Shout_DivineIntervention_Attack");
DB_GLO_Spells_DivineInterventionSpells("Shout_DivineIntervention_Healing");
DB_GLO_Spells_DivineInterventionSpells("Shout_DivineIntervention_Supplies");
DB_GLO_Spells_DivineInterventionSpells("Shout_DivineIntervention_Weapon");
KBSECTION
IF
TextEvent("divineintervention")
AND
GetHostCharacter(_Player)
THEN
AddPassive(_Player,"DivineIntervention");

IF
TextEvent("divineintervention_clear")
AND
GetHostCharacter(_Player)
THEN
RemovePassive(_Player,"DivineIntervention");
ClearTag(_Player,(TAG)DIVINE_INTERVENTION_USED_37ad267f-7295-4c1e-9ca4-769c8c06441d);

IF
TagSet(_Character,DIVINE_INTERVENTION_0aa50ec5-f0a5-4a9d-a3c8-3ae49a37941e)
AND
IsTagged(_Character,DIVINE_INTERVENTION_USED_37ad267f-7295-4c1e-9ca4-769c8c06441d,0)
THEN
AddSpell((CHARACTER)_Character,"Shout_DivineIntervention",0,1);

IF
TagCleared(_Character,DIVINE_INTERVENTION_0aa50ec5-f0a5-4a9d-a3c8-3ae49a37941e)
THEN
RemoveSpell((CHARACTER)_Character,"Shout_DivineIntervention",1);

IF
CastedSpell(_Character,_Spell,_,_,_)
AND
DB_GLO_Spells_DivineInterventionSpells(_Spell)
THEN
RemoveSpell((CHARACTER)_Character,"Shout_DivineIntervention",1);
SetTag(_Character,DIVINE_INTERVENTION_USED_37ad267f-7295-4c1e-9ca4-769c8c06441d);
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "__Shared_Campaign"
