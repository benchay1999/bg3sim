Version 1
SubGoalCombiner SGC_AND
INITSECTION
DB_IgnoreMutingStatussesDialog((DIALOGRESOURCE)DebugBook_Camp_a4b60736-3e7a-5b59-099e-05f144d88532);
KBSECTION
IF
TextEvent("entityevent")
AND
GetTextEventParamUUID(1, _UUID)
AND
GetTextEventParamString(2, _Event)
THEN
SetEntityEvent(_UUID, _Event);

IF
TextEvent("fakeloadact1")
THEN
DB_CheckLevelStart("WLD_Main_A");
DB_CurrentLevel("WLD_Main_A");
NOT DB_CheckLevelStart("WLD_Main_A");
NOT DB_CurrentLevel("WLD_Main_A");

IF
TextEvent("fakeload")
AND
GetTextEventParamString(1,_LevelName)
THEN
DB_CheckLevelStart(_LevelName);
DB_CurrentLevel(_LevelName);
NOT DB_CheckLevelStart(_LevelName);
NOT DB_CurrentLevel(_LevelName);

IF
TextEvent("tpa")
AND
GetTextEventParamInteger(1,_TPLinked)
AND
GetTextEventParamInteger(2,_TPPartyFollower)
AND
GetTextEventParamInteger(3,_TPSummon)
AND
GetTextEventParamInteger(4,_TPLeaveCombat)
AND
GetHostCharacter(_Player)
THEN
TeleportTo(_Player,(TRIGGER)S_CHA_ShadowheartFleePos_051554e8-266e-4293-ab76-a2f7f74cd4de,"",_TPLinked,_TPPartyFollower,_TPSummon,_TPLeaveCombat, 1);

IF
TextEvent("tpb")
AND
GetTextEventParamInteger(1,_TPLinked)
AND
GetTextEventParamInteger(2,_TPPartyFollower)
AND
GetTextEventParamInteger(3,_TPSummon)
AND
GetTextEventParamInteger(4,_TPLeaveCombat)
AND
GetHostCharacter(_Player)
THEN
TeleportTo(_Player,(TRIGGER)S_CRA_BeachShadowheartRecruit_566350d5-6331-4a87-afde-ef122c5f41a6,"",_TPLinked,_TPPartyFollower,_TPSummon,_TPLeaveCombat, 1);

IF
TextEvent("follower")
AND
GetHostCharacter(_Player)
AND
CreateAtObject(Humans_Male_Civilian_3278f064-5353-4c08-ab96-c2f432d0fda0,_Player,1,0,"",0,_Follower)
THEN
AddPartyFollower((CHARACTER)_Follower,(CHARACTER)_Player);
DB_MyNPCFollower(_Follower);
DB_Dialogs(_Follower,(DIALOGRESOURCE)TEST_NPC_13a1e844-c237-7f6d-7cd5-b9f80745794e);

IF
TextEvent("nofollower")
AND
GetHostCharacter(_Player)
AND
DB_MyNPCFollower(_Follower)
THEN
RemovePartyFollower((CHARACTER)_Follower,(CHARACTER)_Player);

IF
TextEvent("dom")
THEN
DB_DoubleOriginMoment((DIALOGRESOURCE)TEST_NPC_13a1e844-c237-7f6d-7cd5-b9f80745794e, (TAG)REALLY_SHADOWHEART_642d2aee-e3df-47e3-9f47-bbcd441bb9e0, (TAG)REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5,(DIALOGRESOURCE)TEST_DOM_c9682393-6a70-6ff5-233b-2ecf30423d5f,(DIALOGRESOURCE)TEST_DOM_c9682393-6a70-6ff5-233b-2ecf30423d5f,(DIALOGRESOURCE)TEST_DOM_c9682393-6a70-6ff5-233b-2ecf30423d5f,(DIALOGRESOURCE)TEST_DOM_c9682393-6a70-6ff5-233b-2ecf30423d5f,(DIALOGRESOURCE)TEST_DOM_c9682393-6a70-6ff5-233b-2ecf30423d5f,(DIALOGRESOURCE)TEST_DOM_c9682393-6a70-6ff5-233b-2ecf30423d5f,(DIALOGRESOURCE)TEST_DOM_c9682393-6a70-6ff5-233b-2ecf30423d5f ,  1);

IF
TextEvent("getonlyonce")
AND
GetTextEventParamString(1,_Value)
AND
NOT QRY_Test_OnlyOnceContains(_Value)
AND
GetHostCharacter(_Player)
AND
Concatenate("DB_OnlyOnce does not contain ",_Value,_DebugText)
THEN
DebugText(_Player,_DebugText);

QRY
QRY_Test_OnlyOnceContains((STRING)_Value)
AND
DB_OnlyOnce(_Value)
AND
GetHostCharacter(_Player)
AND
Concatenate("DB_OnlyOnce contains ",_Value,_DebugText)
THEN
DebugText(_Player,_DebugText);

IF
TextEvent("getglobalflag")
AND
GetTextEventParamUUID(1,_Flag)
AND
NOT QRY_Test_GlobalFlagsContains((FLAG)_Flag)
AND
GetHostCharacter(_Player)
AND
GUIDToString(_Flag,_FlagString)
AND
Concatenate("DB_GlobalFlags does not contain ",_FlagString,_DebugText)
THEN
DebugText(_Player,_DebugText);

QRY
QRY_Test_GlobalFlagsContains((FLAG)_Flag)
AND
DB_GlobalFlag(_Flag)
AND
GetHostCharacter(_Player)
AND
GUIDToString(_Flag,_FlagString)
AND
Concatenate("DB_GlobalFlags contains ",_FlagString,_DebugText)
THEN
DebugText(_Player,_DebugText);

IF
TextEvent("timerstart")
AND
GetTextEventParamString(1,_TimerName)
AND
GetTextEventParamInteger(2,_Duration)
THEN
TimerLaunch(_TimerName,_Duration);

IF
TextEvent("timerstart")
AND
GetTextEventParamUUID(1,_Entity)
AND
GetTextEventParamString(2,_TimerName)
AND
GetTextEventParamInteger(3,_Duration)
THEN
RealtimeObjectTimerLaunch(_Entity,_TimerName,_Duration);

IF
TextEvent("NPC")
AND
GetHostCharacter(_Player)
AND
CreateAtObject(Humans_Male_Civilian_3278f064-5353-4c08-ab96-c2f432d0fda0,_Player,1,0,"",0,_MyNPC)
THEN
DB_MyNPC((CHARACTER)_MyNPC);
DB_Dialogs(_MyNPC,(DIALOGRESOURCE)TEST_NPC_13a1e844-c237-7f6d-7cd5-b9f80745794e);

IF
TextEvent("NPC-surrender")
AND
DB_MyNPC(_NPC)
AND
GetHostCharacter(_Player)
THEN
PROC_Surrender((CHARACTER)_NPC,_Player);

IF
TextEvent("NPC-dialog")
AND
DB_MyNPC(_MyNPC)
THEN
PROC_RemoveDialog(_MyNPC);
DB_Dialogs(_MyNPC,(DIALOGRESOURCE)TEST_NPC_13a1e844-c237-7f6d-7cd5-b9f80745794e);

IF
TextEvent("NPC-OM")
AND
DB_MyNPC(_MyNPC)
THEN
PROC_RemoveDialog(_MyNPC);
DB_Dialogs(_MyNPC,(DIALOGRESOURCE)TEST_OriginMoment_Shadowheart_1074ada6-3995-b680-c551-6d7efaf56e9c);
PROC_DefineSingleOriginMoment((DIALOGRESOURCE)TEST_OriginMoment_Shadowheart_1074ada6-3995-b680-c551-6d7efaf56e9c,(TAG)REALLY_SHADOWHEART_642d2aee-e3df-47e3-9f47-bbcd441bb9e0,(DIALOGRESOURCE)TEST_OriginMoment_Shadowheart_1074ada6-3995-b680-c551-6d7efaf56e9c);
DB_OriginMoment_PartnerDateExclusive((DIALOGRESOURCE)TEST_OriginMoment_Shadowheart_1074ada6-3995-b680-c551-6d7efaf56e9c);

IF
TextEvent("shrom")
AND
GetHostCharacter(_Player)
THEN
SetFlag((FLAG)ORI_State_PartneredWithShadowheart_3808ae35-ad4e-465b-800b-63d32b77211e,_Player,0);

IF
TextEvent("NPC-come")
AND
DB_MyNPC(_MyNPC)
AND
GetHostCharacter(_Player)
THEN
PROC_CharacterMoveTo(_MyNPC,_Player,"Walk","");

IF
TextEvent("NPC-purge")
AND
DB_MyNPC(_MyNPC)
THEN
PurgeOsirisQueue(_MyNPC);

IF
TextEvent("NPC-purgecome")
AND
DB_MyNPC(_MyNPC)
AND
GetHostCharacter(_Player)
THEN
PurgeOsirisQueue(_MyNPC);
PROC_CharacterMoveTo(_MyNPC,_Player,"Walk","");

IF
TextEvent("NPC-purgecome2")
AND
DB_MyNPC(_MyNPC)
AND
GetHostCharacter(_Player)
THEN
PurgeOsirisQueue(_MyNPC,0);
PROC_CharacterMoveTo(_MyNPC,_Player,"Walk","");

IF
TextEvent("NPC-loot")
AND
DB_MyNPC(_MyNPC)
AND
GetHostCharacter(_Player)
AND
OpenCharacterLootUI((CHARACTER)_Player,(CHARACTER)_MyNPC,0)
THEN
DebugBreak("Failed to open Loot");

IF
TextEvent("rest")
AND
GetHostCharacter(_Player)
THEN
RestoreParty(_Player);

IF
TextEvent("KeyboardShortcut1")
THEN
DB_Debug_AddOrigin((CHARACTER)S_Player_ShadowHeart_3ed74f06-3c60-42dc-83f6-f034cb47c679);
DB_Debug_AddOrigin((CHARACTER)S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d);
DB_Debug_AddOrigin((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_Debug_AddOrigin((CHARACTER)S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604);
DB_Debug_AddOrigin((CHARACTER)S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c);
DB_Debug_AddOrigin((CHARACTER)S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255);

IF
TextEvent("KeyboardShortcut1")
AND
NOT DB_GlobalFlag(GEN_MaxPlayerCountReached_823b5064-8aa4-c0b7-1b8c-657b46987ccd)
AND
QRY_OnlyOnce_Reset("DebugRecruit_SelectOrigin")
AND
QRY_OnlyOnce_Reset("DebugRecruit_FindAvatar")
AND
DB_Debug_AddOrigin((CHARACTER)_Origin)
AND
NOT DB_Players(_Origin)
AND
NOT DB_Origins_UnavailableForRandom(_Origin)
AND
NOT DB_PermaDefeated(_Origin)
AND
QRY_OnlyOnce("DebugRecruit_SelectOrigin")
THEN
PROC_Debug_AddOriginToFirstAvatar((CHARACTER)_Origin);

PROC
PROC_Debug_AddOriginToFirstAvatar((CHARACTER)_Origin)
AND
GetHostCharacter(_Avatar)
AND
DB_Avatars(_Avatar)
AND
QRY_OnlyOnce("DebugRecruit_FindAvatar")
THEN
SetOnStage((CHARACTER)_Origin,1);
TeleportTo((CHARACTER)_Origin, _Avatar);
PROC_GLO_PartyMembers_Add((CHARACTER)_Origin, _Avatar);
SetFlag((FLAG)SetPreset_Default_7eabc516-c15c-46ff-a99d-60d4a9f7037e, (CHARACTER)_Origin, 0); // flagType: Object

PROC
PROC_Debug_AddOriginToFirstAvatar((CHARACTER)_Origin)
AND
NOT DB_OnlyOnce("DebugRecruit_FindAvatar")
AND
DB_Avatars(_Avatar)
AND
QRY_OnlyOnce("DebugRecruit_FindAvatar")
THEN
SetOnStage((CHARACTER)_Origin,1);
TeleportTo((CHARACTER)_Origin, _Avatar);
PROC_GLO_PartyMembers_Add((CHARACTER)_Origin, _Avatar);
SetFlag((FLAG)SetPreset_Default_7eabc516-c15c-46ff-a99d-60d4a9f7037e, (CHARACTER)_Origin, 0); // flagType: Object

IF
TextEvent("KeyboardShortcut1")
AND
DB_GlobalFlag(GEN_MaxPlayerCountReached_823b5064-8aa4-c0b7-1b8c-657b46987ccd)
AND
GetHostCharacter(_Player)
THEN
DebugText(_Player,"Max player count reached!");

IF
TextEvent("KeyboardShortcut1")
AND
DB_Debug_AddOrigin((CHARACTER)_Origin)
THEN
NOT DB_Debug_AddOrigin((CHARACTER)_Origin);

IF
TextEvent("KeyboardShortcut2")
AND
DB_ActiveCamp(_ActiveCamp)
THEN
ClearFlag((FLAG)NIGHT_FirstNightContemplation_9e5cfbe2-f4f3-4249-a1b7-142a7899277a,NULL_00000000-0000-0000-0000-000000000000);
DB_CampNight((FLAG)NIGHT_FirstNightContemplation_9e5cfbe2-f4f3-4249-a1b7-142a7899277a,7100);
DB_CampNight_Camp((FLAG)NIGHT_FirstNightContemplation_9e5cfbe2-f4f3-4249-a1b7-142a7899277a,_ActiveCamp);
DB_CampNight_AvatarDream((FLAG)NIGHT_FirstNightContemplation_9e5cfbe2-f4f3-4249-a1b7-142a7899277a,(DIALOGRESOURCE)CAMP_FirstNight_AvD_PostEA_69e79939-6148-1b93-d654-e54374ef9353);


IF
TextEvent("KeyboardShortcut3")
AND
GetHostCharacter(_Player)
AND
GetPosition(_Player,_X,_Y,_Z)
AND
RealSum(_X,2.0,_XOffset)
AND
CreateAt((CHARACTERROOT)Wolf_41da0eff-b533-43cc-a014-218f7d23fa11,_XOffset,_Y,_Z,1,0,"",_Wolf)
THEN
SetFaction(_Wolf,(FACTION)Evil_4be9261a-e481-8d9d-3528-f36956a19b17);
PROC_MakeNPCHostile((CHARACTER)_Wolf,_Player);

IF
TextEvent("KeyboardShortcut4")
AND
GetHostCharacter(_Player)
AND
QRY_StartDialog((DIALOGRESOURCE)DebugBook_Origin_a5cc9735-cc49-a01d-b06d-803a514bda50,_Player)
THEN
DB_NOOP(1);

IF
TextEvent("KeyboardShortcut5")
AND
GetHostCharacter(_Player)
THEN
ApplyStatus(_Player,"SILENCED",-1.0,1,NULL_00000000-0000-0000-0000-000000000000);

IF
TextEvent("KeyboardShortcut6")
AND
GetHostCharacter(_Player)
AND
QRY_StartDialogCustom_Fixed((DIALOGRESOURCE)Recruiter_55d1fd15-76ac-c6de-3011-272044122ca1, _Player,0,0,0,0)
THEN
DB_NOOP(1);

IF
TextEvent("KeyboardShortcut7")
AND
GetHostCharacter(_Player)
AND
QRY_StartDialogCustom_Fixed((DIALOGRESOURCE)DebugBook_Origin_a5cc9735-cc49-a01d-b06d-803a514bda50, _Player,0,0,0,0)
THEN
DB_NOOP(1);

IF
TextEvent("KeyboardShortcut8")
AND
GetHostCharacter(_Player)
AND
QRY_StartDialogCustom_Fixed((DIALOGRESOURCE)DebugBook_Camp_a4b60736-3e7a-5b59-099e-05f144d88532, _Player,0,0,0,0)
THEN
DB_NOOP(1);

IF
TextEvent("KeyboardShortcut9")
AND
GetHostCharacter(_Player)
AND
QRY_StartDialogCustom_Fixed((DIALOGRESOURCE)DebugBook_3af7dec4-4c08-9e44-9064-ec038ebad0ea, _Player,0,0,0,0)
THEN
DB_NOOP(1);

IF
TextEvent("g3")
AND
QRY_GetRandom("DB_Players",1,"DB_SendAMessage")
AND
DB_SendAMessage((CHARACTER)_Player)
THEN
Die(_Player,DEATHTYPE.DoT,0);
NOT DB_SendAMessage(_Player);

IF
TextEvent("vb")
AND
GetHostCharacter(_Player)
THEN
StartVoiceBark((VOICEBARKRESOURCE)TUT_Start_VB_Start_b72d4f7f-4b22-700c-efe2-ae93f991d3c7,_Player);

IF
TextEvent("banter")
AND
GetHostCharacter(_Player)
THEN
PROC_StartWorldGossip(_Player);

IF
TextEvent("kdi")
AND
GetHostCharacter(_Player)
THEN
ApplyStatus(_Player,"LONG_REST",2.0,1,NULL_00000000-0000-0000-0000-000000000000);

IF
TextEvent("pom")
THEN
PROC_StartPartyOriginMoment((CHARACTER)S_Player_ShadowHeart_3ed74f06-3c60-42dc-83f6-f034cb47c679, (DIALOGRESOURCE)FOR_Village_OM_ShadowHeart_ACM_6d0e7e55-6bac-2dd0-ec89-f9905fed4c49, (DIALOGRESOURCE)FOR_Village_OM_ShadowHeart_AOM_b3c4ed2e-bdfa-c92f-f1ca-70cc9dd4107c, (DIALOGRESOURCE)FOR_Village_OM_ShadowHeart_COM_fe36e6f6-fd03-2891-b22b-5d542fe648b7, (DIALOGRESOURCE)FOR_Village_OM_ShadowHeart_OOM_92461dc1-137e-1d24-17dc-2dc51f40d781);

IF
TextEvent("gdiag")
AND
GetHostCharacter(_Player)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)TEST_Greever_e15eda4c-7c4b-d72f-4cca-0f92a9e9111b,_Player)
THEN
DB_NOOP(1);

IF
TextEvent("aroll")
AND
GetHostCharacter(_Player)
AND
GetTextEventParamString(1,_Check)
AND
GetTextEventParamUUID(2,(DIFFICULTYCLASS)_DC)
AND
GetTextEventParamString(3,_Event)
THEN
RequestActiveRoll(_Player,NULL_00000000-0000-0000-0000-000000000000,_Check,_DC,_Event);

IF 
TextEvent("proll")
AND
GetHostCharacter(_Player)
AND
GetTextEventParamString(1,_Check)
AND
GetTextEventParamUUID(2,(DIFFICULTYCLASS)_DC)
AND
GetTextEventParamString(3,_Event)
THEN
RequestPassiveRoll(_Player,NULL_00000000-0000-0000-0000-000000000000,_Check,_DC,_Event);

IF
TextEvent("enddialog")
AND
GetHostCharacter(_Player)
THEN
DialogRequestStop(_Player);

IF
TextEvent("visible")
AND
GetTextEventParamInteger(1,_Value)
AND
GetHostCharacter(_Player)
THEN
SetVisible(_Player,_Value);

IF
TextEvent("crd")
THEN
PROC_CampRelationshipDialog(S_FOR_Courier_Dog_3059f69c-068d-4e28-8491-55953c027901,DIALOGRESOURCEGUID_Test_RelationshipDialog_dbef58ac-27a0-be66-3e67-a5d1dba65325,0);

IF
TextEvent("fadein")
AND
DB_Players(_Player)
AND
GetReservedUserID(_Player,_UserID)
THEN
ClearScreenFade((CHARACTER)_Player, 0.5, "");
PROC_ClearScreenFadeTimeline(_UserID,0.5);

PROC
PROC_CampfireMoment_PreDialog((DIALOGRESOURCE)_Dialog)
AND
DB_CampfireMoment_FixedSpeakers(_Dialog,S_FOR_Courier_Dog_3059f69c-068d-4e28-8491-55953c027901)
THEN
TeleportTo(S_FOR_Courier_Dog_3059f69c-068d-4e28-8491-55953c027901,TRIGGERGUID_S_CAMP_Corpse1_b024aded-80b6-46ef-83fd-ee90639eac02);

PROC
PROC_CampfireMoment_PostDialog((DIALOGRESOURCE)_Dialog)
AND
DB_CampfireMoment_FixedSpeakers(_Dialog,S_FOR_Courier_Dog_3059f69c-068d-4e28-8491-55953c027901)
THEN
TeleportTo(S_FOR_Courier_Dog_3059f69c-068d-4e28-8491-55953c027901,CHARACTERGUID_S_FOR_Courier_bf842d88-0c39-48b8-b4a1-f9ab140ee6ca);

IF
TextEvent("longrest")
THEN
PROC_LongRest();

IF
TextEvent("10u")
AND
GetHostCharacter(_Player)
AND
DB_ApprovalRating((CHARACTER)_Companion,_Player,_)
AND
ChangeApprovalRating((CHARACTER)_Companion, (CHARACTER)_Player, 0, 10,_)
THEN
DB_NOOP(1);

IF
TextEvent("10u")
AND
GetHostCharacter(_Player)
AND
DB_ApprovalRating((CHARACTER)_Player,_Avatar,_)
AND
ChangeApprovalRating((CHARACTER)_Player, (CHARACTER)_Avatar, 0, 10,_)
THEN
DB_NOOP(1);

IF
TextEvent("10d")
AND
GetHostCharacter(_Player)
AND
DB_ApprovalRating((CHARACTER)_Companion,_Player,_)
AND
ChangeApprovalRating((CHARACTER)_Companion, (CHARACTER)_Player, 0, -10,_)
THEN
DB_NOOP(1);

IF
TextEvent("10d")
AND
GetHostCharacter(_Player)
AND
DB_ApprovalRating((CHARACTER)_Player,_Avatar,_)
AND
ChangeApprovalRating((CHARACTER)_Player, (CHARACTER)_Avatar, 0, -10,_)
THEN
DB_NOOP(1);

IF
TextEvent("att")
AND
DB_Players(_Player)
AND
DB_ApprovalRating(_Player,_To,_Approval)
AND
GetDisplayName(_To,_TranslatedStringKey)
AND
ResolveTranslatedString(_TranslatedStringKey,_Name)
AND
IntegerToString(_Approval,_IntStr)
AND
Concatenate("Attitude (",_Name,_FirstResult)
AND
Concatenate(_FirstResult, "): ",_SecondResult)
AND
Concatenate(_SecondResult,_IntStr,_FinalResult)
THEN
DebugText(_Player,_FinalResult);

IF
TextEvent("setapproval")
AND
GetHostCharacter(_Player)
AND
DB_ApprovalRating(_Player,_To,_CurrentApproval)
AND
GetTextEventParamInteger(1,_DesiredApproval)
AND
IntegerSubtract(_DesiredApproval,_CurrentApproval,_Delta)
AND
ChangeApprovalRating(_Player, _To, 0, _Delta,_)
THEN
DB_NOOP(1);

IF
TextEvent("setapproval")
AND
GetHostCharacter(_Player)
AND
DB_ApprovalRating(_From,_Player,_CurrentApproval)
AND
GetTextEventParamInteger(1,_DesiredApproval)
AND
IntegerSubtract(_DesiredApproval,_CurrentApproval,_Delta)
AND
ChangeApprovalRating(_From,_Player, 0, _Delta,_)
THEN
DB_NOOP(1);

IF
TextEvent("showattitude")
AND
GetDebugCharacter(_Debug)
AND
IsCharacter(_Debug,1)
AND
GetHostCharacter(_Player)
AND
GetAttitudeTowardsPlayer(_Debug,_Player,_Attitude)
AND
IntegerToString(_Attitude,_Text)
THEN
DebugText(_Debug,_Text);

IF
TextEvent("setattitude")
AND
GetTextEventParamInteger(1,_NewAtt)
AND
GetDebugCharacter(_Debug)
AND
IsCharacter(_Debug,1)
AND
GetHostCharacter(_Player)
AND
IntegerToString(_NewAtt,_Text)
THEN
PROC_SetAttitude(_Debug,_Player,_NewAtt);
DebugText(_Debug,_Text);

IF
TextEvent("tempfight")
AND
GetDebugCharacter(_Debug)
AND
IsCharacter(_Debug,1)
AND
GetHostCharacter(_Player)
THEN
PROC_SetRelationTemporaryHostile(_Debug,_Player);

IF
TextEvent("setfactiongood")
AND
GetDebugCharacter(_Debug)
AND
IsCharacter(_Debug,1)
THEN
PROC_Test_SaveOrigFaction(_Debug);
SetFaction(_Debug,(FACTION)Good_b37bfd4c-baed-08f4-9866-290f8bb39e62);

IF
TextEvent("setfactionneutral")
AND
GetDebugCharacter(_Debug)
AND
IsCharacter(_Debug,1)
THEN
PROC_Test_SaveOrigFaction(_Debug);
SetFaction(_Debug,(FACTION)Neutral_a66b2d45-1b6c-082d-8a01-c6d975ead314);

IF
TextEvent("setfactionevil")
AND
GetDebugCharacter(_Debug)
AND
IsCharacter(_Debug,1)
THEN
PROC_Test_SaveOrigFaction(_Debug);
SetFaction(_Debug,(FACTION)Evil_4be9261a-e481-8d9d-3528-f36956a19b17);

IF
TextEvent("resetfaction")
AND
GetDebugCharacter(_Debug)
AND
IsCharacter(_Debug,1)
AND
DB_Test_SavedFaction(_Debug,_OrigFaction)
THEN
SetFaction(_Debug,_OrigFaction);
DB_Test_SavedFaction(_Debug,_OrigFaction);

PROC
PROC_Test_SaveOrigFaction((CHARACTER)_Debug)
AND
NOT DB_Test_SavedFaction(_Debug,_)
AND
GetFaction(_Debug,_OrigFaction)
THEN
DB_Test_SavedFaction(_Debug,_OrigFaction);

IF
TextEvent("close")
AND
GetTextEventParamUUID(1,_Item)
AND
IsItem(_Item,1)
THEN
Close((ITEM)_Item);

IF
TextEvent("open")
AND
GetTextEventParamUUID(1,_Item)
AND
IsItem(_Item,1)
THEN
Open((ITEM)_Item);
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "Start"
