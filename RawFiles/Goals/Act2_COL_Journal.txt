Version 1
SubGoalCombiner SGC_AND
INITSECTION
DB_QuestDef_SawPermaDefeatedState("COL_FindZevlor", "ZevlorPermaDefeated", (CHARACTER)S_DEN_TieflingLeader_475200ee-cc3c-4dbe-84b1-1820c02ea26a);

DB_QuestDef_State(COL_FindZevlor_Knows_MissingArabella_96443c08-01f4-6983-3b94-9f5af83fa2cf, "COL_FindZevlor", "IntroTwn");
DB_QuestDef_State(COL_TadpolingCentre_Event_PurgePods_e9c700a3-5ba8-07e9-e13f-c2e081a3a1c5, "COL_FindZevlor", "ZevlorPurged");
//Close quest if he wasn't saved in COL and players move on from Act 3.
DB_QuestDef_LevelLoaded("COL_FindZevlor", "NeverFoundZevlor", "BGO_Main_A");
KBSECTION
IF
Saw(_Player, (CHARACTER)S_DEN_TieflingLeader_475200ee-cc3c-4dbe-84b1-1820c02ea26a, _)
AND
DB_Players(_Player)
AND
DB_COL_TadpolingCentre_ZevlorInColony(1)
AND
NOT DB_OnlyOnce("COL_FindZevlor_FoundUpdate")
THEN
DB_OnlyOnce("COL_FindZevlor_FoundUpdate");
QuestUpdate("COL_FindZevlor", "FoundZevlor");

IF
FlagSet((FLAG)COL_FindZevlor_Knows_MissingParent_d615e30b-2cf6-0fe1-c62f-e27c789c9ca0, _, _)
THEN
PROC_COL_FindZevlor_TwnUpdate();

PROC
PROC_COL_FindZevlor_TwnUpdate()
AND
DB_QuestIsOpened("COL_FindZevlor")
AND
QRY_QuestUpdateIsUnlockedForAny("COL_FindZevlor", "IntroTwn")
THEN
QuestUpdate("COL_FindZevlor", "WhatZevlorDid");

PROC
PROC_COL_FindZevlor_TwnUpdate()
AND
NOT DB_QuestIsOpened("COL_FindZevlor")
THEN
QuestUpdate("COL_FindZevlor", "IntroTwnParents");

IF
FlagSet((FLAG)COL_FindZevlor_Knows_MissingHav_9a55df27-5bc7-70ac-a4e8-a98b6912d8b7, _, _)
THEN
PROC_COL_FindZevlor_HavUpdate();

PROC
PROC_COL_FindZevlor_HavUpdate()
AND
DB_QuestIsOpened("COL_FindZevlor")
AND
QRY_QuestUpdateIsUnlockedForAny("COL_FindZevlor", "IntroTwn")
THEN
QuestUpdate("COL_FindZevlor", "WhatZevlorDid");

PROC
PROC_COL_FindZevlor_HavUpdate()
AND
NOT DB_QuestIsOpened("COL_FindZevlor")
THEN
QuestUpdate("COL_FindZevlor", "IntroHav");

IF
FlagSet(COL_FindZevlor_Knows_MissingTieflingPrisoner_573946ce-bb71-d3b5-95d6-3fefcc8a4508, _, _)
THEN
PROC_COL_FindZevlor_PrisonerUpdate();

PROC
PROC_COL_FindZevlor_PrisonerUpdate()
AND
DB_QuestIsOpened("COL_FindZevlor")
THEN
QuestUpdate("COL_FindZevlor", "FoundPrisoners");

PROC
PROC_COL_FindZevlor_PrisonerUpdate()
AND
NOT DB_QuestIsOpened("COL_FindZevlor")
THEN
QuestUpdate("COL_FindZevlor", "IntroMoo");

IF
EnteredCombat(S_DEN_TieflingLeader_475200ee-cc3c-4dbe-84b1-1820c02ea26a, _)
AND
DB_QuestIsOpened("COL_FindZevlor")
THEN
QuestUpdate("COL_FindZevlor", "PodCombat");

IF
DialogEnded(COL_TadpolingCentre_PostCombat_Zevlor_5a2d0fdb-a603-b6a9-ff5e-10b57900b957, _)
THEN
QuestUpdate("COL_FindZevlor", "ZevlorSaved");
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "Act2"
