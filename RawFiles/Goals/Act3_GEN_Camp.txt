Version 1
SubGoalCombiner SGC_AND
INITSECTION
//REGION Camp Night Definitions - Zevlor's Appeal
PROC_CFM_ZevlorsAppeal_Requirement();
DB_CampNight((FLAG)NIGHT_TieflingLeadersAppeal_bdb84e42-99b9-45cb-901e-98d5e54b4f04, 1080);
DB_CampNight_Requirement((FLAG)NIGHT_TieflingLeadersAppeal_bdb84e42-99b9-45cb-901e-98d5e54b4f04, (FLAG)WYR_ZevlorsAppeal_OrinKilledZevlor_a4661a74-a68d-4471-a5b8-2310eb5b39e0);
DB_CampNight_CancelledBy((FLAG)NIGHT_TieflingLeadersAppeal_bdb84e42-99b9-45cb-901e-98d5e54b4f04,(FLAG)GLO_OrinsAbduction_State_AbductionOccured_98dda46d-871c-4807-aced-5dc3ff5f4c2d);
DB_CampNight_CancelledBy((FLAG)NIGHT_TieflingLeadersAppeal_bdb84e42-99b9-45cb-901e-98d5e54b4f04,(FLAG)LOW_PartyProgress_EnteredBhaalTemple_86f4a5b0-e869-440e-ad23-a0a6e1b7b161);
DB_CampNight_Camp((FLAG)NIGHT_TieflingLeadersAppeal_bdb84e42-99b9-45cb-901e-98d5e54b4f04, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_TieflingLeadersAppeal_bdb84e42-99b9-45cb-901e-98d5e54b4f04, "ELFSONG");
DB_CampNight_Camp((FLAG)NIGHT_TieflingLeadersAppeal_bdb84e42-99b9-45cb-901e-98d5e54b4f04, "SLUMS");
DB_CampNight_CFM((FLAG)NIGHT_TieflingLeadersAppeal_bdb84e42-99b9-45cb-901e-98d5e54b4f04, (DIALOGRESOURCE)CAMP_ZevlorsAppeal_FAKE_CFM_ffffffff-40b6-4938-b3fd-291322f45ac4);

DB_CFM_ZevlorsAppeal_CLT((LEVELTEMPLATE)CLT_ZevlorsAppeal_Farm_A_4ffef5ad-d37b-4053-8a8b-e9851d2610fa, "FARM");
DB_CFM_ZevlorsAppeal_CLT((LEVELTEMPLATE)CLT_ZevlorsAppeal_Elfsong_A_70c2d086-3cab-4ffb-a4d5-2b80bbc97297, "ELFSONG");
DB_CFM_ZevlorsAppeal_CLT((LEVELTEMPLATE)CLT_ZevlorsAppeal_Slums_A_cffd2cb2-584f-4730-9459-e2cd277f2645, "SLUMS");

DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_BoxTrigger_1c2fcdd6-b68b-85fb-2e4c-d1427bcdb6a7, "CleanupTrigger", "FARM");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_PointTrigger_dcd5afe8-521f-8ab8-0d7e-bd5627b09cce, "SpawnTrigger", "FARM");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_CorpseHelper_371375bd-6539-872f-27e0-973f3194fceb, "Body", "FARM");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Candle_002_97e9e413-10fe-8810-3eb1-cade7ba26b45, "Item", "FARM");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Candle_001_337815c6-8d48-8a04-3bfd-e8417d73b5dc, "Item", "FARM");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Painting_1ff3cd97-0d31-8b24-0c11-fae0f38e5207, "Item", "FARM");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Easel_60132cdf-fc03-8d4f-1db9-db32f4803b5d, "Item", "FARM");
DB_CFM_ZevlorsAppeal_Letters(S_CAMP_ZevlorsAppeal_OrinsLetter_88a155bb-9ca4-867b-271b-9b24ab521eeb, "MetOrin", "FARM");
DB_CFM_ZevlorsAppeal_Letters(S_CAMP_ZevlorsAppeal_OrinsLetter_NotMetOrin_8e6e35af-c7a3-85bb-13cd-fd6f627376c8, "NotMetOrin", "FARM");

DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_BoxTrigger_4df3a8bf-1fbb-8493-4896-134d19601844, "CleanupTrigger", "ELFSONG");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_PointTrigger_0da98ac1-bb4f-8950-27c8-ff51c553fe6b, "SpawnTrigger", "ELFSONG");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_CorpseHelper_68e75096-ce69-86c7-413a-d93adf375e88, "Body", "ELFSONG");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Candle_002_c8bdcffc-792e-87b8-580b-0cd91945cde2, "Item", "ELFSONG");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Candle_001_644cf0af-e678-89ac-5547-2a4c1b161779, "Item", "ELFSONG");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Painting_40c7a870-6661-8acc-266b-3ceb9121b4a4, "Item", "ELFSONG");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Easel_91e707b8-5533-8ce7-3703-1d3d92239dfa, "Item", "ELFSONG");
DB_CFM_ZevlorsAppeal_Letters(S_CAMP_ZevlorsAppeal_OrinsLetter_b9753094-f5d4-8513-4165-dd2f49f57088, "MetOrin", "ELFSONG");
DB_CFM_ZevlorsAppeal_Letters(S_CAMP_ZevlorsAppeal_OrinsLetter_NotMetOrin_bf321088-20d3-8453-3d17-3f6a0016d865, "NotMetOrin", "ELFSONG");

DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_BoxTrigger_9c2ef4eb-3b5f-8cd8-381a-da8a8516ccf2, "CleanupTrigger", "SLUMS");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_PointTrigger_5cd4d6fd-d7e3-8195-174c-b69e3109a219, "SpawnTrigger", "SLUMS");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_CorpseHelper_b712acc2-ea0d-8e0c-31be-90774bed0236, "Body", "SLUMS");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Candle_002_17e81b28-95c2-8ffd-488f-c31685fb7190, "Item", "SLUMS");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Candle_001_b3774cdb-021c-81e1-45cb-e18987cccb27, "Item", "SLUMS");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Painting_9ff2f4ac-8205-8201-16ef-f3280dd76852, "Item", "SLUMS");
DB_CFM_ZevlorsAppeal_Items(S_CAMP_ZevlorsAppeal_Easel_e01253e4-71d7-842c-2787-d47a0ed941a8, "Item", "SLUMS");
DB_CFM_ZevlorsAppeal_Letters(S_CAMP_ZevlorsAppeal_OrinsLetter_08a08cc0-1178-8d58-31e9-946cb5ab2436, "MetOrin", "SLUMS");
DB_CFM_ZevlorsAppeal_Letters(S_CAMP_ZevlorsAppeal_OrinsLetter_NotMetOrin_0e6d6cb4-4c77-8c98-2d9b-f6a77ccc8c13, "NotMetOrin", "SLUMS");
//END_REGION

DB_CampNight((FLAG)CAMP_MinscJaheira_CFM_Reunion_90334c42-bda7-4717-b3d5-12486cc82de7, 5130);
DB_CampNight_Camp((FLAG)CAMP_MinscJaheira_CFM_Reunion_90334c42-bda7-4717-b3d5-12486cc82de7, "SLUMS");
DB_CampNight_Camp((FLAG)CAMP_MinscJaheira_CFM_Reunion_90334c42-bda7-4717-b3d5-12486cc82de7, "ELFSONG");
DB_CampNight_Camp((FLAG)CAMP_MinscJaheira_CFM_Reunion_90334c42-bda7-4717-b3d5-12486cc82de7, "FARM");
DB_CampNight_CFM((FLAG)CAMP_MinscJaheira_CFM_Reunion_90334c42-bda7-4717-b3d5-12486cc82de7, (DIALOGRESOURCE)CAMP_MinscJaheiraReunion_CFM_15abe5e1-f33c-a3fd-beb2-f2ce1e9bc78a);
DB_CampNight_Requirement((FLAG)CAMP_MinscJaheira_CFM_Reunion_90334c42-bda7-4717-b3d5-12486cc82de7, (FLAG)MINSC_57698b42-b815-49a1-8c51-100da1b4b9ee, (FLAG)JAHEIRA_8b7fd8c6-4d49-4932-b525-7dda10cf4a1b);
DB_CampfireMoment_FixedSpeakers((DIALOGRESOURCE)CAMP_MinscJaheiraReunion_CFM_15abe5e1-f33c-a3fd-beb2-f2ce1e9bc78a, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba);


//REGION Camp Nights - Gale

DB_CampNight((FLAG)NIGHT_Gale_BeMyGod_2259ec28-b538-4895-a431-30dc7e2ddf66, 4180);
DB_CampNight_Camp((FLAG)NIGHT_Gale_BeMyGod_2259ec28-b538-4895-a431-30dc7e2ddf66, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Gale_BeMyGod_2259ec28-b538-4895-a431-30dc7e2ddf66, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Gale_BeMyGod_2259ec28-b538-4895-a431-30dc7e2ddf66, "ELFSONG");
DB_CampNight_Requirement((FLAG)NIGHT_Gale_BeMyGod_2259ec28-b538-4895-a431-30dc7e2ddf66, (FLAG)ORI_Gale_Knows_ReadKarsusNotes_2b0e541f-f49e-7e82-27d6-15fccd6ff1ff, (FLAG)GALECOMPANION_53fe9349-fc4e-433f-8701-e0aabb414906);
DB_CampNight_Requirement_Partner((FLAG)NIGHT_Gale_BeMyGod_2259ec28-b538-4895-a431-30dc7e2ddf66, (CHARACTER)S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604);
DB_CampNight_CRD((FLAG)NIGHT_Gale_BeMyGod_2259ec28-b538-4895-a431-30dc7e2ddf66, (CHARACTER)S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, (DIALOGRESOURCE)CAMP_Gale_CRD_BeMyGod_df11dcbe-6478-06f8-efe6-f763ee87d5c4,(FLAG)NULL_00000000-0000-0000-0000-000000000000);

DB_CampNight((FLAG)NIGHT_Gale_AvatarCrownOfKarsus_35e2c6cc-a439-4091-8489-a74123a14d63, 6050);
DB_CampNight_Camp((FLAG)NIGHT_Gale_AvatarCrownOfKarsus_35e2c6cc-a439-4091-8489-a74123a14d63, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Gale_AvatarCrownOfKarsus_35e2c6cc-a439-4091-8489-a74123a14d63, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Gale_AvatarCrownOfKarsus_35e2c6cc-a439-4091-8489-a74123a14d63, "ELFSONG");
DB_CampNight_CancelledBy((FLAG)NIGHT_Gale_AvatarCrownOfKarsus_35e2c6cc-a439-4091-8489-a74123a14d63, (FLAG)ORI_Gale_State_SentToFindBook_223470bc-af59-c833-500a-ace86e5cc1df);
DB_CampNight_CancelledBy((FLAG)NIGHT_Gale_AvatarCrownOfKarsus_35e2c6cc-a439-4091-8489-a74123a14d63, (FLAG)ORI_Gale_Knows_ReadKarsusNotes_2b0e541f-f49e-7e82-27d6-15fccd6ff1ff);
DB_CampNight_CancelledBy((FLAG)NIGHT_Gale_AvatarCrownOfKarsus_35e2c6cc-a439-4091-8489-a74123a14d63, (FLAG)NIGHT_Gale_KnowCrownOfKarsus_3e9c6c70-b056-45a4-864b-a49e43eb5a2d);
DB_CampNight_Requirement((FLAG)NIGHT_Gale_AvatarCrownOfKarsus_35e2c6cc-a439-4091-8489-a74123a14d63, (FLAG)GALEAVATAR_e8043a21-c6e3-4d6d-802b-2a87abea044c);
DB_CampNight_SoloDream((FLAG)NIGHT_Gale_AvatarCrownOfKarsus_35e2c6cc-a439-4091-8489-a74123a14d63, (CHARACTER)S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, (DIALOGRESOURCE)CAMP_Gale_SD_CrownOfKarsus_893b84b3-5a4c-0ebf-2569-c12dd47ba492);

DB_CampNight((FLAG)NIGHT_Gale_KnowCrownOfKarsus_3e9c6c70-b056-45a4-864b-a49e43eb5a2d, 6080);
DB_CampNight_Camp((FLAG)NIGHT_Gale_KnowCrownOfKarsus_3e9c6c70-b056-45a4-864b-a49e43eb5a2d, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Gale_KnowCrownOfKarsus_3e9c6c70-b056-45a4-864b-a49e43eb5a2d, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Gale_KnowCrownOfKarsus_3e9c6c70-b056-45a4-864b-a49e43eb5a2d, "ELFSONG");
DB_CampNight_Requirement((FLAG)NIGHT_Gale_KnowCrownOfKarsus_3e9c6c70-b056-45a4-864b-a49e43eb5a2d, (FLAG)ORI_Gale_Knows_BrainHasCrownOfKarsus_e456f90c-13ac-4f79-b7b1-e21db1800fe4, (FLAG)GALEAVATAR_e8043a21-c6e3-4d6d-802b-2a87abea044c);
DB_CampNight_SoloDream(NIGHT_Gale_KnowCrownOfKarsus_3e9c6c70-b056-45a4-864b-a49e43eb5a2d, (CHARACTER)S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, (DIALOGRESOURCE)CAMP_Gale_SD_KnowCrownKarsus_1ca46a97-7be9-0c5d-d0d9-5e8cae97b949);


DB_CampNight((FLAG)NIGHT_Gale_HasKarsusNotes_f9259b80-0a76-48cc-b8e9-ae4fcb1b827d, 4200);
DB_CampNight_Camp((FLAG)NIGHT_Gale_HasKarsusNotes_f9259b80-0a76-48cc-b8e9-ae4fcb1b827d, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Gale_HasKarsusNotes_f9259b80-0a76-48cc-b8e9-ae4fcb1b827d, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Gale_HasKarsusNotes_f9259b80-0a76-48cc-b8e9-ae4fcb1b827d, "ELFSONG");
DB_CampNight_Requirement((FLAG)NIGHT_Gale_HasKarsusNotes_f9259b80-0a76-48cc-b8e9-ae4fcb1b827d, (FLAG)ORI_Gale_State_HasKarsusNotes_NightRequirement_3b1c8482-253b-47e6-998b-0551da43272b, (FLAG)GALECOMPANION_53fe9349-fc4e-433f-8701-e0aabb414906);
DB_CampNight_CRD((FLAG)NIGHT_Gale_HasKarsusNotes_f9259b80-0a76-48cc-b8e9-ae4fcb1b827d, (CHARACTER)S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, (DIALOGRESOURCE)Gale_InParty2_6beb1b10-845f-49fa-6d6d-f425eaa42574,(FLAG)ORI_Gale_IPRD_HasKarsusNotes_9e7fb0cb-1ea5-23fa-9850-31422f42f0da);

DB_CampNight((FLAG)NIGHT_Gale_BrainHasCrownOfKarsus_FromRaphael_91ee6123-9e14-4b61-b099-94e41b3c502b, 4205);
DB_CampNight_Camp((FLAG)NIGHT_Gale_BrainHasCrownOfKarsus_FromRaphael_91ee6123-9e14-4b61-b099-94e41b3c502b, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Gale_BrainHasCrownOfKarsus_FromRaphael_91ee6123-9e14-4b61-b099-94e41b3c502b, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Gale_BrainHasCrownOfKarsus_FromRaphael_91ee6123-9e14-4b61-b099-94e41b3c502b, "ELFSONG");
DB_CampNight_Requirement((FLAG)NIGHT_Gale_BrainHasCrownOfKarsus_FromRaphael_91ee6123-9e14-4b61-b099-94e41b3c502b, (FLAG)GALECOMPANION_53fe9349-fc4e-433f-8701-e0aabb414906, ORI_Gale_Knows_BrainHasCrownOfKarsus_FromRaphael_4451456b-6f9b-7de2-9fae-68fc5a86f9d9);
DB_CampNight_CancelledBy((FLAG)NIGHT_Gale_BrainHasCrownOfKarsus_FromRaphael_91ee6123-9e14-4b61-b099-94e41b3c502b, (FLAG)NIGHT_Gale_SignedContract_bf86bdc1-2ce5-489a-bf36-1344806e4c54); 
DB_CampNight_CancelledBy((FLAG)NIGHT_Gale_BrainHasCrownOfKarsus_FromRaphael_91ee6123-9e14-4b61-b099-94e41b3c502b, (FLAG)ORI_Gale_State_DiscussedLearnedCrownFromRaphael_6aa1cd78-e408-3aef-b055-a735e5bc90db); 
DB_CampNight_CancelledBy((FLAG)NIGHT_Gale_BrainHasCrownOfKarsus_FromRaphael_91ee6123-9e14-4b61-b099-94e41b3c502b, (FLAG)ORI_Gale_Knows_ReadKarsusNotes_2b0e541f-f49e-7e82-27d6-15fccd6ff1ff);//Minor mismatch with in-world conditions, but in this case it's a rather minor dialogue that we can miss.
DB_CampNight_CRD((FLAG)NIGHT_Gale_BrainHasCrownOfKarsus_FromRaphael_91ee6123-9e14-4b61-b099-94e41b3c502b, (CHARACTER)S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, (DIALOGRESOURCE)Gale_InParty2_6beb1b10-845f-49fa-6d6d-f425eaa42574, (FLAG)ORI_Gale_IPRD_BrainHasCrownOfKarsus_FromRaphael_0de0d760-e60f-8cab-6b0d-66c2ad67c638);

DB_CampNight((FLAG)NIGHT_Gale_SignedContract_bf86bdc1-2ce5-489a-bf36-1344806e4c54, 4210);
DB_CampNight_Camp((FLAG)NIGHT_Gale_SignedContract_bf86bdc1-2ce5-489a-bf36-1344806e4c54, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Gale_SignedContract_bf86bdc1-2ce5-489a-bf36-1344806e4c54, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Gale_SignedContract_bf86bdc1-2ce5-489a-bf36-1344806e4c54, "ELFSONG");
DB_CampNight_Requirement((FLAG)NIGHT_Gale_SignedContract_bf86bdc1-2ce5-489a-bf36-1344806e4c54, (FLAG)GALECOMPANION_53fe9349-fc4e-433f-8701-e0aabb414906, (FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc, (FLAG)ORI_Gale_Knows_ReadKarsusNotes_2b0e541f-f49e-7e82-27d6-15fccd6ff1ff);
DB_CampNight_CancelledBy(NIGHT_Gale_SignedContract_bf86bdc1-2ce5-489a-bf36-1344806e4c54, (FLAG)HoH_Warlock_State_ContractDestroyed_528a9080-f162-4a8c-bcc7-120db8fbd63f);
DB_CampNight_CancelledBy(NIGHT_Gale_SignedContract_bf86bdc1-2ce5-489a-bf36-1344806e4c54, (FLAG)ORI_Gale_State_ComplainedContract_6b53fe80-58bd-9f22-d75c-e4b98e7388f8);
DB_CampNight_CRD((FLAG)NIGHT_Gale_SignedContract_bf86bdc1-2ce5-489a-bf36-1344806e4c54, (CHARACTER)S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, (DIALOGRESOURCE)Gale_InParty2_6beb1b10-845f-49fa-6d6d-f425eaa42574, (FLAG)ORI_Gale_IPRD_SignedContract_bdc786ed-fa49-abf3-407e-b94bfab30b3c);



//END_REGION

//REGION Camp Night Definitions - Halsin
DB_CampNight((FLAG)NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc, 4120);
DB_CampNight_Camp((FLAG)NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc, "ELFSONG");
DB_CampNight_Requirement((FLAG)NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc, (FLAG)CAMP_Halsin2_Event_HalsinRomanceDebug_1b65ea78-f86f-41e7-97a6-9442bed9a6f7);
DB_CampNight_Requirement((FLAG)NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc, (FLAG)GLO_Halsin_State_FlirtedWithPlayer_7ddc1485-8f29-4116-878b-a875649c5eaf);
DB_CampNight_Requirement((FLAG)NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc, (FLAG)Halsin_InParty_Even_ToldPlayerHisAge_d7bf2e99-1715-0dba-3116-549a869a4202, (FLAG)CAMP_GoblinHuntCelebration_Halsin_BranchExhausted_33470590-ffa8-05b9-64b6-b268948e5d9a);
DB_CampNight_ExclusiveMoment((FLAG)NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc);
DB_CampNight_CRD((FLAG)NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc, (CHARACTER)S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323, (DIALOGRESOURCE)Camp_Act3_CRD_HalsinRomance_3afba522-6412-f0f7-770b-b71c0d9f6376,(FLAG)NULL_00000000-0000-0000-0000-000000000000);
DB_CampNight_RomanceNight((FLAG)NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc, (CHARACTER)S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323, (DIALOGRESOURCE)CAMP_HalsinRomanceAct3_SD_ROM_3d042271-f13a-fc4a-50b3-6f7e51f1b7ba,(FLAG)NULL_00000000-0000-0000-0000-000000000000);

DB_CampNight((FLAG)NIGHT_Halsin_Romance_Execution_a9634ef4-27ec-4a75-be9d-7c738d9768ed, 4240);
DB_CampNight_Camp((FLAG)NIGHT_Halsin_Romance_Execution_a9634ef4-27ec-4a75-be9d-7c738d9768ed, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Halsin_Romance_Execution_a9634ef4-27ec-4a75-be9d-7c738d9768ed, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Halsin_Romance_Execution_a9634ef4-27ec-4a75-be9d-7c738d9768ed, "ELFSONG");
DB_CampNight_Requirement((FLAG)NIGHT_Halsin_Romance_Execution_a9634ef4-27ec-4a75-be9d-7c738d9768ed, (FLAG)CAMP_Halsin_SexRequirement_67e75062-a7a1-0f42-80f3-1cc02ba36fa1);
DB_CampNight_Requirement((FLAG)NIGHT_Halsin_Romance_Execution_a9634ef4-27ec-4a75-be9d-7c738d9768ed, (FLAG)CAMP_Halsin_State_WaitForKarlachUpgraded_9e2e8aaa-dcb6-3541-8e51-dd23cdac16b0, (FLAG)GLO_ForgingOfTheHeart_State_KarlachSecondUpgrade_f6dc0de4-1089-43c0-b392-306a9a44387c);
DB_CampNight_CancelledBy((FLAG)NIGHT_Halsin_Romance_Execution_a9634ef4-27ec-4a75-be9d-7c738d9768ed, (FLAG)GLO_Halsin_HadSex_e2bc2484-d8f9-4e8e-8138-d0247895e50a);
DB_CampNight_Requirement_Partner((FLAG)NIGHT_Halsin_Romance_Execution_a9634ef4-27ec-4a75-be9d-7c738d9768ed,(CHARACTER)S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323);
DB_CampNight_ExpiresAfter((FLAG)NIGHT_Halsin_Romance_Execution_a9634ef4-27ec-4a75-be9d-7c738d9768ed,2);
DB_CampNight_RomanceNight((FLAG)NIGHT_Halsin_Romance_Execution_a9634ef4-27ec-4a75-be9d-7c738d9768ed, (CHARACTER)S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323, (DIALOGRESOURCE)CAMP_HalsinRomanceAct3_SD_ROM_3d042271-f13a-fc4a-50b3-6f7e51f1b7ba,(FLAG)NULL_00000000-0000-0000-0000-000000000000);

//END_REGION

//REGION Camp Night Definitions - Karlach
// Need to make After Defeating Gortash IPRD a CRD too.
DB_CampNight((FLAG)NIGHT_Karlach_AfterDefeatingGortash_b8e239e4-e73e-433e-9550-e4a56bdbffd1, 5500);
DB_CampNight_Camp((FLAG)NIGHT_Karlach_AfterDefeatingGortash_b8e239e4-e73e-433e-9550-e4a56bdbffd1, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Karlach_AfterDefeatingGortash_b8e239e4-e73e-433e-9550-e4a56bdbffd1, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Karlach_AfterDefeatingGortash_b8e239e4-e73e-433e-9550-e4a56bdbffd1, "ELFSONG");
DB_CampNight_Requirement((FLAG)NIGHT_Karlach_AfterDefeatingGortash_b8e239e4-e73e-433e-9550-e4a56bdbffd1, (FLAG)WYR_GortashConfrontation_Event_SendKarlachToCamp_7a52ef44-835d-4af9-0388-cdd1036a09ed);
DB_CampNight_CancelledBy((FLAG)NIGHT_Karlach_AfterDefeatingGortash_b8e239e4-e73e-433e-9550-e4a56bdbffd1, (FLAG)ORI_Karlach_Event_ClearAfterGortashDefeatCRDAndIPRD_bbc8076f-bdd6-f53a-d9c3-3cfd87df1baf);
DB_CampNight_CRD((FLAG)NIGHT_Karlach_AfterDefeatingGortash_b8e239e4-e73e-433e-9550-e4a56bdbffd1, (CHARACTER)S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, (DIALOGRESOURCE)Karlach_InParty_12459660-b66e-9b0b-9963-670e0993543d, (FLAG)ORI_Karlach_IPRD_AfterDefeatingGortash_585a4ee6-b04f-2559-2bc5-ae99a1f57ff2);
//END_REGION

//Dark Urge
DB_ORI_DarkUrge_SetupNights("Act3");

SetFlag(Act3_Visited_83f7a4a8-0a60-4be3-ab2a-38800f10750b);

//Ravengard
DB_GLO_CompoundFlag(CAMP_Ravengard_Event_ToldAboutBalduran_a16ce8d1-e40d-fa3f-6aad-5a7b692c02a3,CAMP_Ravengard_State_Dejected_ca0cb55f-d5b7-4e13-a28a-27bbc6522229);
DB_GLO_CompoundFlag(CAMP_Ravengard_State_KnowsFlorrickDead_0dfac2ac-29b0-8b44-c0a8-c81e487ef757,CAMP_Ravengard_State_Dejected_ca0cb55f-d5b7-4e13-a28a-27bbc6522229);
KBSECTION
//REGION Zevlor's Appeal
IF
TextEvent("CAMP_ZevlorsAppeal_Die")
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Items(_Body, "Body", _ActiveCamp)
THEN
ApplyStatus(_Body, "ANIM_OVERRIDE_ZEVLOR_DEAD_01", -1.0);
PROC_DieImmediate((CHARACTER)_Body, DEATHTYPE.Physical, 0);

// Zevlor was still alive but was not saved from Colony
PROC
PROC_CFM_ZevlorsAppeal_Requirement()
AND
NOT DB_PermaDefeated(S_DEN_TieflingLeader_475200ee-cc3c-4dbe-84b1-1820c02ea26a)
AND
NOT DB_GlobalFlag(COL_TadpolingCentre_Event_ReleasePods_3e81dc65-eb2d-86aa-5163-28450894f868)
THEN
SetFlag((FLAG)WYR_ZevlorsAppeal_OrinKilledZevlor_a4661a74-a68d-4471-a5b8-2310eb5b39e0);

// Load the CLT once the correct CFM is queued
// Set items on stage to prevent broken items
PROC
PROC_CampNight_StartSelected()
AND
DB_Camp_QueuedNight((FLAG)NIGHT_TieflingLeadersAppeal_bdb84e42-99b9-45cb-901e-98d5e54b4f04)
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_CLT(_LevelTemplate, _ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Items(_Body, "Body", _ActiveCamp)
THEN
LoadLevelTemplate(_LevelTemplate);
DB_CampfireMoment_FixedSpeakers((DIALOGRESOURCE)CAMP_ZevlorsAppeal_CFM_230033cc-40b6-4938-b3fd-291322f45ac4, _Body);
DB_CFM_ZevlorsAppeal_LoadedCLT(_LevelTemplate);
DB_GLO_CharacterCorpseDialog((CHARACTER)_Body, (DIALOGRESOURCE)CAMP_ZevlorsAppeal_SWD_c2a9c84d-9c16-d096-3c7f-5d2f35919080);
PROC_CFM_ZevlorsAppeal_LoadLetter(_ActiveCamp);
PROC_CFM_ZevlorsAppeal_CheckIfBodyExists();

// Put the correct letter on stage, and offstage the other.
PROC
PROC_CFM_ZevlorsAppeal_LoadLetter((STRING)_ActiveCamp)
AND
DB_GlobalFlag((FLAG)WYR_OrinsImpersonation_State_MetOrinOnce_5f82392a-6e8f-4c9b-a927-b9d77ee263ec)
AND
DB_CFM_ZevlorsAppeal_Letters(_LetterMetOrin, "MetOrin", _ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Letters(_LetterNotMetOrin, "NotMetOrin", _ActiveCamp)
THEN
DB_CFM_ZevlorsAppeal_Letter_OnStage(_LetterMetOrin, 1);
DB_CFM_ZevlorsAppeal_Items(_LetterMetOrin, "Letter", _ActiveCamp);
DB_CFM_ZevlorsAppeal_Letter_OnStage(_LetterNotMetOrin, 0);

PROC
PROC_CFM_ZevlorsAppeal_LoadLetter((STRING)_ActiveCamp)
AND
NOT DB_GlobalFlag((FLAG)WYR_OrinsImpersonation_State_MetOrinOnce_5f82392a-6e8f-4c9b-a927-b9d77ee263ec)
AND
DB_CFM_ZevlorsAppeal_Letters(_LetterMetOrin, "MetOrin", _ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Letters(_LetterNotMetOrin, "NotMetOrin", _ActiveCamp)
THEN
DB_CFM_ZevlorsAppeal_Letter_OnStage(_LetterNotMetOrin, 1);
DB_CFM_ZevlorsAppeal_Items(_LetterNotMetOrin, "Letter", _ActiveCamp);
DB_CFM_ZevlorsAppeal_Letter_OnStage(_LetterMetOrin, 0);

// Set letter on or off stage by DB_CFM_ZevlorsAppeal_Letter_OnStage
IF
EnteredLevel(_Letter, _, _)
AND
DB_CFM_ZevlorsAppeal_Letter_OnStage(_Letter, _SetOnStage)
THEN
PROC_SetOnStage(_Letter, _SetOnStage);
NOT DB_CFM_ZevlorsAppeal_Letter_OnStage(_Letter, _SetOnStage);

// Keep track of when the CFM is supposed to play
PROC
PROC_CampfireMoment_Failed((DIALOGRESOURCE)CAMP_ZevlorsAppeal_FAKE_CFM_ffffffff-40b6-4938-b3fd-291322f45ac4)
THEN
DB_CAMP_ZevlorsAppeal_CFMLoaded(1);

// Keep track of when the body of Zevlor is loaded in
IF
EnteredLevel(_Body, _, _)
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Items(_Body, "Body", _ActiveCamp)
THEN
ApplyStatus(_Body, "ANIM_OVERRIDE_ZEVLOR_DEAD_01", -1.0);
PROC_DieImmediate((CHARACTER)_Body, DEATHTYPE.Physical, 0);

IF
Died(_Body)
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Items(_Body, "Body", _ActiveCamp)
THEN
DB_CAMP_ZevlorsAppeal_BodyLoaded(1);

// After reloading story, EnteredLevel will not happen for the body, so we pre-emptively check if it already exists
PROC
PROC_CFM_ZevlorsAppeal_CheckIfBodyExists()
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Items(_ZevlorBody, "Body", _ActiveCamp)
AND
Exists(_ZevlorBody, 1)
THEN
DB_CAMP_ZevlorsAppeal_BodyLoaded(1);

// Once the body is loaded in and the fake CFM has failed, start the real CFM
IF
DB_CAMP_ZevlorsAppeal_BodyLoaded(1)
AND
DB_CAMP_ZevlorsAppeal_CFMLoaded(1)
THEN
PROC_CampfireMoment_Dialog((DIALOGRESOURCE)CAMP_ZevlorsAppeal_CFM_230033cc-40b6-4938-b3fd-291322f45ac4);

// Clean up CFM and prevent error message from showing after failed CFM
IF
DialogEnded((DIALOGRESOURCE)CAMP_ZevlorsAppeal_CFM_230033cc-40b6-4938-b3fd-291322f45ac4, _)
THEN
PROC_CampfireMoment_ClearCampfireMoment(CAMP_ZevlorsAppeal_CFM_230033cc-40b6-4938-b3fd-291322f45ac4);
DB_CampNight_Completed(NIGHT_TieflingLeadersAppeal_bdb84e42-99b9-45cb-901e-98d5e54b4f04);

IF
DialogActorLeft((DIALOGRESOURCE)CAMP_ZevlorsAppeal_CFM_230033cc-40b6-4938-b3fd-291322f45ac4, _, _Player, 1)
AND
DB_Players((CHARACTER)_Player)
AND
QRY_OnlyOnce("CAMP_ZevlorsAppeal_MoveAndOpenLetter")
THEN
PROC_CAMP_ZevlorsAppeal_MoveAndOpenLetter(_Player);

// move + open Orin's note and start topical greeting to discuss the CFM
PROC
PROC_CAMP_ZevlorsAppeal_MoveAndOpenLetter((CHARACTER)_Player)
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Items(_Letter, "Letter", _ActiveCamp)
THEN
ToInventory((ITEM)_Letter, _Player, 1, 1, 1);
Use(_Player, _Letter, "");
SetFlag((FLAG)TG_CAMP_ZevlorsAppeal_FoundZevlor_98e2ae69-addf-4d1e-b5d2-b0eca058c1f0, _Player);

// Move player to the CFM location
IF
DialogActorJoined((DIALOGRESOURCE)CAMP_ZevlorsAppeal_CFM_230033cc-40b6-4938-b3fd-291322f45ac4, _, _Player, _)
AND
DB_Players((CHARACTER)_Player)
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Items(_Trigger, "SpawnTrigger", _ActiveCamp)
THEN
TeleportTo(_Player, _Trigger);

PROC
PROC_CAMP_LastPlayerLeftCamp()
AND
DB_CFM_ZevlorsAppeal_LoadedCLT(_LevelTemplate)
THEN
PROC_CFM_ZevlorsAppeal_Cleanup();
NOT DB_CFM_ZevlorsAppeal_LoadedCLT(_LevelTemplate);

PROC
PROC_CFM_ZevlorsAppeal_Cleanup()
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Items(_Trigger, "CleanupTrigger", _ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Items(_Item, _ItemType, _ActiveCamp)
AND
_ItemType != "CleanupTrigger"
AND
IsInTrigger(_Item, (TRIGGER)_Trigger, 1)
THEN
PROC_SetOnStage((ITEM)_Item, 0);

PROC
PROC_CFM_ZevlorsAppeal_Cleanup()
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Items(_Trigger, "CleanupTrigger", _ActiveCamp)
THEN
RemoveSurfaceLayer(_Trigger, "Ground", 5.0);

PROC
PROC_CFM_ZevlorsAppeal_Cleanup()
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_CFM_ZevlorsAppeal_Items(_Trigger, "CleanupTrigger", _ActiveCamp)
THEN
PROC_SetOnStage((ITEM)_Trigger, 0);

PROC
PROC_CFM_ZevlorsAppeal_Cleanup()
THEN
NOT DB_CAMP_ZevlorsAppeal_CFMLoaded(1);
NOT DB_CAMP_ZevlorsAppeal_BodyLoaded(1);
//END_REGION

//REGION Halsin Camp Night specific code
IF
TextEvent("HalsinRomance")
AND
GetHostCharacter(_Player)
THEN
PROC_GlobalSetFlagAndCache(HALSINCOMPANION_a1d47bf2-67a1-4144-ae6b-d206e28364ce);
PROC_GlobalSetFlagAndCache(CAMP_Halsin2_Event_HalsinRomanceDebug_1b65ea78-f86f-41e7-97a6-9442bed9a6f7);
PROC_GlobalSetFlagAndCache(HAV_LiftingTheCurse_Event_HalsinClosesPortal_33aa334a-3127-4be1-ad94-518aa4f24ef4);
SetFlag(CAMP_Halsin2_Event_FlirtedWitHalsinInSCL_1521059b-2dfb-12da-7b9a-bd1cd968670c, _Player);
PROC_CAMPDEBUG_QueueNight(NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc, 0);

IF
DialogStarted((DIALOGRESOURCE)CAMP_HalsinRomanceAct3_SD_ROM_3d042271-f13a-fc4a-50b3-6f7e51f1b7ba,_)
THEN
SetFlag((FLAG)GLO_Halsin_HadSex_e2bc2484-d8f9-4e8e-8138-d0247895e50a);

IF
FlagSet((FLAG)CAMP_Halsin_CRD_Romance_CheckWithExistingPartner_b523a2ba-8abf-4116-a5c1-636c77920ca3,_Partner,_)
THEN
DB_GLO_Halsin_LimitedTimeToTalkToPartner(2,_Partner);

PROC
PROC_LongRest()
AND
DB_GLO_Halsin_LimitedTimeToTalkToPartner(_Nights,_Partner)
AND
IntegerSubtract(_Nights,1,_NewNights)
THEN
NOT DB_GLO_Halsin_LimitedTimeToTalkToPartner(_Nights,_Partner);
DB_GLO_Halsin_LimitedTimeToTalkToPartner(_NewNights,_Partner);

IF
DB_GLO_Halsin_LimitedTimeToTalkToPartner(0,_Partner)
THEN
NOT DB_GLO_Halsin_LimitedTimeToTalkToPartner(0,_Partner);
ClearFlag((FLAG)CAMP_Halsin_CRD_Romance_CheckWithExistingPartner_b523a2ba-8abf-4116-a5c1-636c77920ca3,_Partner,0);

IF
FlagSet((FLAG)CAMP_Halsin_State_WaitForKarlachUpgraded_9e2e8aaa-dcb6-3541-8e51-dd23cdac16b0, _, _)
THEN
NOT DB_CampNight_RomanceNight((FLAG)NIGHT_Halsin_Romance_Suggestion_28195bc6-aa96-4d3d-bcb1-c89e692574bc, (CHARACTER)S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323, (DIALOGRESOURCE)CAMP_HalsinRomanceAct3_SD_ROM_3d042271-f13a-fc4a-50b3-6f7e51f1b7ba,(FLAG)NULL_00000000-0000-0000-0000-000000000000);
NOT DB_CampNight_ExpiresAfter((FLAG)NIGHT_Halsin_Romance_Execution_a9634ef4-27ec-4a75-be9d-7c738d9768ed, 2); // Remove expiration date if Halsin is waiting for Karlach to get fixed.
//END_REGION

//REGION Dark Urge

IF
DB_ORI_DarkUrge((CHARACTER)_DarkUrge)
AND
DB_ORI_DarkUrge_SetupNights("Act3")
THEN
DB_CampNight((FLAG)NIGHT_DarkUrge_SkippedTempleFinale_aa87947e-9ae0-4a2d-a3ed-fb2c9ca6be5c, 6100);
DB_CampNight_Camp((FLAG)NIGHT_DarkUrge_SkippedTempleFinale_aa87947e-9ae0-4a2d-a3ed-fb2c9ca6be5c, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_DarkUrge_SkippedTempleFinale_aa87947e-9ae0-4a2d-a3ed-fb2c9ca6be5c, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_DarkUrge_SkippedTempleFinale_aa87947e-9ae0-4a2d-a3ed-fb2c9ca6be5c, "ELFSONG");
DB_CampNight_Requirement((FLAG)NIGHT_DarkUrge_SkippedTempleFinale_aa87947e-9ae0-4a2d-a3ed-fb2c9ca6be5c, (FLAG)DARKURGE_68888003-acaa-49d5-b4f2-0c6293797e59, ORI_DarkUrge_State_MissedTempleFinale_640cb288-0b40-434a-b13c-0c871d931bcc);
DB_CampNight_SoloDream((FLAG)NIGHT_DarkUrge_SkippedTempleFinale_aa87947e-9ae0-4a2d-a3ed-fb2c9ca6be5c,(CHARACTER)_DarkUrge,(DIALOGRESOURCE)CAMP_DarkUrge_SkippedTempleFinale_SD_8b5bb777-741d-401b-23bb-106ca61b2d59);
DB_Camp_DarkUrge_ButlerDream((DIALOGRESOURCE)CAMP_DarkUrge_SkippedTempleFinale_SD_8b5bb777-741d-401b-23bb-106ca61b2d59);


DB_CampNight((FLAG)NIGHT_DarkUrge_Bloodwedding_2fc626ed-db4c-4cc6-a742-0a653a2fe51f, 6120);
DB_CampNight_Camp((FLAG)NIGHT_DarkUrge_Bloodwedding_2fc626ed-db4c-4cc6-a742-0a653a2fe51f, "FARM");
DB_CampNight_ExclusiveMoment((FLAG)NIGHT_DarkUrge_Bloodwedding_2fc626ed-db4c-4cc6-a742-0a653a2fe51f);
DB_CampNight_CancelledBy((FLAG)NIGHT_DarkUrge_Bloodwedding_2fc626ed-db4c-4cc6-a742-0a653a2fe51f, (FLAG)ORI_DarkUrge_State_BloodWeddingFallback_9b4bcdba-adbe-c189-8bb5-08bcdbb15eaf);
DB_CampNight_Requirement((FLAG)NIGHT_DarkUrge_Bloodwedding_2fc626ed-db4c-4cc6-a742-0a653a2fe51f, (FLAG)DARKURGE_68888003-acaa-49d5-b4f2-0c6293797e59);
//DB_CampNight_MorningCFM((FLAG)NIGHT_DarkUrge_Bloodwedding_2fc626ed-db4c-4cc6-a742-0a653a2fe51f, (DIALOGRESOURCE)CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67);
DB_CampNight_SoloDream((FLAG)NIGHT_DarkUrge_Bloodwedding_2fc626ed-db4c-4cc6-a742-0a653a2fe51f, (CHARACTER)_DarkUrge, (DIALOGRESOURCE)CAMP_DarkUrge_Bloodwedding_SD_e0a79044-1745-8d6c-99f2-21a7226e7fa8);

DB_CampNight((FLAG)NIGHT_DarkUrge_BloodWeddingFollowup_993943d4-8774-41b4-8875-94b4600ad232, 6110);
DB_CampNight_Camp((FLAG)NIGHT_DarkUrge_BloodWeddingFollowup_993943d4-8774-41b4-8875-94b4600ad232, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_DarkUrge_BloodWeddingFollowup_993943d4-8774-41b4-8875-94b4600ad232, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_DarkUrge_BloodWeddingFollowup_993943d4-8774-41b4-8875-94b4600ad232, "ELFSONG");
DB_CampNight_Cancels((FLAG)NIGHT_DarkUrge_BloodWeddingFollowup_993943d4-8774-41b4-8875-94b4600ad232, (FLAG)NIGHT_DarkUrge_Bloodwedding_2fc626ed-db4c-4cc6-a742-0a653a2fe51f);
DB_CampNight_Requirement((FLAG)NIGHT_DarkUrge_BloodWeddingFollowup_993943d4-8774-41b4-8875-94b4600ad232, (FLAG)ORI_DarkUrge_State_BloodWeddingFallback_9b4bcdba-adbe-c189-8bb5-08bcdbb15eaf, (FLAG)NIGHT_DarkUrge_BloodWeddingFollowup_Requirement_6a4360d8-913b-41c6-a56a-c476ee276186, (FLAG)DARKURGE_68888003-acaa-49d5-b4f2-0c6293797e59, (FLAG)JAHEIRA_8b7fd8c6-4d49-4932-b525-7dda10cf4a1b);
DB_CampNight_SoloDream((FLAG)NIGHT_DarkUrge_BloodWeddingFollowup_993943d4-8774-41b4-8875-94b4600ad232, _DarkUrge, CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67);

QRY
QRY_CampNight_PreventEndNightForPlayer(CAMP_DarkUrge_Bloodwedding_SD_e0a79044-1745-8d6c-99f2-21a7226e7fa8, _, _DarkUrge)
AND
DB_InCamp((CHARACTER)S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a)
AND
DB_InCamp((CHARACTER)S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba)
AND
NOT QRY_PreventMPDialogue(_DarkUrge, (CHARACTER)S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a)
AND
NOT QRY_PreventMPDialogue(_DarkUrge, (CHARACTER)S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67, _DarkUrge, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba)
THEN
DB_NOOP(1);


QRY
QRY_CampNight_PreventEndNightForPlayer(CAMP_DarkUrge_Bloodwedding_SD_e0a79044-1745-8d6c-99f2-21a7226e7fa8, _, _DarkUrge)
AND
DB_InCamp((CHARACTER)S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a)
AND
NOT QRY_PreventMPDialogue(_DarkUrge, (CHARACTER)S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)CAMP_DarkUrge_CFM_BloodweddingFollowup_2111a7a8-1f57-4e72-f518-acdaaddc0a67, _DarkUrge, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a)
THEN
DB_NOOP(1);

//END_REGION

//REGION Circus Statue
// pedestal
IF
DB_ActiveCamp(_ActiveCamp)
AND
NOT DB_WYR_Circus_StatueSentToCamp(_)
AND
DB_WYR_Circus_Statue_CampPosTriggers(_ActiveCamp, _, _Pedestal)
AND
NOT DB_OffStage(_Pedestal)
THEN
PROC_SetOnStage(_Pedestal, 0);

IF
DB_ActiveCamp(_ActiveCamp)
AND
DB_WYR_Circus_StatueSentToCamp(_)
AND
DB_WYR_Circus_Statue_CampPosTriggers(_ActiveCamp, _, _Pedestal)
AND
DB_OffStage(_Pedestal)
THEN
PROC_SetOnStage(_Pedestal, 1);

QRY
QRY_CAMP_VanityArmour_BlockAutoChangeAtNightForCamper(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309)
AND
NOT DB_GlobalFlag(WYR_Circus_Sculptor_Event_RequestedVanity_0333cb3a-07c2-4fa7-a40c-46d4353b5659)
THEN
DB_NOOP(1);

PROC
PROC_LongRest()
AND
DB_WYR_Circus_StatueSentToCamp(_Player)
AND
DB_PartOfTheTeam(_Player)
AND
NOT DB_PermaDefeated(_Player)
THEN
ApplyStatus(_Player, "WYR_CIRCUS_STATUEBLESS", -1.0, 0, (CHARACTER)S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309);

QRY
QRY_Camp_DoNotHideCamper((CHARACTER)S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309)
THEN
DB_NOOP(1);
//END_REGION
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "Act3_GEN"
