Version 1
SubGoalCombiner SGC_AND
INITSECTION
//REGION Misc
DB_PreventKnockedOutPermaDefeated((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
//END_REGION

//REGION Journal Helpers
DB_QuestDef_State_CompanionLeft((TAG)REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, "ORI_COM_Laezel", "LeftInSCL");
DB_QuestDef_State_CompanionLeft((TAG)REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, "ORI_COM_Laezel", "TurnedHostileAtChokepoint");
DB_QuestDef_State_CompanionLeft((TAG)REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, "ORI_COM_Laezel", "TurnedHostileDuringInquisitor");
DB_QuestDef_State_CompanionLeft((TAG)REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, "ORI_COM_Laezel", "TurnedHostile_MorphicPool_OrpheusPath");
DB_QuestDef_State_CompanionLeft((TAG)REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, "ORI_COM_Laezel", "TurnedHostile_MorphicPool_VlaakithPath");

// - 1900 - ORI_COM_Laezel_FindCrecheEntrance
DB_GLO_DefeatCounter(CRE_ChainOfCommand_GithGuardMonastery01_ce97afe6-1f6e-92d6-bdf6-2cf9665ee898, "ORI_Laezel_GithyankiAtGates");
DB_GLO_DefeatCounter(CRE_ChainOfCommand_GithGuardMonastery02_e84a4897-3d76-8c27-018f-bb9ae9f5e553, "ORI_Laezel_GithyankiAtGates");
DB_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_MarkingsDialogPlayed_437fd9d6-37ef-4dd3-b5e2-e21877045e2f, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96);

DB_GLO_DefeatCounter(S_CRE_MainCheckpointMainGuard_161701af-17b7-4def-b378-5f24e95d667f, "ORI_Laezel_UpperGuards_MainCheckpoint");
DB_GLO_DefeatCounter(S_CRE_MainCheckpointWarningGuard_a6c0d21e-ce59-4dbb-9f64-1ec80b95c838, "ORI_Laezel_UpperGuards_MainCheckpoint");
DB_GLO_DefeatCounter(S_CRE_CrecheGuard01_5a5c5878-fd9f-41c0-9c8c-b74cea0e3fd9, "ORI_Laezel_UpperGuards_MainCheckpoint");
DB_GLO_DefeatCounter(S_CRE_CrecheGuard02_99439816-fcaa-4167-a20a-8f3dfff4e345, "ORI_Laezel_UpperGuards_MainCheckpoint");
DB_GLO_DefeatCounter_AllDefeatedGlobalFlag("ORI_Laezel_UpperGuards_MainCheckpoint", (FLAG)CRE_UpperGuards_State_MainCheckpointAllDefeated_6071ad98-7d68-41ca-a0c4-797100d77c04); 

DB_GLO_DefeatCounter(S_CRE_HiddenCheckpointWarningGuard_970d10ed-8092-463b-8446-223fe4cf2d68, "ORI_Laezel_UpperGuards_HiddenCheckpoint");
DB_GLO_DefeatCounter(S_CRE_HiddenCheckpointMainGuard_3bcbf8fb-5a90-4439-bd81-d9113d74f27e, "ORI_Laezel_UpperGuards_HiddenCheckpoint");
DB_GLO_DefeatCounter_AllDefeatedGlobalFlag("ORI_Laezel_UpperGuards_HiddenCheckpoint", (FLAG)CRE_UpperGuards_State_HiddenCheckpointAllDefeated_76b1a59b-0749-4ae8-9ffa-53ee1653dba9); 

// - 5100 - ORI_COM_Laezel_DealWithOrpheus
DB_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_ShowedVossTheHammer_5588f6a2-bb8c-4f91-a152-168492b9c09f, (DIALOGRESOURCE)WYR_RaphaelTango_Voss_140953a8-5d79-c6d0-d691-52694b875bc2);

SetFlag((FLAG)ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578);

// - Subquest - Proceed without Creche
DB_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_CanProceedToAct3_64850ffe-e278-4742-91f2-3cecd77d1257, (DIALOGRESOURCE)GLO_Laezel_WRD_ProgressInAct2WithoutCreche_aa6fdbc8-6a7f-dd46-4a6f-366e36eeb4ab);


//Added a quest priority checking system for the Laezel quest, which allows control over whether quest updates should appear if their priority is lower than current priority

//Companion
DB_ORI_Laezel_QuestCurrentPriority("ORI_COM_Laezel", 0);

//DB_ORI_Laezel_QuestPriorityStepList((INTEGER)_Priority, (STRING)_ObjectiveID, (STRING)_StepID)
DB_ORI_Laezel_QuestPriorityStepList(1000, "ORI_COM_Laezel", "RecruitedLaezel_Beach");
DB_ORI_Laezel_QuestPriorityStepList(1100, "ORI_COM_Laezel", "FoundOutAboutZorru");
DB_ORI_Laezel_QuestPriorityStepList(1100, "ORI_COM_Laezel", "RecruitedLaezel_Cage");
DB_ORI_Laezel_QuestPriorityStepList(1200, "ORI_COM_Laezel", "AskedZevlorAboutZorru");
DB_ORI_Laezel_QuestPriorityStepList(1200, "ORI_COM_Laezel", "FoundZorruLZAbsent");
DB_ORI_Laezel_QuestPriorityStepList(1300, "ORI_COM_Laezel", "GotNoInfoFromZorru");
DB_ORI_Laezel_QuestPriorityStepList(1300, "ORI_COM_Laezel", "GotNoInfoFromZorruWithoutKnowingHim");
DB_ORI_Laezel_QuestPriorityStepList(1300, "ORI_COM_Laezel", "SawDragonRider");
DB_ORI_Laezel_QuestPriorityStepList(1300, "ORI_COM_Laezel", "ZorruDied");
DB_ORI_Laezel_QuestPriorityStepList(1300, "ORI_COM_Laezel", "ZorruLeft");
DB_ORI_Laezel_QuestPriorityStepList(1400, "ORI_COM_Laezel", "SawDragonRider_KnowsAboutGithyankiPatrol");
DB_ORI_Laezel_QuestPriorityStepList(1400, "ORI_COM_Laezel", "TalkedToDeadTiefling");
DB_ORI_Laezel_QuestPriorityStepList(1400, "ORI_COM_Laezel", "ZorruMarkedMap");
DB_ORI_Laezel_QuestPriorityStepList(1400, "ORI_COM_Laezel", "ZorruMarkedMapWithoutKnowingAboutHim");
DB_ORI_Laezel_QuestPriorityStepList(1450, "ORI_COM_Laezel", "LaezelRanToKnight");
DB_ORI_Laezel_QuestPriorityStepList(1500, "ORI_COM_Laezel", "ChokepointCombatStarted");
DB_ORI_Laezel_QuestPriorityStepList(1500, "ORI_COM_Laezel", "ResolvedPeaceNoCreche");
DB_ORI_Laezel_QuestPriorityStepList(1600, "ORI_COM_Laezel", "ChokepointDefeated");
DB_ORI_Laezel_QuestPriorityStepList(1600, "ORI_COM_Laezel", "RecruitedLaezel_Plains");
DB_ORI_Laezel_QuestPriorityStepList(1700, "ORI_COM_Laezel", "ReadCrecheMap");
DB_ORI_Laezel_QuestPriorityStepList(1700, "ORI_COM_Laezel", "RecruitedLaezel_PlainsAfterMap");
DB_ORI_Laezel_QuestPriorityStepList(1700, "ORI_COM_Laezel", "ResolvedPeaceCreche");
DB_ORI_Laezel_QuestPriorityStepList(1800, "ORI_COM_Laezel", "InCrecheRegionWIthHints");
DB_ORI_Laezel_QuestPriorityStepList(1800, "ORI_COM_Laezel", "LaezelLeftAtCreche");
DB_ORI_Laezel_QuestPriorityStepList(1850, "ORI_COM_Laezel", "FoundCrecheLocation_RegroupedWithLaezel");
DB_ORI_Laezel_QuestPriorityStepList(1900, "ORI_COM_Laezel", "FoundCrecheLocationNoHints");
DB_ORI_Laezel_QuestPriorityStepList(1900, "ORI_COM_Laezel", "FoundCrecheLocationWithHints");
DB_ORI_Laezel_QuestPriorityStepList(1900, "ORI_COM_Laezel", "KilledGithyankiAtGates_DoesNotKnowLocation");
DB_ORI_Laezel_QuestPriorityStepList(1900, "ORI_COM_Laezel", "KilledGithyankiAtGates_KnowsLocation");
DB_ORI_Laezel_QuestPriorityStepList(1900, "ORI_COM_Laezel", "RecruitedLaezel_Creche");
DB_ORI_Laezel_QuestPriorityStepList(1900, "ORI_COM_Laezel", "SawGithyankiAtGates");
DB_ORI_Laezel_QuestPriorityStepList(2000, "ORI_COM_Laezel", "AttackedByCheckpointGuardsInCreche");
DB_ORI_Laezel_QuestPriorityStepList(2000, "ORI_COM_Laezel", "EnteredCreche");
DB_ORI_Laezel_QuestPriorityStepList(2000, "ORI_COM_Laezel", "GainedAccess");
DB_ORI_Laezel_QuestPriorityStepList(2010, "ORI_COM_Laezel", "SentToInfirmary");
DB_ORI_Laezel_QuestPriorityStepList(2020, "ORI_COM_Laezel", "FoundInfirmary");
DB_ORI_Laezel_QuestPriorityStepList(2020, "ORI_COM_Laezel", "SpokeToDoctor_NotWaiting");
DB_ORI_Laezel_QuestPriorityStepList(2030, "ORI_COM_Laezel", "SpokeToDoctor_WaitingAtDevice");
DB_ORI_Laezel_QuestPriorityStepList(2030, "ORI_COM_Laezel", "DefeatedDoctor");
DB_ORI_Laezel_QuestPriorityStepList(2100, "ORI_COM_Laezel", "UsedDevice_LaezelUsedIt");
DB_ORI_Laezel_QuestPriorityStepList(2100, "ORI_COM_Laezel", "UsedDevice_PlayerRefusedLaezel");
DB_ORI_Laezel_QuestPriorityStepList(2100, "ORI_COM_Laezel", "UsedDevice_UsedWithoutLaezelAround");
DB_ORI_Laezel_QuestPriorityStepList(2200, "ORI_COM_Laezel", "ReportToInquisitior");
DB_ORI_Laezel_QuestPriorityStepList(2300, "ORI_COM_Laezel", "PermaDefeatInquisitor");
DB_ORI_Laezel_QuestPriorityStepList(2300, "ORI_COM_Laezel", "PermaDefeatInquisitor_NoDialog");
DB_ORI_Laezel_QuestPriorityStepList(2400, "ORI_COM_Laezel", "BackToInquisitor_InquisitorDead");
DB_ORI_Laezel_QuestPriorityStepList(2500, "ORI_COM_Laezel", "EnteredArtefact");
DB_ORI_Laezel_QuestPriorityStepList(2500, "ORI_COM_Laezel", "SpokeToVlaakith_LaezelAtPlanecaster");
DB_ORI_Laezel_QuestPriorityStepList(2500, "ORI_COM_Laezel", "SpokeToVlaakith_LaezelConvinced");
DB_ORI_Laezel_QuestPriorityStepList(2500, "ORI_COM_Laezel", "SpokeToVlaakith_LaezelNotPresent");
DB_ORI_Laezel_QuestPriorityStepList(2600, "ORI_COM_Laezel", "SpokeToDaisy");
DB_ORI_Laezel_QuestPriorityStepList(2700, "ORI_COM_Laezel", "DefeatInquisitor_AfterAstral");
DB_ORI_Laezel_QuestPriorityStepList(2800, "ORI_COM_Laezel", "VlaakithBetrayal_LaezelNotPresent");
DB_ORI_Laezel_QuestPriorityStepList(2800, "ORI_COM_Laezel", "VlaakithBetrayal_LaezelPresent");
DB_ORI_Laezel_QuestPriorityStepList(2800, "ORI_COM_Laezel", "VlaakithBetrayal_LeftRoomWithoutEntering");
DB_ORI_Laezel_QuestPriorityStepList(2900, "ORI_COM_Laezel", "FindCure_AfterBetrayal");
DB_ORI_Laezel_QuestPriorityStepList(3000, "ORI_COM_Laezel", "CrecheDestroyed_NothingDone");
DB_ORI_Laezel_QuestPriorityStepList(3000, "ORI_COM_Laezel", "CrecheDestroyed_ZaithiskDoneVlaakithNotDone");
DB_ORI_Laezel_QuestPriorityStepList(3000, "ORI_COM_Laezel", "CrecheDestroyed_ZaithiskNotDoneVlaakithDone");
DB_ORI_Laezel_QuestPriorityStepList(3100, "ORI_COM_Laezel", "CrecheFinished");
DB_ORI_Laezel_QuestPriorityStepList(3200, "ORI_COM_Laezel", "CrecheUnableToBeFinished");
DB_ORI_Laezel_QuestPriorityStepList(3300, "ORI_COM_Laezel", "PointOfNoReturnReachedWithoutCreche");
DB_ORI_Laezel_QuestPriorityStepList(3400, "ORI_COM_Laezel", "DealWithAbsolute");
DB_ORI_Laezel_QuestPriorityStepList(3500, "ORI_COM_Laezel", "KilledVoss");
DB_ORI_Laezel_QuestPriorityStepList(3600, "ORI_COM_Laezel", "AgreedVoss");
DB_ORI_Laezel_QuestPriorityStepList(3600, "ORI_COM_Laezel", "KilledKetheric");
DB_ORI_Laezel_QuestPriorityStepList(3600, "ORI_COM_Laezel", "VossContact");
DB_ORI_Laezel_QuestPriorityStepList(3700, "ORI_COM_Laezel", "FinishedIntermezzo");
DB_ORI_Laezel_QuestPriorityStepList(3700, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAboutOrpheus_FinishedIntermezzo_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(3700, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAboutOrpheus_FinishedIntermezzo_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(3800, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossNotPresent_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(3800, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossNotPresent_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(3800, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossNotPresent_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(3900, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossContact_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(3900, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossContact_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(3900, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossContact_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4000, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossInSC_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4000, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossInSC_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4000, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossInSC_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4100, "ORI_COM_Laezel", "SpeakToRaphael");
DB_ORI_Laezel_QuestPriorityStepList(4100, "ORI_COM_Laezel", "VlaakithVisited_SpeakToRaphael_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4100, "ORI_COM_Laezel", "VlaakithVisited_SpeakToRaphael_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_COM_Laezel", "AfterRaphael_NoDeal");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_COM_Laezel", "AfterRaphael_SignedDeal");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAfterRaphael_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAfterRaphael_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4300, "ORI_COM_Laezel", "AfterRaphaelNoDeal_VossInSC_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4400, "ORI_COM_Laezel", "AfterRaphaelNoDeal_VossInSC_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4400, "ORI_COM_Laezel", "VlaakithVisited_AfterRaphaelNoDeal_VossInSC_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4500, "ORI_COM_Laezel", "VlaakithVisited_AfterRaphaelNoDeal_VossInSC_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4550, "ORI_COM_Laezel", "VossIsGoneFromSC_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4550, "ORI_COM_Laezel", "VossIsGoneFromSC_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4550, "ORI_COM_Laezel", "VlaakithVisited_FindKeyToOrpheus_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4550, "ORI_COM_Laezel", "VlaakithVisited_FindKeyToOrpheus_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "AfterRaphaelNoDeal_VossNotPresent");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "LearnDevilsFeeEntrance");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "EnteredHoH");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "KilledVossBeforeHammer_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "KilledVossBeforeHammer_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "LearnedAboutOrphicHammer");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "LearnedAboutOrphicHammer_AlreadyInHoH");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "SawHammer");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "HammerForceFieldDisabled");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "SpokeToVoss_NoDeal_LiedAboutTakingDeal");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "SpokeToVoss_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "VlaakithVisited_GetOprhicHammer_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4600, "ORI_COM_Laezel", "VlaakithVisited_GetOprhicHammer_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4650, "ORI_COM_Laezel", "TalkToLaezelAfterGettingHammerFromHoH");
DB_ORI_Laezel_QuestPriorityStepList(4650, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAfterGettingHammerFromHoH_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4650, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAfterGettingHammerFromHoH_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4700, "ORI_COM_Laezel", "GotHammer_VossInSC_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4750, "ORI_COM_Laezel", "GotHammer_VossInSewers_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(4800, "ORI_COM_Laezel", "GotHammer_VossInSC_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4850, "ORI_COM_Laezel", "GotHammer_VossInSewers_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(4900, "ORI_COM_Laezel", "VlaakithVisited_ShowVossHammer_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(5000, "ORI_COM_Laezel", "VlaakithVisited_KillVossGotHammer_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "DiscussTadpole_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "DiscussTadpole_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "EnteredAstralPlane_NoHammer");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "EnteredAstralPlane_WithHammer");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "GotHammer_VossNotPresent");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "GotHammerFromRaphaelInAstralPlane");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "KilledVossAfterHammer_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "KilledVossAfterHammer_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "SpokeToVoss_LiedAboutNotHavingHammer");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "SpokeToVoss_ShowedHammer");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "AttackedVossGotHammer");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "VlaakithVisited_OrpheusPath_DealWithOrpheus");
DB_ORI_Laezel_QuestPriorityStepList(5100, "ORI_COM_Laezel", "VlaakithVisited_VlaakithPath_DealWithOrpheus");
DB_ORI_Laezel_QuestPriorityStepList(5200, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusAssimilated_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(5200, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusAssimilated_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(5200, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusFree_OrpheusPath");
DB_ORI_Laezel_QuestPriorityStepList(5200, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusFree_VlaakithPath");
DB_ORI_Laezel_QuestPriorityStepList(5200, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusAssimilated_OrpheusPath_LaezelNotPresent");
DB_ORI_Laezel_QuestPriorityStepList(5200, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusAssimilated_VlaakithPath_LaezelNotPresent");
DB_ORI_Laezel_QuestPriorityStepList(5200, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusFree_OrpheusPath_LaezelNotPresent");
DB_ORI_Laezel_QuestPriorityStepList(5200, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusFree_VlaakithPath_LaezelNotPresent");
DB_ORI_Laezel_QuestPriorityStepList(6000, "ORI_COM_Laezel", "LaezelDied_GoBackToMountainpass");
DB_ORI_Laezel_QuestPriorityStepList(6100, "ORI_COM_Laezel", "LaezelDied_MissingAtMountainpass");

DB_ORI_COM_Laezel_GetOrphicHammerQuestSteps("AfterRaphaelNoDeal_VossNotPresent");
DB_ORI_COM_Laezel_GetOrphicHammerQuestSteps("EnteredHoH");
DB_ORI_COM_Laezel_GetOrphicHammerQuestSteps("KilledVossBeforeHammer_OrpheusPath");
DB_ORI_COM_Laezel_GetOrphicHammerQuestSteps("KilledVossBeforeHammer_VlaakithPath");
DB_ORI_COM_Laezel_GetOrphicHammerQuestSteps("LearnedAboutOrphicHammer");
DB_ORI_COM_Laezel_GetOrphicHammerQuestSteps("LearnedAboutOrphicHammer_AlreadyInHoH");
DB_ORI_COM_Laezel_GetOrphicHammerQuestSteps("SawHammer");
DB_ORI_COM_Laezel_GetOrphicHammerQuestSteps("HammerForceFieldDisabled");
DB_ORI_COM_Laezel_GetOrphicHammerQuestSteps("SpokeToVoss_NoDeal_LiedAboutTakingDeal");
DB_ORI_COM_Laezel_GetOrphicHammerQuestSteps("SpokeToVoss_OrpheusPath");

DB_ORI_COM_Laezel_DealWithOrpheusQuestSteps("DiscussTadpole_OrpheusPath");
DB_ORI_COM_Laezel_DealWithOrpheusQuestSteps("DiscussTadpole_VlaakithPath");
DB_ORI_COM_Laezel_DealWithOrpheusQuestSteps("EnteredAstralPlane_NoHammer");
DB_ORI_COM_Laezel_DealWithOrpheusQuestSteps("EnteredAstralPlane_WithHammer");
DB_ORI_COM_Laezel_DealWithOrpheusQuestSteps("GotHammer_VossNotPresent");
DB_ORI_COM_Laezel_DealWithOrpheusQuestSteps("GotHammerFromRaphaelInAstralPlane");
DB_ORI_COM_Laezel_DealWithOrpheusQuestSteps("KilledVossAfterHammer_OrpheusPath");
DB_ORI_COM_Laezel_DealWithOrpheusQuestSteps("KilledVossAfterHammer_VlaakithPath");
DB_ORI_COM_Laezel_DealWithOrpheusQuestSteps("SpokeToVoss_LiedAboutNotHavingHammer");
DB_ORI_COM_Laezel_DealWithOrpheusQuestSteps("SpokeToVoss_ShowedHammer");

//Avatar
DB_ORI_Laezel_QuestCurrentPriority("ORI_Avatar_Laezel", 0);

//DB_ORI_Laezel_QuestPriorityStepList((INTEGER)_Priority, (STRING)_ObjectiveID, (STRING)_StepID)
DB_ORI_Laezel_QuestPriorityStepList(1000, "ORI_Avatar_Laezel", "Start");
DB_ORI_Laezel_QuestPriorityStepList(1100, "ORI_Avatar_Laezel", "FoundOutAboutZorru");
DB_ORI_Laezel_QuestPriorityStepList(1200, "ORI_Avatar_Laezel", "AskedZevlorAboutZorru");
DB_ORI_Laezel_QuestPriorityStepList(1300, "ORI_Avatar_Laezel", "ZorruLeft");
DB_ORI_Laezel_QuestPriorityStepList(1300, "ORI_Avatar_Laezel", "ZorruDied");
DB_ORI_Laezel_QuestPriorityStepList(1300, "ORI_Avatar_Laezel", "SawDragonRider");
DB_ORI_Laezel_QuestPriorityStepList(1300, "ORI_Avatar_Laezel", "GotNoInfoFromZorruWithoutKnowingHim");
DB_ORI_Laezel_QuestPriorityStepList(1300, "ORI_Avatar_Laezel", "GotNoInfoFromZorru");
DB_ORI_Laezel_QuestPriorityStepList(1400, "ORI_Avatar_Laezel", "ZorruMarkedMapWithoutKnowingAboutHim");
DB_ORI_Laezel_QuestPriorityStepList(1400, "ORI_Avatar_Laezel", "ZorruMarkedMap");
DB_ORI_Laezel_QuestPriorityStepList(1400, "ORI_Avatar_Laezel", "TalkedToDeadTiefling");
DB_ORI_Laezel_QuestPriorityStepList(1400, "ORI_Avatar_Laezel", "SawDragonRider_KnowsAboutGithyankiPatrol");
DB_ORI_Laezel_QuestPriorityStepList(1500, "ORI_Avatar_Laezel", "ResolvedPeaceNoCreche");
DB_ORI_Laezel_QuestPriorityStepList(1500, "ORI_Avatar_Laezel", "ChokepointCombatStarted");
DB_ORI_Laezel_QuestPriorityStepList(1600, "ORI_Avatar_Laezel", "ChokepointDefeated");
DB_ORI_Laezel_QuestPriorityStepList(1700, "ORI_Avatar_Laezel", "ReadCrecheMap");
DB_ORI_Laezel_QuestPriorityStepList(1700, "ORI_Avatar_Laezel", "ResolvedPeaceCreche");
DB_ORI_Laezel_QuestPriorityStepList(1800, "ORI_Avatar_Laezel", "InCrecheRegionWIthHints");
DB_ORI_Laezel_QuestPriorityStepList(1900, "ORI_Avatar_Laezel", "SawGithyankiAtGates_KnowsLocation");
DB_ORI_Laezel_QuestPriorityStepList(1900, "ORI_Avatar_Laezel", "SawGithyankiAtGates_DoesNotKnowLocation");
DB_ORI_Laezel_QuestPriorityStepList(1900, "ORI_Avatar_Laezel", "PermaDefeatedGithyankiAtGates");
DB_ORI_Laezel_QuestPriorityStepList(1900, "ORI_Avatar_Laezel", "FoundCrecheLocationWithHints");
DB_ORI_Laezel_QuestPriorityStepList(1900, "ORI_Avatar_Laezel", "FoundCrecheLocationNoHints");
DB_ORI_Laezel_QuestPriorityStepList(2000, "ORI_Avatar_Laezel", "EnteredCreche");
DB_ORI_Laezel_QuestPriorityStepList(2000, "ORI_Avatar_Laezel", "PermaDefeatedCheckpointGuardsInCreche");
DB_ORI_Laezel_QuestPriorityStepList(2050, "ORI_Avatar_Laezel", "SentToInfirmary");
DB_ORI_Laezel_QuestPriorityStepList(2100, "ORI_Avatar_Laezel", "FoundInfirmary");
DB_ORI_Laezel_QuestPriorityStepList(2100, "ORI_Avatar_Laezel", "SpokeToDoctor_NotWaiting");
DB_ORI_Laezel_QuestPriorityStepList(2200, "ORI_Avatar_Laezel", "DefeatedDoctor");
DB_ORI_Laezel_QuestPriorityStepList(2200, "ORI_Avatar_Laezel", "SpokeToDoctor_WaitingAtDevice");
DB_ORI_Laezel_QuestPriorityStepList(2300, "ORI_Avatar_Laezel", "UsedDevice_LaezelUsedIt");
DB_ORI_Laezel_QuestPriorityStepList(2300, "ORI_Avatar_Laezel", "UsedDevice_OtherUsedIt");
DB_ORI_Laezel_QuestPriorityStepList(2400, "ORI_Avatar_Laezel", "PermaDefeatInquisitor");
DB_ORI_Laezel_QuestPriorityStepList(2500, "ORI_Avatar_Laezel", "BackToInquisitor_InquisitorDead");
DB_ORI_Laezel_QuestPriorityStepList(2600, "ORI_Avatar_Laezel", "EnteredArtefact");
DB_ORI_Laezel_QuestPriorityStepList(2600, "ORI_Avatar_Laezel", "SpokeToVlaakith");
DB_ORI_Laezel_QuestPriorityStepList(2700, "ORI_Avatar_Laezel", "SpokeToDaisy");
DB_ORI_Laezel_QuestPriorityStepList(2800, "ORI_Avatar_Laezel", "DefeatInquisitor_AfterAstral");
DB_ORI_Laezel_QuestPriorityStepList(2900, "ORI_Avatar_Laezel", "FindCure_AfterBetrayal");
DB_ORI_Laezel_QuestPriorityStepList(2900, "ORI_Avatar_Laezel", "FindCure_LeftRoomAfterVlaakithCommand");
DB_ORI_Laezel_QuestPriorityStepList(3000, "ORI_Avatar_Laezel", "LeftRoomAfterVlaakithCommand");
DB_ORI_Laezel_QuestPriorityStepList(3000, "ORI_Avatar_Laezel", "KilledVoss");
DB_ORI_Laezel_QuestPriorityStepList(3000, "ORI_Avatar_Laezel", "CrecheFinished");
DB_ORI_Laezel_QuestPriorityStepList(3000, "ORI_Avatar_Laezel", "CrecheDestroyed_ZaithiskNotDoneVlaakithDone");
DB_ORI_Laezel_QuestPriorityStepList(3000, "ORI_Avatar_Laezel", "CrecheDestroyed_ZaithiskDoneVlaakithNotDone");
DB_ORI_Laezel_QuestPriorityStepList(3000, "ORI_Avatar_Laezel", "CrecheDestroyed_NothingDone");
DB_ORI_Laezel_QuestPriorityStepList(3100, "ORI_Avatar_Laezel", "PointOfNoReturnReachedWithoutCreche");
DB_ORI_Laezel_QuestPriorityStepList(3200, "ORI_Avatar_Laezel", "AgreedVoss");
DB_ORI_Laezel_QuestPriorityStepList(3200, "ORI_Avatar_Laezel", "KilledKetheric");
DB_ORI_Laezel_QuestPriorityStepList(3200, "ORI_Avatar_Laezel", "VossContact");
DB_ORI_Laezel_QuestPriorityStepList(3400, "ORI_Avatar_Laezel", "FinishedIntermezzo_VossNotPresent");
DB_ORI_Laezel_QuestPriorityStepList(3500, "ORI_Avatar_Laezel", "FinishedIntermezzo_VossInSC");
DB_ORI_Laezel_QuestPriorityStepList(3600, "ORI_Avatar_Laezel", "FinishedIntermezzo_VossContact");
DB_ORI_Laezel_QuestPriorityStepList(3700, "ORI_Avatar_Laezel", "SpeakToRaphael");
DB_ORI_Laezel_QuestPriorityStepList(3800, "ORI_Avatar_Laezel", "LearnedAboutKeyFromRaphael_VossInSC");
DB_ORI_Laezel_QuestPriorityStepList(3900, "ORI_Avatar_Laezel", "LearnedAboutKeyFromRaphael_VossNotPresent");
DB_ORI_Laezel_QuestPriorityStepList(4000, "ORI_Avatar_Laezel", "SpokeToVossInSC");
DB_ORI_Laezel_QuestPriorityStepList(4000, "ORI_Avatar_Laezel", "SawHammer");
DB_ORI_Laezel_QuestPriorityStepList(4000, "ORI_Avatar_Laezel", "HammerForceFieldDisabled");
DB_ORI_Laezel_QuestPriorityStepList(4000, "ORI_Avatar_Laezel", "SpokeToVossInSC");
DB_ORI_Laezel_QuestPriorityStepList(4000, "ORI_Avatar_Laezel", "LearnedAboutOrphicHammer_AlreadyInHoH");
DB_ORI_Laezel_QuestPriorityStepList(4000, "ORI_Avatar_Laezel", "LearnedAboutOrphicHammer");
DB_ORI_Laezel_QuestPriorityStepList(4000, "ORI_Avatar_Laezel", "KilledVossNoHammer");
DB_ORI_Laezel_QuestPriorityStepList(4000, "ORI_Avatar_Laezel", "EnteredHoH");
DB_ORI_Laezel_QuestPriorityStepList(4100, "ORI_Avatar_Laezel", "GotHammer_VossInSC");
DB_ORI_Laezel_QuestPriorityStepList(4150, "ORI_Avatar_Laezel", "GotHammer_VossInSewers");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_Avatar_Laezel", "ShowedVossHammer");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_Avatar_Laezel", "KilledVossGotHammer");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_Avatar_Laezel", "GotHammerFromRaphaelInAstralPlane");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_Avatar_Laezel", "GotHammer_VossNotPresent");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_Avatar_Laezel", "EnteredAstralPlane_WithHammer");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_Avatar_Laezel", "EnteredAstralPlane_NoHammer");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_Avatar_Laezel", "DiscussTadpole_WithHammer");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_Avatar_Laezel", "DiscussTadpole_NoHammer");
DB_ORI_Laezel_QuestPriorityStepList(4200, "ORI_Avatar_Laezel", "AttackedVossGotHammer");
DB_ORI_Laezel_QuestPriorityStepList(4300, "ORI_Avatar_Laezel", "ResolvedAstralPrism_OrpheusAssimilated");
DB_ORI_Laezel_QuestPriorityStepList(4300, "ORI_Avatar_Laezel", "ResolvedAstralPrism_OrpheusFree");


DB_ORI_Laezel_QuestCurrentPriority("ORI_Avatar_Laezel_SUB_OrpheusFuture", 0);

DB_ORI_Laezel_QuestPriorityStepList(1000, "ORI_Avatar_Laezel_SUB_OrpheusFuture", "VlaakithVisitedInCampOrpheus");
DB_ORI_Laezel_QuestPriorityStepList(1100, "ORI_Avatar_Laezel_SUB_OrpheusFuture", "OrpheusFreed_OrpheusMF");
DB_ORI_Laezel_QuestPriorityStepList(1100, "ORI_Avatar_Laezel_SUB_OrpheusFuture", "OrpheusFreed_OrpheusNotMF");


DB_ORI_Laezel_QuestCurrentPriority("ORI_Avatar_Laezel_SUB_VlaakithFuture", 0);

DB_ORI_Laezel_QuestPriorityStepList(1000, "ORI_Avatar_Laezel_SUB_VlaakithFuture", "VlaakithVisitedInCampVlaakith");
DB_ORI_Laezel_QuestPriorityStepList(1100, "ORI_Avatar_Laezel_SUB_VlaakithFuture", "OrpheusFreed");
//END_REGION

//REGION Suppresion Zones
DB_PartyDialogSuppression_CustomDialogForCompanion((TRIGGER)S_CRE_PartySuppressionZone_CrecheDestruction_01_452e9666-b1ff-4fb7-aa41-f48ce5fc8162, (DIALOGRESOURCE)ORI_Laezel_AD_PartySuppressionCrecheDestructionOngoing_d6455c4c-d37a-3e5a-7060-bcd52ab32176, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_PartyDialogSuppression_CustomDialogForCompanion((TRIGGER)S_CRE_PartySuppressionZone_CrecheDestruction_02_a5cc30a1-0a2e-4add-b634-9bade469860f, (DIALOGRESOURCE)ORI_Laezel_AD_PartySuppressionCrecheDestructionOngoing_d6455c4c-d37a-3e5a-7060-bcd52ab32176, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_PartyDialogSuppression_CustomDialogForCompanion((TRIGGER)S_CRE_PartySuppressionZone_CrecheDestruction_03_7dfbe649-6749-4d45-bbcf-9edbfb874ce2, (DIALOGRESOURCE)ORI_Laezel_AD_PartySuppressionCrecheDestructionOngoing_d6455c4c-d37a-3e5a-7060-bcd52ab32176, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

//Changes to a different dialog after speaking to Daisy
DB_PartyDialogSuppression_CustomDialogForCompanion((TRIGGER)S_CRE_AstralPlaneArea_cc0ba8c0-ae50-4f12-8ea4-7db1ff8e62b0, (DIALOGRESOURCE)ORI_Laezel_AD_PartySuppressionAstralPrismBeforeDaisy_4921e68b-22e2-c04f-328a-a666bb94f0bf, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_PartyDialogSuppression_AllowSpecificRelationshipDialogForCompanion((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TRIGGER)S_CRE_AstralPlaneArea_cc0ba8c0-ae50-4f12-8ea4-7db1ff8e62b0, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_AfterDaisyInCreche_74d4537c-856b-4475-a6e4-e10fb998f588);
DB_PartyDialogSuppression_AllowSpecificRelationshipDialogForCompanion((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TRIGGER)S_CRE_AstralPlaneArea_cc0ba8c0-ae50-4f12-8ea4-7db1ff8e62b0, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_VlaakithBetrayal_602363bc-c944-44be-aa93-8922d9cbdb1b);
DB_PartyDialogSuppression_AllowSpecificRelationshipDialogForCompanion((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TRIGGER)S_INT_PartySuppressionZone_AstralPlane_d3f3f7e9-c70a-4322-9e86-716ccc649692, (DIALOGRESOURCE)INT_Laezel_WRD_AboutOrpheusAfterIntermezzo_54bd43a1-faf4-0143-8d75-2318ea061fbc, (FLAG)NULL_00000000-0000-0000-0000-000000000000);

//Changes to a different dialog after the Emperor dialog in INT
DB_PartyDialogSuppression_CustomDialogForCompanion((TRIGGER)S_INT_PartySuppressionZone_AstralPlane_d3f3f7e9-c70a-4322-9e86-716ccc649692, (DIALOGRESOURCE)ORI_Laezel_AD_PartySupressionIntermezzoBeforeEmperor_b87dbb11-8c36-e2bf-07bf-3565bf99e8ea, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

//END_REGION

//REGION Voss hostility states
DB_GLO_Voss_PermanentHostilityIfAttackedInState("WYR_RaphaelTango_GithKnight", "RaphaelTango");
DB_GLO_Voss_PermanentHostilityIfAttackedInState("WYR_RaphaelTango_GithKnight", "TaproomWaiting");
DB_GLO_Voss_PermanentHostilityIfAttackedInState("WYR_RaphaelTango_GithKnight", "TaproomTalked");
//END_REGION

//REGION Dropping muting statuses
DB_DropMutingStatussesDialog((DIALOGRESOURCE)Laezel_Recruitment_a914c64a-30d8-0428-683a-99dd7879fc83);
DB_DropMutingStatussesDialog((DIALOGRESOURCE)Laezel_Recruitment_Crash_623fcc21-96e1-79c2-5d06-9e48f3a378b3);
DB_DropMutingStatussesDialog((DIALOGRESOURCE)Laezel_Recruitment_Creche_6d63ac73-0b10-0097-a299-72889bedc308);
DB_DropMutingStatussesDialog((DIALOGRESOURCE)Laezel_Recruitment_InCage_131cf573-180d-5307-6d6e-6a369319e161);
DB_DropMutingStatussesDialog((DIALOGRESOURCE)Laezel_Recruitment_Plains_962cb218-6f76-a571-02c0-28070bd09fed);
//END_REGION

//REGION WRDs
DB_ExclamationDialog_NeverStop((DIALOGRESOURCE)CRE_Laezel_WRD_PostZaithisk_bafb04ca-e293-d07b-9b46-5a8578de9846, NULL_00000000-0000-0000-0000-000000000000);

DB_ExclamationDialog_NeverStop((DIALOGRESOURCE)CRE_Laezel_WRD_PostCrecheDestruction_379c8d83-89d6-18dd-c48a-75a360f8a76c, NULL_00000000-0000-0000-0000-000000000000);
DB_RelationshipDialog_Autostart((DIALOGRESOURCE)CRE_Laezel_WRD_PostCrecheDestruction_379c8d83-89d6-18dd-c48a-75a360f8a76c, NULL_00000000-0000-0000-0000-000000000000);

DB_ExclamationDialog_NeverStop((DIALOGRESOURCE)GLO_Laezel_WRD_ProgressInAct2WithoutCreche_aa6fdbc8-6a7f-dd46-4a6f-366e36eeb4ab, NULL_00000000-0000-0000-0000-000000000000);
DB_RelationshipDialog_Autostart((DIALOGRESOURCE)GLO_Laezel_WRD_ProgressInAct2WithoutCreche_aa6fdbc8-6a7f-dd46-4a6f-366e36eeb4ab, NULL_00000000-0000-0000-0000-000000000000);

//END_REGION

//REGION MultipleAct CampNight Definitions
//NIGHT_Laezel_Romance1_AfterCelebration
DB_CampNight((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4, 4020);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4,"WLDMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4,"WLDCAVGRN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4,"WLDCAVSND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4,"WLDDUNABB");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4,"WLDDUNSHA");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4,"WLDUND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4,"WLDBAS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4,"CREMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4,"CREINSIDE");
DB_CampNight_Cancels((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4, (FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4, (FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4, (FLAG)CAMP_GoblinHuntCelebration_SD_ROM_NightWithLaezel_State_Happened_8860bafa-bdb3-2854-b664-50868c13c9a3);
DB_CampNight_Requirement_Dating((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12); //Dating is set during the invitation in the InParty dialog
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4, (FLAG)ORI_Laezel_Romance1_AfterCelebration_State_QueueInvitation_d648c9ac-8453-4d28-95de-0a9c5f0d02a3);
DB_CampNight_RomanceNight((FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_Laezel_Romance1_SD_Invitation_264413a4-e515-8e4d-3755-3f84c3fb1b11, (FLAG)ORI_Laezel_Romance1_AfterCelebration_State_AvatarInvited_412e09d6-03f7-4123-b806-999184dd1060);

//NIGHT_Laezel_SecondNight
DB_CampNight((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, 4030);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "WLDMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "WLDCAVGRN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "WLDCAVSND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "WLDDUNABB");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "WLDDUNSHA");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "WLDUND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "WLDBAS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "CREMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "CREINSIDE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "SCLMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "HAVEN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "MOONRISE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, "SHARTEMPLE");
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, (FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, (FLAG)ORI_Laezel_State_EnteredHaven_940dbf33-3265-4b23-84a1-f53e478cb407);
DB_CampNight_Requirement_Dating((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, (FLAG)ORI_Laezel_State_OneNightPassedAfterAct1RomanceScene_fa547a51-92f8-43b4-819d-0fc3de7713a6);
DB_CampNight_CRD(NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_Laezel_CRD_SecondNight_3907a519-e333-1ea6-6dcf-0b9f6ba872b5,(FLAG)NULL_00000000-0000-0000-0000-000000000000);
DB_CampNight_RomanceNight((FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6,(CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,(DIALOGRESOURCE)CAMP_Laezel_ROM_SleepingSecondNight_b1ebeae3-7a76-5d36-4506-f30d0bfdc965, (FLAG)ORI_Laezel_State_AgreedOnSecondNight_0b00ec42-3b72-40d1-a39c-032d88525da9);
DB_Dialogs_DatingDialog((DIALOGRESOURCE)CAMP_Laezel_CRD_SecondNight_3907a519-e333-1ea6-6dcf-0b9f6ba872b5);

//NIGHT_Laezel_Romance2
DB_CampNight((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, 4040);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "WLDMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "WLDCAVGRN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "WLDCAVSND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "WLDDUNABB");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "WLDDUNSHA");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "WLDUND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "WLDBAS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "CREMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "CREINSIDE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "SCLMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "HAVEN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "MOONRISE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, "SHARTEMPLE");
DB_CampNight_ExclusiveMoment((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b);
DB_CampNight_Cancels((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, (FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9);
DB_CampNight_Requirement_Dating((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, (FLAG)ORI_Laezel_State_OneNightPassedAfterAct1RomanceScene_fa547a51-92f8-43b4-819d-0fc3de7713a6, (FLAG)GLO_MoonriseTower_EverEnteredBefore_26aeabb0-7644-4897-9bbd-7a95e3e8930f);
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, (FLAG)ORI_Laezel_State_OneNightPassedAfterAct1RomanceScene_fa547a51-92f8-43b4-819d-0fc3de7713a6, (FLAG)ORI_Laezel_State_EnteredHaven_940dbf33-3265-4b23-84a1-f53e478cb407);
DB_CampNight_RomanceNight((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, CAMP_Laezel_ROM_SD_Romance2_WokenUpByLaezel_ce8ea48c-688d-7484-283f-c801c82172b3, NULL_00000000-0000-0000-0000-000000000000);
DB_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_RefusedLaezelInRomance2_fcb3c76e-c8c5-4c52-be1e-e00c00f9c65c, (DIALOGRESOURCE)CAMP_Laezel_ROM_SD_Romance2_WokenUpByLaezel_ce8ea48c-688d-7484-283f-c801c82172b3);
DB_FlagReactionAfterDialog((FLAG)CAMP_Laezel_Romance2_Event_LaezelDuelStart_d9ddf643-4065-4798-a2d8-57fd345c113b, (DIALOGRESOURCE)CAMP_Laezel_ROM_SD_Romance2_WokenUpByLaezel_ce8ea48c-688d-7484-283f-c801c82172b3);
DB_DropMutingStatussesDialog((DIALOGRESOURCE)CAMP_Laezel_ROM_Romance2_AfterDuel_4b526494-b38d-d768-b1db-5f72b758ab15);
DB_ORI_Laezel_Romance2_LaezelFightPosition("WLDMAIN", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_WLDMAIN_96a60ab3-3096-4bee-84bd-294d2b8de257);
DB_ORI_Laezel_Romance2_LaezelFightPosition("WLDCAVGRN", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_WLDCAVGRN_4202cf9c-0a1f-456e-af04-48f6c15652b7);
DB_ORI_Laezel_Romance2_LaezelFightPosition("WLDCAVSND", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_WLDCAVSND_1259f0f7-7abf-4c87-b884-e15a8f0d9ed2);
DB_ORI_Laezel_Romance2_LaezelFightPosition("WLDDUNABB", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_WLDDUNABB_0eccb99e-62bb-45c6-8a91-a2c61f35e969);
DB_ORI_Laezel_Romance2_LaezelFightPosition("WLDDUNSHA", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_WLDDUNSHA_8b6274d2-ff0b-4b73-b4bd-dffbd5861adb);
DB_ORI_Laezel_Romance2_LaezelFightPosition("WLDUND", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_WLDUND_6c1cdf73-5af9-44d4-abbb-f0a663445a0e);
DB_ORI_Laezel_Romance2_LaezelFightPosition("WLDBAS", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_WLDBAS_212c6620-7cec-41f2-9848-3557711e3b77);
DB_ORI_Laezel_Romance2_LaezelFightPosition("CREMAIN", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_CREMAIN_d849691f-3c66-4f0e-80e9-09df3f96d523);
DB_ORI_Laezel_Romance2_LaezelFightPosition("CREINSIDE", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_CREINSIDE_8b54b964-ff92-4443-b226-53a79d85acc5);
DB_ORI_Laezel_Romance2_LaezelFightPosition("SCLMAIN", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_SCLMAIN_a5455128-72a0-47f6-89c8-b48b9af82fef);
DB_ORI_Laezel_Romance2_LaezelFightPosition("HAVEN", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_HAVEN_249a01ec-2fd8-4790-a99d-72aab193f6f9);
DB_ORI_Laezel_Romance2_LaezelFightPosition("MOONRISE", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_MOONRISE_94ba5c78-afe5-4ba7-bc0b-5852def7cc35);
DB_ORI_Laezel_Romance2_LaezelFightPosition("SHARTEMPLE", (TRIGGER)S_CAMP_Laezel_Romance2LaezelFightPos_SHARTEMPLE_b019a49b-51cc-4856-b701-26fd06a0f5f0);

//NIGHT_Laezel_Romance2_Karlach - Karlach can bypass Romance 1 and jump into partnering directly
DB_CampNight((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, 4050);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "WLDMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "WLDCAVGRN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "WLDCAVSND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "WLDDUNABB");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "WLDDUNSHA");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "WLDUND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "WLDBAS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "CREMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "CREINSIDE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "SCLMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "HAVEN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "MOONRISE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, "SHARTEMPLE");
DB_CampNight_ExclusiveMoment((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989);
DB_CampNight_Cancels((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6);
DB_CampNight_Requirement_Approval(NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 40);
DB_CampNight_Requirement_SameUser(NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (CHARACTER)S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c);
DB_CampNight_Requirement_CanStartDating(NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, (FLAG)KARLACHAVATAR_9f241ff7-bfb3-4826-87c6-00f10937adca, (FLAG)GLO_ForgingOfTheHeart_State_KarlachSecondUpgrade_f6dc0de4-1089-43c0-b392-306a9a44387c);
DB_CampNight_RomanceNight((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, CAMP_Laezel_ROM_SD_Romance2_WokenUpByLaezel_ce8ea48c-688d-7484-283f-c801c82172b3, ORI_Karlach_State_CanRomanceLaezel_467800f4-89b1-4d70-a327-3e6e24e0e78c);

//NIGHT_Laezel_Romance2_SkippedRomance1 - If players initiate the romance in Act2
DB_CampNight((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9, 4055);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9, "SCLMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9, "HAVEN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9, "MOONRISE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9, "SHARTEMPLE");
DB_CampNight_ExclusiveMoment((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9);
DB_CampNight_Cancels((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9, (FLAG)NIGHT_Laezel_SecondNight_37bc82ff-e71b-4723-b7d0-bf0d660ec5b6);
DB_CampNight_Cancels((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9, (FLAG)NIGHT_Laezel_Romance1_AfterCelebration_c970265f-56e2-46e8-812d-06e0ac0a0fe4);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9, (FLAG)CAMP_GoblinHuntCelebration_SD_ROM_NightWithLaezel_State_Happened_8860bafa-bdb3-2854-b664-50868c13c9a3);
DB_CampNight_Requirement_Dating((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12); //Dating is set during the invitation in the InParty dialog
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9, (FLAG)ORI_Laezel_Romance1_AfterCelebration_State_QueueInvitation_d648c9ac-8453-4d28-95de-0a9c5f0d02a3);
DB_CampNight_RomanceNight((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, CAMP_Laezel_ROM_SD_Romance2_WokenUpByLaezel_ce8ea48c-688d-7484-283f-c801c82172b3, NULL_00000000-0000-0000-0000-000000000000);

//NIGHT_Laezel_AfterRomance2
DB_CampNight((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, 4060);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "WLDMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "WLDCAVGRN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "WLDCAVSND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "WLDDUNABB");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "WLDDUNSHA");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "WLDUND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "WLDBAS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "CREMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "CREINSIDE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "SCLMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "HAVEN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "MOONRISE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "SHARTEMPLE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, "ELFSONG");
DB_CampNight_Requirement_Partner((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, (FLAG)ORI_Laezel_State_OneNightPassedAfterAct2RomanceScene_1e8304bf-f85f-45c3-808b-1b9db5a6f338);
DB_CampNight_CRD(NIGHT_Laezel_AfterRomance2_8f4cac3c-a531-49b3-a3c1-509c0f1c09ae, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_Laezel_CRD_AfterRomance2_d186e4e5-1212-a83e-f9f2-0723e0586ebe,(FLAG)NULL_00000000-0000-0000-0000-000000000000);

//NIGHT_Laezel_AvatarReflectionAfterCreche
DB_CampNight((FLAG)NIGHT_Laezel_AvatarReflectionAfterCreche_a763ff69-2926-43b2-8dba-c81cd2f10c20, 6040);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AvatarReflectionAfterCreche_a763ff69-2926-43b2-8dba-c81cd2f10c20, "CREMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_AvatarReflectionAfterCreche_a763ff69-2926-43b2-8dba-c81cd2f10c20, "CREINSIDE");
DB_CampNight_CancelledBy(NIGHT_Laezel_AvatarReflectionAfterCreche_a763ff69-2926-43b2-8dba-c81cd2f10c20, (FLAG)ORI_Laezel_State_RestedAfterCreche_34d9f1b8-fa2c-4730-a93d-5739668be195);
DB_CampNight_CancelledBy(NIGHT_Laezel_AvatarReflectionAfterCreche_a763ff69-2926-43b2-8dba-c81cd2f10c20, (FLAG)ORI_Laezel_State_MetVossInAct2_26563f96-bf5a-4895-b63b-036c7571bbbc);
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_AvatarReflectionAfterCreche_a763ff69-2926-43b2-8dba-c81cd2f10c20, 
						 (FLAG)LAEZELAVATAR_cea30880-6e09-4daa-ad17-5411885097f3, 
						 (FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7);
DB_CampNight_SoloDream((FLAG)NIGHT_Laezel_AvatarReflectionAfterCreche_a763ff69-2926-43b2-8dba-c81cd2f10c20,(CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,(DIALOGRESOURCE)CAMP_Laezel_AvD_AfterCrecheReflection_ae0e247b-6eea-1ba0-57de-735f014110b6);

//NIGHT_Laezel_ReturnToCrecheReflection
DB_CampNight((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, 6060);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, "WLDMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, "WLDCAVGRN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, "WLDCAVSND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, "WLDDUNABB");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, "WLDDUNSHA");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, "WLDUND");
//Not in Creche, as that means you have returned already
DB_CampNight_Camp((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, "SCLMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, "HAVEN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, "MOONRISE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, "SHARTEMPLE");
DB_CampNight_CancelledBy(NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, (FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7);
DB_CampNight_CancelledBy(NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, (FLAG)CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d);
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f, 
						 (FLAG)LAEZELAVATAR_cea30880-6e09-4daa-ad17-5411885097f3, 
						 (FLAG)ORI_Laezel_State_StartedMoonrise_7cf55703-f947-4fd2-98b0-c03afb9bac5f);
DB_CampNight_SoloDream((FLAG)NIGHT_Laezel_ReturnToCrecheReflection_179d4c3c-be4b-4d7a-bd76-d1391467a42f,(CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,(DIALOGRESOURCE)CAMP_Laezel_SD_ReturnToCrecheReflection_0c83d871-8fcc-17c3-0eee-3fe583e8832a);

//NIGHT_Laezel_PostZaithisk
DB_CampNight((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df, 5320);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"WLDMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"WLDCAVGRN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"WLDCAVSND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"WLDDUNABB");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"WLDDUNSHA");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"WLDUND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"WLDBAS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"CREMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"CREINSIDE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"SCLMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"HAVEN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"MOONRISE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df,"SHARTEMPLE");
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df, (FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df, (FLAG)ORI_Laezel_State_WRD_PostZaithisk_0577aa84-1760-4dca-88d7-bac71ff76847);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df, (FLAG)CRE_ChainOfCommand_State_TemplarResolved_c6eea22b-b5dc-4797-b202-9a6f5ab18100);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df, (FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df, (FLAG)CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df, (FLAG)VISITEDREGION_INT_Main_A_a2e1a618-d211-484e-9389-6b37308b8da1);
DB_CampNight_CRD((FLAG)NIGHT_Laezel_PostZaithisk_8b11150d-e948-448e-99d1-104d0164a0df, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CRE_Laezel_WRD_PostZaithisk_bafb04ca-e293-d07b-9b46-5a8578de9846, NULL_00000000-0000-0000-0000-000000000000);

//NIGHT_Laezel_VlaakithBetrayal
DB_CampNight((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e, 5330);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"WLDMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"WLDCAVGRN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"WLDCAVSND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"WLDDUNABB");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"WLDDUNSHA");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"WLDUND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"WLDBAS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"CREMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"CREINSIDE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"SCLMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"HAVEN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"MOONRISE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e,"SHARTEMPLE");
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e, (FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e, (FLAG)Laezel_InParty_Event_DiscussedVlaakithBetrayal_af0ad422-970f-43d5-852d-d1551cdc6231);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e, (FLAG)ORI_Laezel_State_MetVossInAct2_26563f96-bf5a-4895-b63b-036c7571bbbc);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e, (FLAG)VISITEDREGION_INT_Main_A_a2e1a618-d211-484e-9389-6b37308b8da1);
DB_CampNight_CRD((FLAG)NIGHT_Laezel_VlaakithBetrayal_bdaa7b4d-e60f-477d-a870-197bd3f4f83e, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_VlaakithBetrayal_602363bc-c944-44be-aa93-8922d9cbdb1b);

//NIGHT_Laezel_PostCrecheDestruction
DB_CampNight((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab, 5340);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"WLDMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"WLDCAVGRN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"WLDCAVSND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"WLDDUNABB");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"WLDDUNSHA");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"WLDUND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"WLDBAS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"CREMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"CREINSIDE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"SCLMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"HAVEN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"MOONRISE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab,"SHARTEMPLE");
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab, (FLAG)ORI_Laezel_State_CrecheExploded_31ee1ed3-b163-4d1a-84f3-d37521900a87);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab, (FLAG)ORI_Laezel_State_WRD_PostCrecheDestruction_5e856cb0-9aa1-4fd4-bb29-3e942fc2d047);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab, (FLAG)VISITEDREGION_INT_Main_A_a2e1a618-d211-484e-9389-6b37308b8da1);
DB_CampNight_CRD((FLAG)NIGHT_Laezel_PostCrecheDestruction_d8518d06-c176-4d5c-932d-c7b55d0802ab, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CRE_Laezel_WRD_PostCrecheDestruction_379c8d83-89d6-18dd-c48a-75a360f8a76c, NULL_00000000-0000-0000-0000-000000000000);

//NIGHT_Laezel_VossCampConfrontation
DB_CampNight((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, 5050 /*6050 for avatar*/,(CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, "CREMAIN");

DB_CampNight_Requirement((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, (FLAG)IMPOSSIBLE_6e4b66e9-0f72-5171-04ba-441108b45b0e); //only forced on CRE transition
DB_CAMP_Laezel_VossCampConfrontation_Dialogs((DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelAvatar_e43d9a2a-7ea7-41a7-78cb-a62ccdc582b4);
DB_CAMP_Laezel_VossCampConfrontation_Dialogs((DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c);

//NIGHT_Laezel_VlaakithVisit
DB_CampNight((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, 5080 /* 6080 for avatar */, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, "ELFSONG");
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, (FLAG)LAEZELCOMPANION_9c5bc0ce-cb2e-4685-b597-89a290837535);
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, (FLAG)LAEZELCAMP_3a157c66-db4a-48ad-95e5-9659c42c4aa0);
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, (FLAG)LAEZELAVATAR_cea30880-6e09-4daa-ad17-5411885097f3);
DB_CAMP_Laezel_VlaakithVisit_OMDialogs((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelAvatar_30753d97-84d4-7171-e084-9f815cd4ee27);
DB_CAMP_Laezel_VlaakithVisit_OMDialogs((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2);

//NIGHT_Laezel_EggIsGone
DB_CampNight((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, 2100);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "WLDMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "WLDCAVGRN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "WLDCAVSND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "WLDDUNABB");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "WLDDUNSHA");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "WLDUND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "WLDBAS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "CREMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "CREINSIDE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "SCLMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "HAVEN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "MOONRISE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "SHARTEMPLE");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "FARM");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "SLUMS");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, "ELFSONG");
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, (FLAG)ORI_Laezel_State_WantsToTalkAboutLostGithEgg_a9048195-ecf7-4590-b2f7-e786c8b304d9);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, (FLAG)ORI_Laezel_State_DiscussedLostEgg_5205df84-cd67-4b71-9400-1afceeb7dd86);
DB_CampNight_CRD((FLAG)NIGHT_Laezel_EggIsGone_9e32ff31-1cf9-4a86-873a-c7af2a7c0469, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_GithEggRelated_fad8e633-576a-f03d-38e8-4a4b5af4bc60, NULL_00000000-0000-0000-0000-000000000000);

//END_REGION

//REGION Orpheus Books
DB_HasItemEvent((ITEM)S_GLO_OrpheusChapter1_164b80e2-12a9-45d6-8457-cfe84ebb1a06, (FLAG)ORI_Laezel_State_HasOrpheusChapter1_24b4f0a1-0512-4164-8c5b-0e3bca62bfb2);
DB_HasItemEvent((ITEM)S_GLO_OrpheusChapter2_4dbaf850-49ff-4e41-adc2-7054e416c960, (FLAG)ORI_Laezel_State_HasOrpheusChapter2_94ac2b16-58e6-4ebd-ba0f-2ae7ef59e5ef);
DB_HasItemEvent((ITEM)S_GLO_OrpheusChapter3_bad6bedb-5be9-407a-840e-977c2e23aba3, (FLAG)ORI_Laezel_State_HasOrpheusChapter3_225b8f68-2134-499d-985b-cbd1d5d85624);

DB_GiveItemToEvent((ITEM)S_GLO_OrpheusChapter1_164b80e2-12a9-45d6-8457-cfe84ebb1a06, (FLAG)CRE_YouthTraining_Event_GiveOrpheusChapter1_07ab5078-9874-4390-9d49-3d4281c854bf);
DB_GiveItemToEvent((ITEM)S_GLO_OrpheusChapter2_4dbaf850-49ff-4e41-adc2-7054e416c960, (FLAG)CRE_YouthTraining_Event_GiveOrpheusChapter2_c352a161-6333-44e0-82fc-3c39f9a011a9);
DB_GiveItemToEvent((ITEM)S_GLO_OrpheusChapter3_bad6bedb-5be9-407a-840e-977c2e23aba3, (FLAG)CRE_YouthTraining_Event_GiveOrpheusChapter3_0e8adff4-b747-4ce6-bc11-d8d555f14fe8);

DB_GlobalFlagReactionAfterDialog((FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter1_c8fa6c18-6491-48b6-9197-43285a07f9c9, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96);
DB_GlobalFlagReactionAfterDialog((FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter3_cd913886-8e41-47d2-bba1-fda22b129001, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96);
DB_GlobalFlagReactionAfterDialog((FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter1_c8fa6c18-6491-48b6-9197-43285a07f9c9, (DIALOGRESOURCE)Laezel_InParty2_Nested_OrpheusChapters_fb27c985-67fc-6a32-2cf4-f0919ee9e423);
DB_GlobalFlagReactionAfterDialog((FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter3_cd913886-8e41-47d2-bba1-fda22b129001, (DIALOGRESOURCE)Laezel_InParty2_Nested_OrpheusChapters_fb27c985-67fc-6a32-2cf4-f0919ee9e423);
DB_GlobalFlagReactionAfterDialog((FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter1_c8fa6c18-6491-48b6-9197-43285a07f9c9, (DIALOGRESOURCE)GLO_OrpheusChapters_AvatarLaezelReadsChapters_deb6d52b-d3da-d384-383d-8f420d98d7f8);
DB_GlobalFlagReactionAfterDialog((FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter3_cd913886-8e41-47d2-bba1-fda22b129001, (DIALOGRESOURCE)GLO_OrpheusChapters_AvatarLaezelReadsChapters_deb6d52b-d3da-d384-383d-8f420d98d7f8);
DB_GlobalFlagReactionAfterDialog((FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter1_c8fa6c18-6491-48b6-9197-43285a07f9c9, (DIALOGRESOURCE)GLO_OrpheusChapters_PlayerDecipherChapter_2f5fa3c8-81ed-fe69-119e-cc0384833229);
DB_GlobalFlagReactionAfterDialog((FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter3_cd913886-8e41-47d2-bba1-fda22b129001, (DIALOGRESOURCE)GLO_OrpheusChapters_PlayerDecipherChapter_2f5fa3c8-81ed-fe69-119e-cc0384833229);

//Chapter 1 - Underdark, Arcane Tower
DB_ORI_Laezel_OrpheusChapters((ITEM)S_GLO_OrpheusChapter1_164b80e2-12a9-45d6-8457-cfe84ebb1a06, "ORI_Laezel_OrpheusChapter1_Deciphered");
AddEntryToCustomBook("ORI_Laezel_OrpheusChapter1", "ORI_Laezel_OrpheusChapter1");

//Chapter 2 - Gith Boy, Creche
DB_ORI_Laezel_OrpheusChapters((ITEM)S_GLO_OrpheusChapter2_4dbaf850-49ff-4e41-adc2-7054e416c960, "ORI_Laezel_OrpheusChapter2");
AddEntryToCustomBook("ORI_Laezel_OrpheusChapter2", "ORI_Laezel_OrpheusChapter2");

//Chapter 3 - Balthazar's Room, Moonrise Towers
DB_ORI_Laezel_OrpheusChapters((ITEM)S_GLO_OrpheusChapter3_bad6bedb-5be9-407a-840e-977c2e23aba3, "ORI_Laezel_OrpheusChapter3_Deciphered");
AddEntryToCustomBook("ORI_Laezel_OrpheusChapter3", "ORI_Laezel_OrpheusChapter3");

//Avatar Chapters
DB_ORI_Laezel_AvatarOrpheusChapters((ITEM)S_GLO_OrpheusChapter1_164b80e2-12a9-45d6-8457-cfe84ebb1a06, (FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter1_c8fa6c18-6491-48b6-9197-43285a07f9c9, (FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter1_2c57476c-aea4-4126-8f6b-557e59b14b62);
DB_ORI_Laezel_AvatarOrpheusChapters((ITEM)S_GLO_OrpheusChapter3_bad6bedb-5be9-407a-840e-977c2e23aba3, (FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter3_cd913886-8e41-47d2-bba1-fda22b129001, (FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter3_f834d419-d6a4-4b41-bd0c-665b9e519537);

DB_HasItemEvent((ITEM)S_GLO_OrpheusBooks_Cipher_7dcf6be5-d0e8-4a33-ac78-9aa2d10b11ec, (FLAG)GLO_OrpheusChapters_State_HasCipher_fde87349-9c7b-4b88-9609-dabf612c1071);
//END_REGION

//REGION NIGHT_Laezel_VossCampConfrontation
DB_GiveItemToEvent((ITEM)S_GLO_GithRadar_4aca442e-5ecb-4611-b481-5eaf35596dea, (FLAG)ORI_Laezel_Event_VossGivesGithRadar_2c5a9e7c-2ad4-4c62-9c16-6a37f817fec7);
//END_REGION

//REGION Creche Recruitment positions
//Once the undead enemies are perma defeated, Laezel has more places she will walk around to while the Creche recruitment is active
DB_GLO_DefeatCounter((CHARACTER)S_CRE_CultistsUndead_Ghast_000_9487bdb9-54b1-4e13-88cd-55340c8369d4, "ORI_Laezel_UndeadEnemiesAtCreche");
DB_GLO_DefeatCounter((CHARACTER)S_CRE_CultistsUndead_Ghoul_000_88ac37a0-e51b-49e6-9b71-148a02dd5b70, "ORI_Laezel_UndeadEnemiesAtCreche");
DB_GLO_DefeatCounter((CHARACTER)S_CRE_CultistsUndead_Ghoul_001_d216757b-b7aa-43c1-b2bb-729db5694fbd, "ORI_Laezel_UndeadEnemiesAtCreche");
DB_GLO_DefeatCounter((CHARACTER)S_CRE_CultistsUndead_Ghoul_002_eb2b5dd7-578a-4724-ade5-a1f462dcf6da, "ORI_Laezel_UndeadEnemiesAtCreche");
DB_GLO_DefeatCounter((CHARACTER)S_CRE_CultistsUndead_Ghoul_003_f8faf06b-f2af-4b33-a4fd-4aa1027e7545, "ORI_Laezel_UndeadEnemiesAtCreche");
DB_GLO_DefeatCounter((CHARACTER)S_CRE_CultistsUndead_GiantSkeleton_000_09f52656-f262-48a2-bdbb-949264077dc4, "ORI_Laezel_UndeadEnemiesAtCreche");
DB_GLO_DefeatCounter((CHARACTER)S_CRE_CultistsUndead_GiantSkeleton_001_d5aec90b-aa86-4c8a-b27d-53002d0f659e, "ORI_Laezel_UndeadEnemiesAtCreche");
DB_GLO_DefeatCounter_AllPermaDefeatedGlobalFlag("ORI_Laezel_UndeadEnemiesAtCreche", (FLAG)CRE_Exterior_State_EnemiesNearSCLPermaDefeated_0ca5d13e-6eae-407f-bce2-827ae1393303);

DB_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_StayedBehindInCreche_9705545c-fb54-4ff4-b16b-3326cce76dd8, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96);
DB_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_StayedBehindInCreche_9705545c-fb54-4ff4-b16b-3326cce76dd8, (DIALOGRESOURCE)GLO_Laezel_WRD_ProgressInAct2WithoutCreche_aa6fdbc8-6a7f-dd46-4a6f-366e36eeb4ab);
//END_REGION

//REGION Handling combat with Laezel
DB_OriginMayLeaveDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96);
DB_OriginMayLeaveDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_Daisy1_CRD_Laezel_BeforeDream_1375618b-f1e6-7f74-4748-beabc24cdc96);
//END_REGION

//REGION Dialogs that block inclusions
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)CAMP_Laezel_WRD_AfterVlaakithVisit_733e7f87-f3b7-902a-487b-9af85c13590d);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)CRE_Laezel_WRD_PostCrecheDestruction_379c8d83-89d6-18dd-c48a-75a360f8a76c);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)CRE_Laezel_WRD_PostZaithisk_bafb04ca-e293-d07b-9b46-5a8578de9846);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)GLO_Laezel_WRD_AfterVossCampConfrontation_320ec283-5803-0bf5-5c1f-77fe0961bef6);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)GLO_Laezel_WRD_LearnedAboutOrphicHammer_ebc25934-7068-3bc2-f997-79b7d03b4737);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)GLO_Laezel_WRD_ProgressInAct2WithoutCreche_aa6fdbc8-6a7f-dd46-4a6f-366e36eeb4ab);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)INT_Laezel_WRD_AboutOrpheusAfterIntermezzo_54bd43a1-faf4-0143-8d75-2318ea061fbc);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)LOW_Laezel_WRD_GotSilverSword_61a02700-e193-7b09-29bc-aee682d06a15);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)LOW_Laezel_WRD_SavedFromOrin_00a838b2-a850-0c36-7231-6969601f1348);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)LOW_Laezel_WRD_VossWentToSewers_1ef8c879-6669-24f8-2aa9-4af6e54989f5);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)PLA_GithChokepoint_WRD_LaezelAfterVossAtChokepoint_05b0a5cc-5ea2-1c67-acff-a048b3eeb679);
DB_GLO_Inclusion_DisableForDialogInCamp((DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c);
//END_REGION

//REGION Laezel Act1 romance availability
//Defeating these enemies will prompt an IPRD reaction from Laezel about starting the romance and enable the question if it is missed
DB_ORI_Laezel_Romance1ActivationFlags((FLAG)HAG_Hag_State_HagDefeated_7a1acad0-589f-ae02-f712-f0d24080d720);
DB_ORI_Laezel_Romance1ActivationFlags((FLAG)FOR_Bottomless_SpiderQueen_State_PermaDefeated_b749271f-fbee-43ec-bbc7-b1199d0f794a);
DB_ORI_Laezel_Romance1ActivationFlags((FLAG)FOR_Owlbear_State_PermaDefeated_a2cd3c0f-95be-7155-d67c-edbdb2ca1104);
DB_ORI_Laezel_Romance1ActivationFlags((FLAG)FOR_SchoolOgres_State_MainOgrePermaDefeated_5b3ea6f8-0d41-4388-9124-434e133362c2);

//Entering one of those regions will enable the romance 1 question after one long rest
DB_ORI_Laezel_Romance1ActivationFlags_FallbackRegions((FLAG)GLO_Underdark_EverEnteredBefore_dd5cd5b4-2ad5-4dbd-4972-2afaa7538994);
DB_ORI_Laezel_Romance1ActivationFlags_FallbackRegions((FLAG)VISITEDREGION_CRE_Main_A_c22062f9-2a42-4e19-8c72-34a2d9ff9c0a);
//END_REGION

//REGION Gith Egg
//Getting the egg reaction
DB_ORI_Laezel_EggEventsAllowedTriggersForReaction((FLAG)ORI_Laezel_State_WantsToTalkAboutGettingGithEgg_84048cd6-f418-4867-9915-406b76170504, (TRIGGER)S_CRE_Hatchery_SUB_f6f9d65c-c6e2-4aa6-a3f3-d6ad452298a8);

//Selling the egg reaction
DB_TriggerEvents_TriggerSet("ORI_Laezel_GithEgg_SoldEggValidAreas", S_ORI_Laezel_NearExpeditionerArea_6ec218fd-7dd5-4ce3-892a-4541e2801e09);
DB_TriggerEvents_TriggerSet("ORI_Laezel_GithEgg_SoldEggValidAreas", S_LOW_TheLodge_GroundFloor_SUB_fe71f964-30ae-4030-8d57-764f29f87dfd);
DB_TriggerEvents_TriggerSet("ORI_Laezel_GithEgg_SoldEggValidAreas", S_LOW_TheLodge_SecondFloor_SUB_70d8f401-4eb1-41e9-8247-22668c0e232b);
DB_ORI_Laezel_EggEventsAllowedTriggerSetsForReaction((FLAG)RI_Laezel_State_WantsToTalkAboutSellingGithEgg_880bf97c-f68d-4544-bbf6-01bec9f2c684, "ORI_Laezel_GithEgg_SoldEggValidAreas");

//Meeting Ptaris reaction
DB_ORI_Laezel_EggEventsAllowedTriggersForReaction((FLAG)ORI_Laezel_State_WantsToTalkAboutPtaris_ce6a94c3-181a-4809-916e-4766a2ae448b, (TRIGGER)S_LOW_TheLodge_BasementDocks_SUB_b4e11373-49c4-43b4-a93f-12792187332a);

DB_GiveItemToEvent(S_CRE_GithyankiEgg_999b6dd7-2901-4604-8280-1931a5217a94, (FLAG)ORI_Laezel_Event_GiveEggToLaezel_8f3ef601-a408-43b8-a39a-beb6169939cd);
//END_REGION
KBSECTION
//REGION Misc
IF
FlagSet((FLAG)GLO_Origin_PartOfTheTeam_Laezel_57d93a1d-4400-4307-845f-25d9a250d332, _, _)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_CurrentLevel("TUT_Avernus_C")
AND
QRY_OnlyOnce("ORI_Laezel_IniitalRecruitment")
THEN
SetFlag((FLAG)ORI_Laezel_State_WasRecruited_34790d30-6331-484f-ae56-87f7dad3b57f);
NOT DB_PreventKnockedOutPermaDefeated((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

IF
FlagSet((FLAG)GLO_GithChokepoint_Knows_DecipheredMap_604768b9-c983-414d-8c3b-ba1dee3da387, _, _)
THEN
SetFlag((FLAG)ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2);

//REGION Give new Equipment  //If Lae'zel's stuff was stolen, give her new things she found on her way

PROC
PROC_ORI_Laezel_GiveNewEquipment()
AND
NOT GetEquippedItem(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,"Breast",_)
AND
CreateAtObject(ARM_Hide_b78fabcc-d2df-4c74-b5d4-1eda6dc4c071, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0, 0, "", 0,_NewArmor)
THEN
Equip(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (ITEM)_NewArmor, 1, 0, 1);

PROC
PROC_ORI_Laezel_GiveNewEquipment()
AND
NOT GetEquippedWeapon(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _)
AND
CreateAtObject(WPN_GOB_Scimitar_A_288356cc-0c6b-43c1-b049-dde418faf1f2, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0, 0, "", 0,_NewWeapon)
THEN
Equip(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (ITEM)_NewWeapon, 1, 0, 1);

//END_REGION
//END_REGION

//REGION Nested dialog helpers
IF
DialogEnded((DIALOGRESOURCE)Laezel_InParty2_Nested_DefaultQuestionBank_b8968875-52f1-26f8-7abf-21c8317fe194, _Id)
AND
DB_DialogPlayers(_Id, _Player, _)
THEN
ClearFlag((FLAG)ORI_Laezel_State_InPartySplitHelper_EnteredFromQuestionBank_718896be-2b04-47f9-9f04-d8333c53ac59, _Player);

//END_REGION

//REGION Suppression zone
IF
FlagSet((FLAG)Laezel_InParty2_Event_AfterDaisy_67bcb302-9a91-bf66-9806-d0a0cd7a2ee6, _, _)
THEN
NOT DB_PartyDialogSuppression_CustomDialogForCompanion(S_CRE_AstralPlaneArea_cc0ba8c0-ae50-4f12-8ea4-7db1ff8e62b0, (DIALOGRESOURCE)ORI_Laezel_AD_PartySuppressionAstralPrismBeforeDaisy_4921e68b-22e2-c04f-328a-a666bb94f0bf, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_PartyDialogSuppression_CustomDialogForCompanion(S_CRE_AstralPlaneArea_cc0ba8c0-ae50-4f12-8ea4-7db1ff8e62b0, (DIALOGRESOURCE)ORI_Laezel_AD_PartySuppressionAstralPrismAfterDaisy_4c3d81b4-a016-13d8-bca6-be7fe1345925, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

IF
FlagSet((FLAG)INT_EmperorRevealed_Event_SceneComplete_2fa4811a-8757-40e7-a0bb-dc7e210dd6e6, _, _)
THEN
NOT DB_PartyDialogSuppression_CustomDialogForCompanion((TRIGGER)S_INT_PartySuppressionZone_AstralPlane_d3f3f7e9-c70a-4322-9e86-716ccc649692, (DIALOGRESOURCE)ORI_Laezel_AD_PartySupressionIntermezzoBeforeEmperor_b87dbb11-8c36-e2bf-07bf-3565bf99e8ea, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_PartyDialogSuppression_CustomDialogForCompanion((TRIGGER)S_INT_PartySuppressionZone_AstralPlane_d3f3f7e9-c70a-4322-9e86-716ccc649692, (DIALOGRESOURCE)ORI_Laezel_AD_PartySupressionIntermezzoAfterEmperor_ebd2f902-f948-557c-5b21-920e01827350, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
//END_REGION

//REGION Journal Helpers
IF
QuestUpdateUnlocked(_, _QuestId, _StepId)
AND
DB_ORI_Laezel_QuestPriorityStepList(_Priority, _QuestId, _StepId)
AND
NOT DB_ORI_Laezel_QuestCurrentPriority(_QuestId, _Priority)
AND
DB_ORI_Laezel_QuestCurrentPriority(_QuestId, _PreviousPriority)
THEN
NOT DB_ORI_Laezel_QuestCurrentPriority(_QuestId, _PreviousPriority);

IF
QuestUpdateUnlocked(_, _QuestId, _StepId)
AND
DB_ORI_Laezel_QuestPriorityStepList(_Priority, _QuestId, _StepId)
AND
NOT DB_ORI_Laezel_QuestCurrentPriority(_QuestId, _Priority)
THEN
DB_ORI_Laezel_QuestCurrentPriority(_QuestId, _Priority);

QRY
QRY_ORI_Laezel_Journal_CheckObjectivePriority((STRING)_QuestId,(STRING)_StepId)
AND
DB_ORI_Laezel_QuestPriorityStepList(_DesiredPriority, _QuestId, _StepId)
AND
DB_ORI_Laezel_QuestCurrentPriority(_QuestId, _ReachedPriority)
AND
_DesiredPriority >= _ReachedPriority
THEN
DB_NOOP(1);

PROC
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)_Character, (STRING)_QuestId, (STRING)_StepId)
AND
QRY_ORI_Laezel_Journal_CheckObjectivePriority(_QuestId, _StepId)
THEN
QuestUpdate(_Character, _QuestId, _StepId);

QRY
QRY_ORI_Laezel_PartyHasOrphicHammer()
AND
DB_Players(_Player)
AND
GetFlag((FLAG)GLO_Monitor_State_HasOrphicHammer_29842214-5482-dc25-fc89-02e474d7d96b, _Player, 1)
THEN
DB_NOOP(1);

QRY
QRY_ORI_Laezel_VossInAct3()
AND
NOT DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
THEN
DB_NOOP(1);

QRY
QRY_ORI_Laezel_CurrentObjective_GetOrphicHammer()
AND
DB_ORI_COM_Laezel_GetOrphicHammerQuestSteps(_Step)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", _Step, 1)
THEN
DB_NOOP(1);

QRY
QRY_ORI_Laezel_CurrentObjective_DealWithOrpheusSteps()
AND
DB_ORI_COM_Laezel_DealWithOrpheusQuestSteps(_Step)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", _Step, 1)
THEN
DB_NOOP(1);
//END_REGION

//REGION Journal: COMPANION
// - 1000 - ORI_COM_Laezel_HelpFindCreche
PROC
PROC_CheckFirstTimeRecruited((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag((FLAG)ORI_LaezelRecruitment_State_CrashVersionInitiated_a80f2bd8-ffa1-4065-a92a-d01d59907637)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "RecruitedLaezel_Beach");


// - 1100 - ORI_COM_Laezel_FindZorru
PROC
PROC_CheckFirstTimeRecruited((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag(ORI_LaezelRecruitment_State_ChapelVersionInitiated_e6015bdf-276e-47b2-9a43-9bc0c981e1ad)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "RecruitedLaezel_Cage");

IF
DialogEnded((DIALOGRESOURCE)DEN_ThingLikeMe_PAD_AfterKid_485e8a75-a3c3-76ae-7923-f34e96756f35,_)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "FoundOutAboutZorru");

// - 1200 - ORI_COM_Laezel_SpeakToZorru
IF
FlagSet(ORI_Laezel_Quest_AskedZevlorAboutZorru_aa2a0127-dd70-45c1-bf18-53f0493031ba, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AskedZevlorAboutZorru");

IF
DialogEnded(DEN_General_TieflingGuard11_5285ea7c-7994-ba01-02c7-fa05017342ee,_)
AND
NOT DB_Avatars(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag(ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,"ORI_COM_Laezel","FoundZorruLZAbsent");


// - 1300 - ORI_COM_Laezel_ContinueCrecheSearch
IF
DB_Dead(S_DEN_Tiefling_011_77439e86-3f60-4456-bd55-931e2f45654f)
AND
DB_Players(_Player)
AND
DB_Sees(_Player, S_DEN_Tiefling_011_77439e86-3f60-4456-bd55-931e2f45654f)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(_Player, "ORI_COM_Laezel", "ZorruDied");

IF
FlagSet((FLAG)ORI_Laezel_Quest_ZorruLeft_f2a667a1-b1c9-4ead-97c3-54cccf099462, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ZorruLeft");

IF
FlagSet((FLAG)ORI_Laezel_Quest_SawDragonRider_b82787bc-316b-417a-ae95-a1abc1f7116a, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SawDragonRider");

IF
FlagSet((FLAG)ORI_Laezel_Quest_GotNoInfoFromZorru_2780a235-1089-4135-aa37-6fa03a0467a8, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotNoInfoFromZorru");

IF
FlagSet((FLAG)ORI_Laezel_Quest_GotNoInfoFromZorru_2780a235-1089-4135-aa37-6fa03a0467a8, _, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotNoInfoFromZorruWithoutKnowingHim");

PROC
PROC_State_Changed(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", _ZorruGoneState)
AND
DB_DEN_ZorruGoneState(_ZorruGoneState)
AND
DB_GlobalFlag(ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578)
THEN
DB_ORI_Laezel_ZorruLeft(1);

IF
DB_DEN_PlayerInDen(_Player)
AND
DB_Players(_Player)
AND
DB_ORI_Laezel_ZorruLeft(1)
AND
DB_GlobalFlag(ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578)
THEN
SetFlag(ORI_Laezel_Quest_ZorruLeft_f2a667a1-b1c9-4ead-97c3-54cccf099462,S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

IF
DialogEnded(_Dialog, _Id)
AND
DB_DEN_ThingLikeMe_OriginDialogs(_Dialog)
AND
GetFlag(ORI_Laezel_Quest_ZorruMarkedMap_4a9b6719-5f2d-7938-4dde-46605707981f, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0)
AND
GetFlag(ORI_Laezel_Quest_ZorruPointedWay_f4e84bd1-3352-8545-3c53-9fa62591f5c0, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0)
THEN
SetFlag(ORI_Laezel_Quest_GotNoInfoFromZorru_2780a235-1089-4135-aa37-6fa03a0467a8, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);


// - 1400 - ORI_COM_Laezel_FindChokepoint
IF
FlagSet((FLAG)ORI_Laezel_Quest_SawDragonRider_b82787bc-316b-417a-ae95-a1abc1f7116a, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_Knows_GithNearMountainPass_5c4cf0c3-b449-8928-6865-4effff2d4beb)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SawDragonRider_KnowsAboutGithyankiPatrol");

IF
FlagSet((FLAG)ORI_Laezel_Knows_GithNearMountainPass_5c4cf0c3-b449-8928-6865-4effff2d4beb, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ZorruMarkedMap");

IF
FlagSet((FLAG)ORI_Laezel_Knows_GithNearMountainPass_5c4cf0c3-b449-8928-6865-4effff2d4beb, _, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ZorruMarkedMapWithoutKnowingAboutHim");

IF
FlagSet((FLAG)ORI_Laezel_Quest_TalkedToDeadTiefling_2dcfd3d8-d17d-461d-acf6-652940194202, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToDeadTiefling");


// - 1500 - ORI_COM_Laezel_HelpFindCrecheLocation
PROC
PROC_PLA_GithChokepoint_LaezelRunToKnight(_)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "LaezelRanToKnight");

PROC
PROC_GLO_GithChokepoint_Outcome(1)
AND
NOT DB_GlobalFlag(PLA_GithChokepoint_State_VossRevealedLocation_8e527ca3-eb01-4fe3-acb3-231c8ad18fcb)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ResolvedPeaceNoCreche");

PROC
PROC_GLO_GithChokepoint_Outcome(0)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ChokepointCombatStarted");


// - 1600 - ORI_COM_Laezel_CheckGithBodies
IF
FlagSet((FLAG)PLA_GithChokepoint_Event_AllGithsDefeated_b329e2d8-31c8-4861-ae87-224e86f51682, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ChokepointDefeated");


PROC
PROC_CheckFirstTimeRecruited((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag(ORI_LaezelRecruitment_State_PlainsVersionInitiated_59bda4f5-708b-4f23-aaba-d5f387ae95c2)
AND
NOT DB_GlobalFlag((FLAG)GLO_GithChokepoint_Knows_DecipheredMap_604768b9-c983-414d-8c3b-ba1dee3da387)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "RecruitedLaezel_Plains");


// - 1700 - ORI_COM_Laezel_TravelToMountains
IF
FlagSet((FLAG)GLO_GithChokepoint_Knows_DecipheredMap_604768b9-c983-414d-8c3b-ba1dee3da387, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ReadCrecheMap");

PROC
PROC_PLA_GithChokepoint_CheckStartWRD()
AND
NOT DB_GlobalFlag(PLA_GithChokepoint_Event_AllGithsDefeated_b329e2d8-31c8-4861-ae87-224e86f51682)
AND
DB_GlobalFlag(PLA_GithChokepoint_State_VossRevealedLocation_8e527ca3-eb01-4fe3-acb3-231c8ad18fcb)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ResolvedPeaceCreche");

PROC
PROC_CheckFirstTimeRecruited((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag(ORI_LaezelRecruitment_State_PlainsVersionInitiated_59bda4f5-708b-4f23-aaba-d5f387ae95c2)
AND
DB_GlobalFlag((FLAG)GLO_GithChokepoint_Knows_DecipheredMap_604768b9-c983-414d-8c3b-ba1dee3da387)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "RecruitedLaezel_PlainsAfterMap");


// - 1800 - ORI_COM_Laezel_LookForClues
IF
LevelLoaded("CRE_Main_A")
AND
DB_GlobalFlag((FLAG)ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "InCrecheRegionWIthHints");


// - 1900 - ORI_COM_Laezel_FindCrecheEntrance
IF
DialogEnded((DIALOGRESOURCE)CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SawGithyankiAtGates");

PROC
PROC_GLO_DefeatCounter_AllDefeated("ORI_Laezel_GithyankiAtGates")
AND
DB_GlobalFlag((FLAG)ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "KilledGithyankiAtGates_KnowsLocation");

PROC
PROC_GLO_DefeatCounter_AllDefeated("ORI_Laezel_GithyankiAtGates")
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "KilledGithyankiAtGates_DoesNotKnowLocation");

IF
FlagSet((FLAG)ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2, _, _)
AND
DB_CurrentLevel("CRE_Main_A")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "FoundCrecheLocationNoHints");

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_MarkingsDialogPlayed_437fd9d6-37ef-4dd3-b5e2-e21877045e2f)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_StayedBehindInCreche_9705545c-fb54-4ff4-b16b-3326cce76dd8)
AND
QuestUpdateIsUnlocked(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "FoundCrecheLocationNoHints", 0)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "FoundCrecheLocationWithHints");

PROC
PROC_CheckFirstTimeRecruited((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_RecruitmentInCrecheActive_674e1fbb-7174-4c62-9581-08c67aeeaaa4)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_StayedBehindInCreche_9705545c-fb54-4ff4-b16b-3326cce76dd8)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "FoundCrecheLocation_RegroupedWithLaezel");

PROC
PROC_CheckFirstTimeRecruited((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_RecruitmentInCrecheActive_674e1fbb-7174-4c62-9581-08c67aeeaaa4)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_StayedBehindInCreche_9705545c-fb54-4ff4-b16b-3326cce76dd8)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "RecruitedLaezel_Creche");


// - 2000 - ORI_COM_Laezel_FindCureInCreche.
IF
FlagSet((FLAG)ORI_Laezel_Knows_FoundCreche_1ea76d79-24c5-4d63-a9cd-178266f1673d, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "EnteredCreche");

IF
FlagSet((FLAG)CRE_UpperGuards_State_MainCheckpointAllDefeated_6071ad98-7d68-41ca-a0c4-797100d77c04, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_UpperGuards_State_HiddenCheckpointAllDefeated_76b1a59b-0749-4ae8-9ffa-53ee1653dba9)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AttackedByCheckpointGuardsInCreche");

IF
FlagSet((FLAG)CRE_UpperGuards_State_HiddenCheckpointAllDefeated_76b1a59b-0749-4ae8-9ffa-53ee1653dba9, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_UpperGuards_State_MainCheckpointAllDefeated_6071ad98-7d68-41ca-a0c4-797100d77c04)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AttackedByCheckpointGuardsInCreche");

PROC
PROC_StateSet_Defeated(S_CRE_Doctor_c04c1977-d53f-4b5c-a29d-2e8d75024768)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "DefeatedDoctor");

IF
FlagSet((FLAG)CRE_GithInfirmary_State_PlayerVisited_6ff86231-2957-4b42-873e-3911adaa5458, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "FoundInfirmary");

IF
FlagSet((FLAG)ORI_Laezel_Knows_FoundCreche_1ea76d79-24c5-4d63-a9cd-178266f1673d, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "EnteredCreche");

IF
FlagSet((FLAG)CRE_GithInfirmary_State_DoctorWaitsAtDevice_2b20d248-1378-432b-88c6-f5b052107afd, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpokeToDoctor_WaitingAtDevice");

IF
DB_GlobalFlag((FLAG)CRE_UpperGuards_State_GainedAccess_764df691-d1f0-4bde-ba36-73c4abe6a4e7)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AttackedByCheckpointGuardsInCreche", 0)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SentToInfirmary", 0)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GainedAccess");

IF
DialogEnded((DIALOGRESOURCE)CRE_GithInfirmary_Doctor_9d7953d8-4b2c-93a7-25ab-094c0ed931cd, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_DoctorWaitsAtDevice_2b20d248-1378-432b-88c6-f5b052107afd)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpokeToDoctor_NotWaiting");

// - 2010 - ORI_COM_Laezel_GoToInfirmary

IF
FlagSet((FLAG)CRE_ChainofCommand_ToldReportToInfirmary_5c8cfe96-4428-417e-87de-ce1012f1dc30, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SentToInfirmary");

// - 2100 - ORI_COM_Laezel_TalkToLaezelAfterZaithisk
PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
GetFlag((FLAG)CRE_GithInfirmary_State_CharacterUsedDevice_23fd1f32-7850-466e-a77a-75cd48bdaa21, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "UsedDevice_LaezelUsedIt");

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
GetFlag((FLAG)CRE_GithInfirmary_State_CharacterUsedDevice_23fd1f32-7850-466e-a77a-75cd48bdaa21, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0)
AND
DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_LaezelTookPartInDevice_7ea4b4b7-06a4-44f6-aca6-75a1da537ebd)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "UsedDevice_PlayerRefusedLaezel");

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
NOT DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "UsedDevice_UsedWithoutLaezelAround");


// - 2200 - ORI_COM_Laezel_ReportToInquisitor
IF
FlagSet((FLAG)ORI_Laezel_State_WRD_PostZaithisk_0577aa84-1760-4dca-88d7-bac71ff76847, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ReportToInquisitior");


// - 2300 - ORI_COM_Laezel_PermaDefeatInquisitor
IF
EnteredCombat(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _CombatID)
AND
DB_Players(_Player)
AND
DB_Is_InCombat(_Player, _CombatID)
AND
NOT DB_GlobalFlag((FLAG)CRE_ChainOfCommand_State_SpokeToVlaakith_ee0ba0f7-26a3-4d45-a6fe-c9c1a013f7eb)
AND
NOT DB_GlobalFlag((FLAG)CRE_ChainOfCommand_Hasmet_Templar_54f974b4-df64-4889-8741-bf464f61cb96)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "PermaDefeatInquisitor_NoDialog");

IF
EnteredCombat(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _CombatID)
AND
DB_Players(_Player)
AND
DB_Is_InCombat(_Player, _CombatID)
AND
NOT DB_GlobalFlag((FLAG)CRE_ChainOfCommand_State_SpokeToVlaakith_ee0ba0f7-26a3-4d45-a6fe-c9c1a013f7eb)
AND
DB_GlobalFlag((FLAG)CRE_ChainOfCommand_Hasmet_Templar_54f974b4-df64-4889-8741-bf464f61cb96)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "PermaDefeatInquisitor");


// - 2400 - ORI_COM_Laezel_BackToInquisitorsOffice
IF
DB_PermaDefeated(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c)
THEN
TimerLaunch("ORI_Laezel_State_PermaDefeatedTemplar_Delay", 1000); //Added to allow the Vlaakith dialog to start. If it doesn't start, we do a quest update to get back to the office.

IF
TimerFinished("ORI_Laezel_State_PermaDefeatedTemplar_Delay")
AND
NOT DB_GlobalFlag((FLAG)CRE_ChainOfCommand_State_SpokeToVlaakith_ee0ba0f7-26a3-4d45-a6fe-c9c1a013f7eb)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "BackToInquisitor_InquisitorDead");


// - 2500 - ORI_COM_Laezel_VlaakithsCommand
IF
FlagSet((FLAG)CRE_AstralPrison_State_AstralPrisonWasEntered_2203e87a-6c7b-4aba-b2e8-e22ed96b9762, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "EnteredArtefact");

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)CRE_ChainOfCommand_State_PlanecasterActive_5e5e9cb6-41d8-4a93-942d-3dca4d357561)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_ConvincedToSideWithPlayerAgainstInquisitor_a1279e2b-04d4-4093-97f2-3c3603153d2c)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_LaezelWasInCampVlaakithBetrayal_0a32e664-a968-4a1f-a8cd-ca0b2588444a)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpokeToVlaakith_LaezelConvinced");

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)CRE_ChainOfCommand_State_PlanecasterActive_5e5e9cb6-41d8-4a93-942d-3dca4d357561)
AND
DB_GlobalFlag((FLAG)CRE_ChainOfCommand_State_LaezelWaitsAtPlanecaster_e25eb1e0-739e-489e-a1df-d2468682e9b3)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpokeToVlaakith_LaezelAtPlanecaster");

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)CRE_ChainOfCommand_State_PlanecasterActive_5e5e9cb6-41d8-4a93-942d-3dca4d357561, (DIALOGRESOURCE)CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_LaezelWasInCampVlaakithBetrayal_0a32e664-a968-4a1f-a8cd-ca0b2588444a)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpokeToVlaakith_LaezelNotPresent");


// - 2600 - ORI_COM_Laezel_BackToCrecheFromAstral
IF
FlagSet((FLAG)CRE_AstralPrison_State_DaisyDialogDone_040dd254-113c-48b5-aa2e-87ec799e7141, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpokeToDaisy");


// - 2700 - ORI_COM_Laezel_BackToCrecheFromAstral
IF
FlagSet((FLAG)CRE_AstralPrison_Event_LeftAstralPlane_58ec28f6-be1a-4044-8fbf-4229d8482bac, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_Templar_State_Permadefeated_4d8321fe-ec33-4598-927a-c4fc0812ae3a)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "DefeatInquisitor_AfterAstral");


// - 2800 - ORI_COM_Laezel_TalkToLaezelAboutBetrayal
IF
FlagSet((FLAG)CRE_ChainOfCommand_State_LeftInquisitorOfficeBeforeEnteringAstral_f4049c49-d505-4ddf-a790-45cc29eafabb, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithBetrayal_LeftRoomWithoutEntering");

IF
FlagSet((FLAG)CRE_Templar_State_Permadefeated_4d8321fe-ec33-4598-927a-c4fc0812ae3a, _, _)
THEN
DB_ORI_Laezel_Journal_InquisitorConflictDone(1);

IF
EnteredCombat(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _CombatID)
AND
DB_Players(_Player)
AND
DB_Is_InCombat(_Player, _CombatID)
AND
DB_GlobalFlag((FLAG)CRE_AstralPrison_Event_LeftAstralPlane_58ec28f6-be1a-4044-8fbf-4229d8482bac)
THEN
DB_ORI_Laezel_Journal_InquisitorCombatID(_CombatID);

IF
SwitchedCombat(_, _OldCombatID, _NewCombatID)
AND
DB_ORI_Laezel_Journal_InquisitorCombatID(_OldCombatID)
THEN
NOT DB_ORI_Laezel_Journal_InquisitorCombatID(_OldCombatID);
DB_ORI_Laezel_Journal_InquisitorCombatID(_NewCombatID);

IF
CombatEnded(_CombatID)
AND
DB_ORI_Laezel_Journal_InquisitorCombatID(_CombatID)
THEN
DB_ORI_Laezel_Journal_InquisitorConflictDone(1);

IF
DB_GlobalFlag(CRE_AstralPrison_Event_LeftAstralPlane_58ec28f6-be1a-4044-8fbf-4229d8482bac)
AND
DB_ORI_Laezel_Journal_InquisitorConflictDone(1)
AND
DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
QRY_OnlyOnce("ORI_Laezel_Journal_VlaakithBetrayal_Done")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithBetrayal_LaezelPresent");

IF
DB_GlobalFlag(CRE_AstralPrison_Event_LeftAstralPlane_58ec28f6-be1a-4044-8fbf-4229d8482bac)
AND
DB_ORI_Laezel_Journal_InquisitorConflictDone(1)
AND
NOT DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
QRY_OnlyOnce("ORI_Laezel_Journal_VlaakithBetrayal_Done")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithBetrayal_LaezelNotPresent");


// - 2900 - ORI_COM_Laezel_FindCure_AfterBetrayal
IF
DialogEnded((DIALOGRESOURCE)Laezel_InParty2_Nested_VlaakithBetrayal_87279ca9-d357-2a30-d1e4-e3a136e4e3ae, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "FindCure_AfterBetrayal");

IF
NestedDialogPlayed((DIALOGRESOURCE)Laezel_InParty2_Nested_VlaakithBetrayal_87279ca9-d357-2a30-d1e4-e3a136e4e3ae, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "FindCure_AfterBetrayal");


// - 3000 - ORI_COM_Laezel_TalkToLaezelAboutWhatsNext
IF
FlagSet((FLAG)CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "CrecheDestroyed_NothingDone");

IF
FlagSet((FLAG)CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d, _, _)
AND
DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "CrecheDestroyed_ZaithiskDoneVlaakithNotDone");

IF
FlagSet((FLAG)CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "CrecheDestroyed_ZaithiskNotDoneVlaakithDone");


// - 3100 - ORI_COM_Laezel_GiveTime
IF
DB_GlobalFlag((FLAG)Laezel_InParty_Event_DiscussedVlaakithBetrayal_af0ad422-970f-43d5-852d-d1551cdc6231)
AND
DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "CrecheFinished");


// - 3200 - ORI_COM_Laezel_UnableToFinishCreche
IF
DialogEnded((DIALOGRESOURCE)CRE_Laezel_WRD_PostCrecheDestruction_379c8d83-89d6-18dd-c48a-75a360f8a76c, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "CrecheUnableToBeFinished");

IF
NestedDialogPlayed((DIALOGRESOURCE)CRE_Laezel_WRD_PostCrecheDestruction_379c8d83-89d6-18dd-c48a-75a360f8a76c, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "CrecheUnableToBeFinished");


// - 3300 - ORI_COM_Laezel_PointOfNoReturnNoCreche
IF
FlagSet((FLAG)Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "PointOfNoReturnReachedWithoutCreche");

// - 3400 - ORI_COM_Laezel_DealWithAbsolute
IF
DialogEnded((DIALOGRESOURCE)GLO_Laezel_WRD_ProgressInAct2WithoutCreche_aa6fdbc8-6a7f-dd46-4a6f-366e36eeb4ab, _)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "PointOfNoReturnReachedWithoutCreche", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "DealWithAbsolute");

IF
NestedDialogPlayed((DIALOGRESOURCE)GLO_Laezel_WRD_ProgressInAct2WithoutCreche_aa6fdbc8-6a7f-dd46-4a6f-366e36eeb4ab, _)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "PointOfNoReturnReachedWithoutCreche", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "DealWithAbsolute");


// - 3500 - ORI_COM_Laezel_MakeUpToVlaakith
IF
DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_RefusedVossInAct2_7ff16fd5-fa94-4ae7-ba2d-e4cef09c9b82)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "KilledVoss");


// - 3600 - ORI_COM_Laezel_TravelToBaldursGate
IF
FlagSet((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AgreedVoss");

IF
GameBookInterfaceClosed(_VossNote, _)
AND
DB_GLO_VossContactLetter(_VossNote)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VossContact");

IF
DB_PermaDefeated(S_MOO_Ketheric_e9918f3e-5b87-40a3-a9bd-61545151573f)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "PointOfNoReturnReachedWithoutCreche", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "KilledKetheric");


// - 3700 - ORI_COM_Laezel_TalkToLaezelAboutOrpheus
IF
ReadyCheckPassed("INT_EmperorRevealed_ReturnReadyCheck")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "FinishedIntermezzo");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "FinishedIntermezzo", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAboutOrpheus_FinishedIntermezzo_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "FinishedIntermezzo", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAboutOrpheus_FinishedIntermezzo_VlaakithPath");


// - 3800 - ORI_COM_Laezel_FindCluesAboutOrphicHammer
IF
DialogEnded((DIALOGRESOURCE)INT_Laezel_WRD_AboutOrpheusAfterIntermezzo_54bd43a1-faf4-0143-8d75-2318ea061fbc, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VossContact", 0)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossNotPresent_VlaakithPath");

IF
NestedDialogPlayed((DIALOGRESOURCE)INT_Laezel_WRD_AboutOrpheusAfterIntermezzo_54bd43a1-faf4-0143-8d75-2318ea061fbc, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VossContact", 0)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossNotPresent_VlaakithPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossNotPresent_VlaakithPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossNotPresent_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossNotPresent_VlaakithPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossNotPresent_VlaakithPath");


// - 3900 - ORI_COM_Laezel_FindVossContact
IF
DialogEnded((DIALOGRESOURCE)INT_Laezel_WRD_AboutOrpheusAfterIntermezzo_54bd43a1-faf4-0143-8d75-2318ea061fbc, _)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VossContact", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossContact_VlaakithPath");

IF
NestedDialogPlayed((DIALOGRESOURCE)INT_Laezel_WRD_AboutOrpheusAfterIntermezzo_54bd43a1-faf4-0143-8d75-2318ea061fbc, _)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VossContact", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossContact_VlaakithPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossContact_VlaakithPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossContact_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossContact_VlaakithPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossContact_VlaakithPath");


// - 4000 - ORI_COM_Laezel_FindVossInSC
IF
DialogEnded((DIALOGRESOURCE)INT_Laezel_WRD_AboutOrpheusAfterIntermezzo_54bd43a1-faf4-0143-8d75-2318ea061fbc, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossInSC_OrpheusPath");

IF
NestedDialogPlayed((DIALOGRESOURCE)INT_Laezel_WRD_AboutOrpheusAfterIntermezzo_54bd43a1-faf4-0143-8d75-2318ea061fbc, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossInSC_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossInSC_OrpheusPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossInSC_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkedToLaezelAboutOrpheus_VossInSC_OrpheusPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkedToLaezelAboutOrpheus_VossInSC_VlaakithPath");


// - 4100 - ORI_COM_Laezel_SpeakToRaphael
IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_ThreeWay_VossScene_3500e60b-d165-934d-e96d-a3c9591f0133, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpeakToRaphael");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpeakToRaphael", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_SpeakToRaphael_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpeakToRaphael", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_SpeakToRaphael_VlaakithPath");


// - 4200 - ORI_COM_Laezel_TalkToLaezelAfterRaphael
IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_Raphael_SoloScene_e95ac422-e05d-f119-68fd-e382d71f7c79, _)
AND
DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AfterRaphael_SignedDeal");

IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_Raphael_SoloScene_e95ac422-e05d-f119-68fd-e382d71f7c79, _)
AND
DB_GlobalFlag((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2)
AND
NOT DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AfterRaphael_NoDeal");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_BeganSoloScene_1048973a-9ed0-89e5-ce68-11e03fafc22c)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAfterRaphael_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_BeganSoloScene_1048973a-9ed0-89e5-ce68-11e03fafc22c)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAfterRaphael_VlaakithPath");


// - 4300 - ORI_COM_Laezel_SpeakToVossInSC
IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, _)
AND
NOT DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
NOT DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AfterRaphaelNoDeal_VossInSC_OrpheusPath");

IF
NestedDialogPlayed((DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, _)
AND
NOT DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
NOT DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AfterRaphaelNoDeal_VossInSC_OrpheusPath");


// - 4400 - ORI_COM_Laezel_KillVossNoHammer
IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, _)
AND
NOT DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_ORI_Laezel_VossInAct3()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AfterRaphaelNoDeal_VossInSC_VlaakithPath");

IF
NestedDialogPlayed((DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, _)
AND
NOT DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_ORI_Laezel_VossInAct3()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AfterRaphaelNoDeal_VossInSC_VlaakithPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AfterRaphaelNoDeal_VossInSC_OrpheusPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_AfterRaphaelNoDeal_VossInSC_VlaakithPath");


// - 4500 - ORI_COM_Laezel_SpeakToVossInSC_Switched
IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AfterRaphaelNoDeal_VossInSC_VlaakithPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_AfterRaphaelNoDeal_VossInSC_OrpheusPath");


// - 4550 - ORI_COM_Laezel_FindKeyToOrpheus
IF
DB_InRegion(_Player, S_WYR_SharessCaress_RaphaelRoom_SUB_71f24fd6-33e5-4b1d-8341-e7c9f448731d)
AND
DB_Players((CHARACTER)_Player)
AND
DB_GLO_Voss_VossLeftSCWithoutMeetingPlayer(1)
AND
NOT DB_GlobalFlag((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_OnlyOnce("ORI_COM_Laezel_VossGoneFromSC_StepActivated")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VossIsGoneFromSC_OrpheusPath");

IF
DB_InRegion(_Player, S_WYR_SharessCaress_RaphaelRoom_SUB_71f24fd6-33e5-4b1d-8341-e7c9f448731d)
AND
DB_Players((CHARACTER)_Player)
AND
DB_GLO_Voss_VossLeftSCWithoutMeetingPlayer(1)
AND
NOT DB_GlobalFlag((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_OnlyOnce("ORI_COM_Laezel_VossGoneFromSC_StepActivated")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VossIsGoneFromSC_VlaakithPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VossIsGoneFromSC_OrpheusPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_FindKeyToOrpheus_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VossIsGoneFromSC_VlaakithPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_FindKeyToOrpheus_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VossIsGoneFromSC_OrpheusPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_FindKeyToOrpheus_VlaakithPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VossIsGoneFromSC_VlaakithPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_FindKeyToOrpheus_VlaakithPath");


// - 4600 - ORI_COM_Laezel_GetOrphicHammer
IF
FlagSet((FLAG)WYR_RaphaelTango_Event_PlayerLiedToGetSword_84db2013-d9dc-b9d5-5837-73e90ddf4ca8, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpokeToVoss_NoDeal_LiedAboutTakingDeal");

IF
FlagSet((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpokeToVoss_OrpheusPath");

IF
FlagSet((FLAG)LOW_HouseOfHope_State_VisitedHouseOfHope_c8889a79-8277-48e9-afa0-e14f6359ea10, _, _)
AND
DB_GlobalFlag((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "EnteredHoH");

IF
FlagSet((FLAG)LOW_HouseOfHope_Event_SawMainTreasures_3a0552ac-db09-4f61-93d6-2c6f3be90d46, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SawHammer");

IF
FlagSet((FLAG)LOW_HouseOfHope_State_TreasureBlockerRemoved_e6b12fcb-de35-47c1-cd3a-427680bbc32c,_,_)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "HammerForceFieldDisabled");

IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, _)
AND
NOT DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
DB_GlobalFlag((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2)
AND
NOT QRY_ORI_Laezel_VossInAct3()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AfterRaphaelNoDeal_VossNotPresent");

IF
NestedDialogPlayed((DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, _)
AND
NOT DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
DB_GlobalFlag((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2)
AND
NOT QRY_ORI_Laezel_VossInAct3()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AfterRaphaelNoDeal_VossNotPresent");

IF
DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
AND
NOT QRY_ORI_Laezel_PartyHasOrphicHammer()
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "KilledVossBeforeHammer_OrpheusPath");

IF
DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
AND
NOT QRY_ORI_Laezel_PartyHasOrphicHammer()
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "KilledVossBeforeHammer_VlaakithPath");

IF
FlagSet((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2, _, _)
AND
NOT DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_BeganSoloScene_1048973a-9ed0-89e5-ce68-11e03fafc22c)
AND
NOT DB_GlobalFlag((FLAG)LOW_HouseOfHope_State_VisitedHouseOfHope_c8889a79-8277-48e9-afa0-e14f6359ea10)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "LearnedAboutOrphicHammer");

IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_Voss_140953a8-5d79-c6d0-d691-52694b875bc2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
DB_GlobalFlag((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "LearnedAboutOrphicHammer");

IF
FlagSet((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2, _, _)
AND
NOT DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_BeganSoloScene_1048973a-9ed0-89e5-ce68-11e03fafc22c)
AND
DB_GlobalFlag((FLAG)LOW_HouseOfHope_State_VisitedHouseOfHope_c8889a79-8277-48e9-afa0-e14f6359ea10)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "LearnedAboutOrphicHammer_AlreadyInHoH");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_ORI_Laezel_CurrentObjective_GetOrphicHammer()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_SpeakToRaphael_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_ORI_Laezel_CurrentObjective_GetOrphicHammer()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_SpeakToRaphael_VlaakithPath");

IF
FlagSet((FLAG)LOW_DevilsFee_Knows_HelsikWayHoH_6beeb7f7-53ec-c6dc-0261-95b8d7c2fb4e, _, _)
AND
DB_GlobalFlag((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2)
AND
NOT DB_GlobalFlag((FLAG)LOW_HouseOfHope_State_VisitedHouseOfHope_c8889a79-8277-48e9-afa0-e14f6359ea10)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "LearnDevilsFeeEntrance");

IF
UseFinished(_, (ITEM)S_LOW_DevilsFee_GrimoireRitual_7a24e183-1870-47b8-add2-720db3bd3758, _)
AND
DB_GlobalFlag((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2)
AND
NOT DB_GlobalFlag((FLAG)LOW_HouseOfHope_State_VisitedHouseOfHope_c8889a79-8277-48e9-afa0-e14f6359ea10)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "LearnDevilsFeeEntrance");


// - 4650 - ORI_COM_Laezel_ShowVossHammer
IF
FlagSet((FLAG)ORI_Laezel_State_GotHammerFromHoH_8a8dd999-aa9e-42b2-9c84-e63b5eb6bc5e, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkToLaezelAfterGettingHammerFromHoH");

IF
FlagSet((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc, _, _)
AND
QRY_ORI_Laezel_VossInAct3()
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkToLaezelAfterGettingHammerFromHoH");


IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkToLaezelAfterGettingHammerFromHoH", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAfterGettingHammerFromHoH_VlaakithPath");


IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "TalkToLaezelAfterGettingHammerFromHoH", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_TalkToLaezelAfterGettingHammerFromHoH_OrpheusPath");


// - 4700 - ORI_COM_Laezel_ShowVossHammer
IF
FlagSet((FLAG)Laezel_InParty2_Event_DiscussedRaphaelsDealWithParty_60343d64-923c-49c9-a771-05f7a0706fdf, _, _)
AND
DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
QRY_ORI_Laezel_VossInAct3()
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSC_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_ORI_Laezel_VossInAct3()
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
AND
DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_BeganSoloScene_1048973a-9ed0-89e5-ce68-11e03fafc22c)
AND
DB_State_Current(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, "WYR_RaphaelTango_GithKnight", "TaproomWaiting")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSC_OrpheusPath");

IF
NestedDialogPlayed((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_ORI_Laezel_VossInAct3()
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
AND
DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_BeganSoloScene_1048973a-9ed0-89e5-ce68-11e03fafc22c)
AND
DB_State_Current(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, "WYR_RaphaelTango_GithKnight", "TaproomWaiting")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSC_OrpheusPath");

IF
DialogEnded((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
AND
NOT DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSewers_OrpheusPath");

IF
NestedDialogPlayed((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
AND
NOT DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSewers_OrpheusPath");


// - 4800 - ORI_COM_Laezel_KillVossGotHammer
IF
FlagSet((FLAG)Laezel_InParty2_Event_DiscussedRaphaelsDealWithParty_60343d64-923c-49c9-a771-05f7a0706fdf, _, _)
AND
DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
QRY_ORI_Laezel_VossInAct3()
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSC_VlaakithPath");

IF
DialogEnded((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_ORI_Laezel_VossInAct3()
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
AND
DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_BeganSoloScene_1048973a-9ed0-89e5-ce68-11e03fafc22c)
AND
DB_State_Current(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, "WYR_RaphaelTango_GithKnight", "TaproomWaiting")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSC_VlaakithPath");

IF
NestedDialogPlayed((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_ORI_Laezel_VossInAct3()
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
AND
DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_BeganSoloScene_1048973a-9ed0-89e5-ce68-11e03fafc22c)
AND
DB_State_Current(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, "WYR_RaphaelTango_GithKnight", "TaproomWaiting")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSC_VlaakithPath");

IF
DialogEnded((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
AND
NOT DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSewers_VlaakithPath");

IF
NestedDialogPlayed((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
AND
NOT DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSewers_VlaakithPath");


// - 4900 - ORI_COM_Laezel_ShowVossHammerSwitched
IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSewers_VlaakithPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_ShowVossHammer_OrpheusPath");


// - 5000 - ORI_COM_Laezel_KillVossGotHammerSwitched
IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossInSewers_OrpheusPath", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_KillVossGotHammer_VlaakithPath");


// - 5100 - ORI_COM_Laezel_DealWithOrpheus
IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, _)
AND
DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
NOT QRY_ORI_Laezel_VossInAct3()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossNotPresent");

IF
NestedDialogPlayed((DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, _)
AND
DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
NOT QRY_ORI_Laezel_VossInAct3()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossNotPresent");

IF
DialogEnded((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
AND
NOT DB_State_Current(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, "WYR_RaphaelTango_GithKnight", "TaproomWaiting")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossNotPresent");

IF
NestedDialogPlayed((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
AND
NOT DB_State_Current(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, "WYR_RaphaelTango_GithKnight", "TaproomWaiting")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossNotPresent");

IF
DialogEnded((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossNotPresent");

IF
NestedDialogPlayed((DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, _)
AND
DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammer_VossNotPresent");

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_ShowedVossTheHammer_5588f6a2-bb8c-4f91-a152-168492b9c09f, _)
AND
NOT DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_PlayerLiedToGetSword_84db2013-d9dc-b9d5-5837-73e90ddf4ca8)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_AttackedVossDuringDialogAct3_0757006a-f9c2-4096-8662-e9110c97ca67)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpokeToVoss_ShowedHammer");

IF
FlagSet((FLAG)WYR_RaphaelTango_Event_LiedToVoss_aac097cd-7a1a-9fa3-555b-707fe6a42af3, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "SpokeToVoss_LiedAboutNotHavingHammer");

IF
FlagSet((FLAG)END_IllithidOptions_State_ArrivedWithOrphicHammer_a350e277-55a7-4e03-9c14-db154b6c682e, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "EnteredAstralPlane_WithHammer");

IF
DialogEnded(END_IllithidOptions_EmperorProposal_6769199a-452f-5a13-9178-55a899cccf59, _)
AND
NOT DB_GlobalFlag((FLAG)END_IllithidOptions_State_ArrivedWithOrphicHammer_a350e277-55a7-4e03-9c14-db154b6c682e)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "EnteredAstralPlane_NoHammer");

IF
FlagSet((FLAG)END_IllithidOptions_State_PartyHasOrphicHammer_90e5e1a5-2f6b-4b30-948f-c342d6adced5, _, _)
AND
NOT DB_GlobalFlag((FLAG)END_IllithidOptions_State_ArrivedWithOrphicHammer_a350e277-55a7-4e03-9c14-db154b6c682e)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "GotHammerFromRaphaelInAstralPlane");

IF
FlagSet((FLAG)END_IllithidOptions_Event_TadpoleGroupDiscussion_55831e5e-9916-4099-a397-37f5e6967d2e, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "DiscussTadpole_OrpheusPath");

IF
FlagSet((FLAG)END_IllithidOptions_Event_TadpoleGroupDiscussion_55831e5e-9916-4099-a397-37f5e6967d2e, _, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "DiscussTadpole_VlaakithPath");

IF
DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
QRY_ORI_Laezel_PartyHasOrphicHammer()
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "KilledVossAfterHammer_OrpheusPath");

IF
DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
QRY_ORI_Laezel_PartyHasOrphicHammer()
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "KilledVossAfterHammer_VlaakithPath");

PROC
PROC_GLO_VossSewers_VossTeleportedOutAfterAttacked_Hook(_)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_PermaDefeated((CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "AttackedVossGotHammer");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_ORI_Laezel_CurrentObjective_DealWithOrpheusSteps()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_OrpheusPath_DealWithOrpheus");

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_ORI_Laezel_CurrentObjective_DealWithOrpheusSteps()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "VlaakithVisited_VlaakithPath_DealWithOrpheus");


// - 5200 - ORI_COM_Laezel_FinishBattle
IF
FlagSet((FLAG)END_IllithidOptions_State_AssimilatedOrpheus_5562cc3f-c168-48c9-87c1-1598a5c58961, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusAssimilated_OrpheusPath");

IF
FlagSet((FLAG)END_IllithidOptions_State_AssimilatedOrpheus_5562cc3f-c168-48c9-87c1-1598a5c58961, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
NOT DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusAssimilated_OrpheusPath_LaezelNotPresent");

IF
FlagSet((FLAG)END_IllithidOptions_State_AssimilatedOrpheus_5562cc3f-c168-48c9-87c1-1598a5c58961, _, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusAssimilated_VlaakithPath");

IF
FlagSet((FLAG)END_IllithidOptions_State_AssimilatedOrpheus_5562cc3f-c168-48c9-87c1-1598a5c58961, _, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
NOT DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusAssimilated_VlaakithPath_LaezelNotPresent");

IF
FlagSet((FLAG)END_IllithidOptions_State_OrpheusIsFree_3b747050-1be0-432e-9de6-e48faa4b74bb, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusFree_OrpheusPath");

IF
FlagSet((FLAG)END_IllithidOptions_State_OrpheusIsFree_3b747050-1be0-432e-9de6-e48faa4b74bb, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
NOT DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusFree_OrpheusPath_LaezelNotPresent");

IF
FlagSet((FLAG)END_IllithidOptions_State_OrpheusIsFree_3b747050-1be0-432e-9de6-e48faa4b74bb, _, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusFree_VlaakithPath");

IF
FlagSet((FLAG)END_IllithidOptions_State_OrpheusIsFree_3b747050-1be0-432e-9de6-e48faa4b74bb, _, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
NOT DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ResolvedAstralPrism_OrpheusFree_VlaakithPath_LaezelNotPresent");


// - 6000 - ORI_COM_Laezel_GoBackToMountainpass
IF
FlagSet((FLAG)ORI_Laezel_Knows_FoundCreche_1ea76d79-24c5-4d63-a9cd-178266f1673d, _, _)
AND
NOT DB_GlobalFlag((FLAG)GLO_Origin_PartOfTheTeam_Laezel_57d93a1d-4400-4307-845f-25d9a250d332)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "LaezelDied_GoBackToMountainpass");


// - 6100 - ORI_COM_Laezel_MissingAtMountainpass
IF
QuestUpdateUnlocked(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "LaezelDied_GoBackToMountainpass")
THEN
PROC_TriggerRegisterForPlayers((TRIGGER)S_ORI_Laezel_LaezelMissingArea_021b31d6-7959-4303-908b-8fd09be48de2);

IF
DB_InRegion(_Player, (TRIGGER)S_ORI_Laezel_LaezelMissingArea_021b31d6-7959-4303-908b-8fd09be48de2)
AND
DB_Players(_Player)
THEN
PROC_TriggerUnregisterForPlayers((TRIGGER)S_ORI_Laezel_LaezelMissingArea_021b31d6-7959-4303-908b-8fd09be48de2);
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "LaezelDied_MissingAtMountainpass");


// - COMPLETION
IF
DB_Sees(_Player, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_Players(_Player)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_DeadInSCL_8b0de2ba-cfdc-497b-be7e-9d059fbd8f72)
AND
QRY_OnlyOnce("ORI_COM_Laezel_SawLaezelDeadInSCL")
THEN
QuestUpdate((CHARACTER)_Player, "ORI_COM_Laezel", "LaezelDied_FoundShadowcursedInSCL");

IF
DB_PermaDefeated(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag(CAMP_LaezelBeforeDream_Event_AttackedLaezel_dffe4643-709e-ac8c-ad62-450db550ca61)
AND
DB_Avatars(_Avatar)
AND
QRY_OnlyOnce("ORI_COM_Laezel_KilledAfterSheTurnedOnUsAtCamp")
THEN
QuestUpdate(_Avatar, "ORI_COM_Laezel", "LaezelDied_KilledAtCampNight");

IF
DB_PermaDefeated(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag(CAMP_LaezelBeforeDream_Event_LaezelKilledPlayer_83012c3a-bce6-fd00-f1c9-51dc86eb49da)
AND
DB_Avatars(_Avatar)
AND
QRY_OnlyOnce("ORI_COM_Laezel_KilledAfterSheTurnedOnUsAtCamp")
THEN
QuestUpdate(_Avatar, "ORI_COM_Laezel", "LaezelDied_KilledAtCampNight");

IF
DB_PermaDefeated(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
TimerLaunch("ORI_LaezelDied_Generic_Delay", 1000);

IF
TimerFinished("ORI_LaezelDied_Generic_Delay")
AND
DB_Players(_Player)
THEN
QuestUpdate((CHARACTER)_Player, "ORI_COM_Laezel", "LaezelDied_Generic");

PROC
PROC_CAMP_LaezelBeforeDream_KillLaezel((GUIDSTRING)_Player)
THEN
QuestUpdate((CHARACTER)_Player, "ORI_COM_Laezel", "LaezelDied_KilledAtCampNight");

//Subquest - ProceedWithoutCreche
PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_CanProceedToAct3_64850ffe-e278-4742-91f2-3cecd77d1257, (DIALOGRESOURCE)GLO_Laezel_WRD_ProgressInAct2WithoutCreche_aa6fdbc8-6a7f-dd46-4a6f-366e36eeb4ab)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_Knows_FoundCreche_1ea76d79-24c5-4d63-a9cd-178266f1673d)
THEN
QuestUpdate((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ProceedWithoutCreche_LaezelConvincedWithoutVisitingCreche");

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_CanProceedToAct3_64850ffe-e278-4742-91f2-3cecd77d1257, (DIALOGRESOURCE)GLO_Laezel_WRD_ProgressInAct2WithoutCreche_aa6fdbc8-6a7f-dd46-4a6f-366e36eeb4ab)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_Knows_FoundCreche_1ea76d79-24c5-4d63-a9cd-178266f1673d)
THEN
QuestUpdate((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ProceedWithoutCreche_LaezelConvincedAfterVisitingCreche");

IF
FlagSet((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7, _, _)
AND
QuestIsAccepted((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel_SUB_ProceedWithoutCreche", 1)
THEN
QuestUpdate((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ProceedWithoutCreche_FinishedCreche");

IF
DB_PermaDefeated(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
QuestIsAccepted((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel_SUB_ProceedWithoutCreche", 1)
THEN
QuestUpdate((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ProceedWithoutCreche_LaezelPermaDefeated");

IF
FlagSet((FLAG)Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, _, _)
AND
QuestIsAccepted((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel_SUB_ProceedWithoutCreche", 1)
THEN
QuestUpdate((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_COM_Laezel", "ProceedWithoutCreche_ReachedPointOfNoReturn");

//END_REGION

//REGION Journal: AVATAR
// - 1000 - ORI_Avatar_Laezel_FindACreche
PROC
PROC_CRA_WakeupDone()
AND
DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
QuestUpdate((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "Start");


// - 1100 - ORI_Avatar_Laezel_FindZorru 

IF
DialogEnded((DIALOGRESOURCE)DEN_ThingLikeMe_PAD_AfterKid_485e8a75-a3c3-76ae-7923-f34e96756f35,_)
AND
DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "FoundOutAboutZorru");

// - 1200 - ORI_Avatar_Laezel_SpeakToZorru 

IF
FlagSet(ORI_Laezel_Quest_AskedZevlorAboutZorru_aa2a0127-dd70-45c1-bf18-53f0493031ba, _, _)
AND
DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "AskedZevlorAboutZorru");


// - 1300 - ORI_Avatar_Laezel_ContinueSearch
IF
DB_Dead(S_DEN_Tiefling_011_77439e86-3f60-4456-bd55-931e2f45654f)
AND
DB_Players(_Player)
AND
DB_Sees(_Player, S_DEN_Tiefling_011_77439e86-3f60-4456-bd55-931e2f45654f)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(_Player, "ORI_Avatar_Laezel", "ZorruDied");

IF
FlagSet((FLAG)ORI_Laezel_Quest_ZorruLeft_f2a667a1-b1c9-4ead-97c3-54cccf099462, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "ZorruLeft");

IF
FlagSet((FLAG)ORI_Laezel_Quest_SawDragonRider_b82787bc-316b-417a-ae95-a1abc1f7116a, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SawDragonRider");

IF
FlagSet((FLAG)ORI_Laezel_Quest_GotNoInfoFromZorru_2780a235-1089-4135-aa37-6fa03a0467a8, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "GotNoInfoFromZorru");

IF
FlagSet((FLAG)ORI_Laezel_Quest_GotNoInfoFromZorru_2780a235-1089-4135-aa37-6fa03a0467a8, _, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "GotNoInfoFromZorruWithoutKnowingHim");


// - 1400 - ORI_Avatar_Laezel_FindPatrol
IF
FlagSet((FLAG)ORI_Laezel_Quest_SawDragonRider_b82787bc-316b-417a-ae95-a1abc1f7116a, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_Knows_GithNearMountainPass_5c4cf0c3-b449-8928-6865-4effff2d4beb)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SawDragonRider_KnowsAboutGithyankiPatrol");

IF
FlagSet((FLAG)ORI_Laezel_Knows_GithNearMountainPass_5c4cf0c3-b449-8928-6865-4effff2d4beb, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "ZorruMarkedMap");

IF
FlagSet((FLAG)ORI_Laezel_Knows_GithNearMountainPass_5c4cf0c3-b449-8928-6865-4effff2d4beb, _, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "ZorruMarkedMapWithoutKnowingAboutHim");

IF
FlagSet((FLAG)ORI_Laezel_Quest_TalkedToDeadTiefling_2dcfd3d8-d17d-461d-acf6-652940194202, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "TalkedToDeadTiefling");


// - 1500 - ORI_Avatar_Laezel_HelpFindCrecheLocation
PROC
PROC_GLO_GithChokepoint_Outcome(1)
AND
NOT DB_GlobalFlag(PLA_GithChokepoint_State_VossRevealedLocation_8e527ca3-eb01-4fe3-acb3-231c8ad18fcb)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "ResolvedPeaceNoCreche");

PROC
PROC_GLO_GithChokepoint_Outcome(0)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "ChokepointCombatStarted");


// - 1600 - ORI_Avatar_Laezel_CheckGithBodies
IF
FlagSet((FLAG)PLA_GithChokepoint_Event_AllGithsDefeated_b329e2d8-31c8-4861-ae87-224e86f51682, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "ChokepointDefeated");


// - 1700 - ORI_Avatar_Laezel_TravelToMountains
IF
FlagSet((FLAG)GLO_GithChokepoint_Knows_DecipheredMap_604768b9-c983-414d-8c3b-ba1dee3da387, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "ReadCrecheMap");

PROC
PROC_PLA_GithChokepoint_CheckStartWRD()
AND
NOT DB_GlobalFlag(PLA_GithChokepoint_Event_AllGithsDefeated_b329e2d8-31c8-4861-ae87-224e86f51682)
AND
DB_GlobalFlag(PLA_GithChokepoint_State_VossRevealedLocation_8e527ca3-eb01-4fe3-acb3-231c8ad18fcb)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "ResolvedPeaceCreche");


// - 1800 - ORI_Avatar_Laezel_LookForCluesInMountains
IF
LevelLoaded("CRE_Main_A")
AND
DB_GlobalFlag((FLAG)ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "InCrecheRegionWIthHints");


// - 1900 - ORI_Avatar_Laezel_FindCrecheEntrance
IF
DialogEnded((DIALOGRESOURCE)CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SawGithyankiAtGates_KnowsLocation");

IF
DialogEnded((DIALOGRESOURCE)CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SawGithyankiAtGates_DoesNotKnowLocation");

PROC
PROC_GLO_DefeatCounter_AllDefeated("ORI_Laezel_GithyankiAtGates")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "PermaDefeatedGithyankiAtGates");

IF
FlagSet((FLAG)ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2, _, _)
AND
DB_CurrentLevel("CRE_Main_A")
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "FoundCrecheLocationNoHints");

IF
AutomatedDialogEnded((DIALOGRESOURCE)ORI_Laezel_AD_CrecheMarkings_02323c18-5b00-54af-1c47-317a7d6d89c5, _)
AND
QuestUpdateIsUnlocked(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "FoundCrecheLocationNoHints", 0)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "FoundCrecheLocationWithHints");


// - 2000 - ORI_COM_Laezel_FindCureInCreche.
IF
FlagSet((FLAG)ORI_Laezel_Knows_FoundCreche_1ea76d79-24c5-4d63-a9cd-178266f1673d, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "EnteredCreche");

IF
FlagSet((FLAG)CRE_UpperGuards_State_MainCheckpointAllDefeated_6071ad98-7d68-41ca-a0c4-797100d77c04, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_UpperGuards_State_HiddenCheckpointAllDefeated_76b1a59b-0749-4ae8-9ffa-53ee1653dba9)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "PermaDefeatedCheckpointGuardsInCreche");

IF
FlagSet((FLAG)CRE_UpperGuards_State_HiddenCheckpointAllDefeated_76b1a59b-0749-4ae8-9ffa-53ee1653dba9, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_UpperGuards_State_MainCheckpointAllDefeated_6071ad98-7d68-41ca-a0c4-797100d77c04)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "PermaDefeatedCheckpointGuardsInCreche");


// - 2050 - ORI_Avatar_Laezel_GoToInfirmary
IF
FlagSet((FLAG)CRE_ChainofCommand_ToldReportToInfirmary_5c8cfe96-4428-417e-87de-ce1012f1dc30, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SentToInfirmary");


// - 2100 - ORI_Avatar_Laezel_SpeakToDoctor
IF
FlagSet((FLAG)CRE_GithInfirmary_State_PlayerVisited_6ff86231-2957-4b42-873e-3911adaa5458, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "FoundInfirmary");

IF
DialogEnded((DIALOGRESOURCE)CRE_GithInfirmary_Doctor_9d7953d8-4b2c-93a7-25ab-094c0ed931cd, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_DoctorWaitsAtDevice_2b20d248-1378-432b-88c6-f5b052107afd)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SpokeToDoctor_NotWaiting");


// - 2200 - ORI_Avatar_Laezel_SitInZaithisk
PROC
PROC_StateSet_Defeated(S_CRE_Doctor_c04c1977-d53f-4b5c-a29d-2e8d75024768)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "DefeatedDoctor");

IF
FlagSet((FLAG)CRE_GithInfirmary_State_DoctorWaitsAtDevice_2b20d248-1378-432b-88c6-f5b052107afd, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SpokeToDoctor_WaitingAtDevice");


// - 2300 - ORI_Avatar_Laezel_ReportToInquisitor
PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
GetFlag((FLAG)CRE_GithInfirmary_State_CharacterUsedDevice_23fd1f32-7850-466e-a77a-75cd48bdaa21, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "UsedDevice_LaezelUsedIt");

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
GetFlag((FLAG)CRE_GithInfirmary_State_CharacterUsedDevice_23fd1f32-7850-466e-a77a-75cd48bdaa21, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "UsedDevice_OtherUsedIt");


// - 2400 - ORI_Avatar_Laezel_PermaDefeatInquisitor
IF
EnteredCombat(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _CombatID)
AND
DB_Players(_Player)
AND
DB_Is_InCombat(_Player, _CombatID)
AND
NOT DB_GlobalFlag((FLAG)CRE_ChainOfCommand_State_SpokeToVlaakith_ee0ba0f7-26a3-4d45-a6fe-c9c1a013f7eb)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "PermaDefeatInquisitor");


// - 2500 - ORI_Avatar_Laezel_BackToInquisitor
//Timer started in COM quest
IF
TimerFinished("ORI_Laezel_State_PermaDefeatedTemplar_Delay")
AND
NOT DB_GlobalFlag((FLAG)CRE_ChainOfCommand_State_SpokeToVlaakith_ee0ba0f7-26a3-4d45-a6fe-c9c1a013f7eb)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "BackToInquisitor_InquisitorDead");


// - 2600 - ORI_Avatar_Laezel_VlaakithsCommand
PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)CRE_ChainOfCommand_State_PlanecasterActive_5e5e9cb6-41d8-4a93-942d-3dca4d357561)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SpokeToVlaakith");

IF
FlagSet((FLAG)CRE_AstralPrison_State_AstralPrisonWasEntered_2203e87a-6c7b-4aba-b2e8-e22ed96b9762, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "EnteredArtefact");


// - 2700 - ORI_COM_Laezel_BackToCrecheFromAstral
IF
FlagSet((FLAG)CRE_AstralPrison_State_DaisyDialogDone_040dd254-113c-48b5-aa2e-87ec799e7141, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SpokeToDaisy");


// - 2800 - ORI_COM_Laezel_BackToCrecheFromAstral
IF
FlagSet((FLAG)CRE_AstralPrison_Event_LeftAstralPlane_58ec28f6-be1a-4044-8fbf-4229d8482bac, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_Templar_State_Permadefeated_4d8321fe-ec33-4598-927a-c4fc0812ae3a)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "DefeatInquisitor_AfterAstral");


// - 2900 - ORI_Avatar_Laezel_SearchForCureAfterBetrayal
IF
FlagSet((FLAG)CRE_ChainOfCommand_State_LeftInquisitorOfficeBeforeEnteringAstral_f4049c49-d505-4ddf-a790-45cc29eafabb, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "FindCure_LeftRoomAfterVlaakithCommand");

IF
DB_GlobalFlag(CRE_AstralPrison_Event_LeftAstralPlane_58ec28f6-be1a-4044-8fbf-4229d8482bac)
AND
DB_ORI_Laezel_Journal_InquisitorConflictDone(1)
AND
NOT DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "FindCure_AfterBetrayal");


// - 3000 - ORI_Avatar_Laezel_ContinueTravels
IF
DB_GlobalFlag(CRE_AstralPrison_Event_LeftAstralPlane_58ec28f6-be1a-4044-8fbf-4229d8482bac)
AND
DB_ORI_Laezel_Journal_InquisitorConflictDone(1)
AND
DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
NOT DB_GlobalFlag((FLAG)CRE_ChainOfCommand_State_LeftInquisitorOfficeBeforeEnteringAstral_f4049c49-d505-4ddf-a790-45cc29eafabb)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "CrecheFinished");

IF
FlagSet((FLAG)CRE_ChainOfCommand_State_LeftInquisitorOfficeBeforeEnteringAstral_f4049c49-d505-4ddf-a790-45cc29eafabb, _, _)
AND
DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "LeftRoomAfterVlaakithCommand");

IF
FlagSet((FLAG)CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "CrecheDestroyed_NothingDone");

IF
FlagSet((FLAG)CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d, _, _)
AND
DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "CrecheDestroyed_ZaithiskDoneVlaakithNotDone");

IF
FlagSet((FLAG)CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "CrecheDestroyed_ZaithiskNotDoneVlaakithDone");

IF
DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_RefusedVossInAct2_7ff16fd5-fa94-4ae7-ba2d-e4cef09c9b82)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "KilledVoss");


// - 3100 - ORI_Avatar_Laezel_DealWithAbsolute
IF
FlagSet((FLAG)Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, _, _)
AND
NOT DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
NOT DB_GlobalFlag((FLAG)CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "PointOfNoReturnReachedWithoutCreche");


// - 3200 - ORI_Avatar_Laezel_TravelToBG
IF
FlagSet((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "AgreedVoss");

IF
GameBookInterfaceClosed(_VossNote, _)
AND
DB_GLO_VossContactLetter(_VossNote)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "VossContact");

IF
DB_PermaDefeated(S_MOO_Ketheric_e9918f3e-5b87-40a3-a9bd-61545151573f)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "PointOfNoReturnReachedWithoutCreche", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "KilledKetheric");

// - 3400 - ORI_Avatar_Laezel_RemoveOrpheusPrison
IF
ReadyCheckPassed("INT_EmperorRevealed_ReturnReadyCheck")
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "VossContact", 0)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "FinishedIntermezzo_VossNotPresent");


// - 3500 - ORI_Avatar_Laezel_MeetVossInSC
IF
ReadyCheckPassed("INT_EmperorRevealed_ReturnReadyCheck")
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "FinishedIntermezzo_VossInSC");


// - 3600 - ORI_Avatar_Laezel_MeetVossInSC
IF
ReadyCheckPassed("INT_EmperorRevealed_ReturnReadyCheck")
AND
QuestUpdateIsUnlocked((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "VossContact", 1)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "FinishedIntermezzo_VossContact");


// - 3700 - ORI_Avatar_Laezel_SpeakToRaphael
IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_ThreeWay_VossScene_3500e60b-d165-934d-e96d-a3c9591f0133, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SpeakToRaphael");


// - 3800 - ORI_Avatar_Laezel_SpeakToVossInSC
IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, _)
AND
NOT DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
NOT DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "LearnedAboutKeyFromRaphael_VossInSC");


// - 3900 - ORI_Avatar_Laezel_GetKeyToOrpheus
IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_Raphael_SoloScene_e95ac422-e05d-f119-68fd-e382d71f7c79, _)
AND
NOT DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
AND
NOT QRY_ORI_Laezel_VossInAct3()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "LearnedAboutKeyFromRaphael_VossNotPresent");


// - 4000 - ORI_Avatar_Laezel_GetOrphicHammer
IF
FlagSet((FLAG)LOW_HouseOfHope_State_VisitedHouseOfHope_c8889a79-8277-48e9-afa0-e14f6359ea10, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "EnteredHoH");

IF
FlagSet((FLAG)LOW_HouseOfHope_Event_SawMainTreasures_3a0552ac-db09-4f61-93d6-2c6f3be90d46, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SawHammer");

IF
FlagSet((FLAG)LOW_HouseOfHope_State_TreasureBlockerRemoved_e6b12fcb-de35-47c1-cd3a-427680bbc32c,_,_)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "HammerForceFieldDisabled");

IF
DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e)
AND
GetFlag(GLO_Monitor_State_HasOrphicHammer_29842214-5482-dc25-fc89-02e474d7d96b, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "KilledVossNoHammer");

IF
FlagSet((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2, _, _)
AND
NOT DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_BeganSoloScene_1048973a-9ed0-89e5-ce68-11e03fafc22c)
AND
NOT DB_GlobalFlag((FLAG)LOW_HouseOfHope_State_VisitedHouseOfHope_c8889a79-8277-48e9-afa0-e14f6359ea10)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "LearnedAboutOrphicHammer");

IF
FlagSet((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2, _, _)
AND
NOT DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_BeganSoloScene_1048973a-9ed0-89e5-ce68-11e03fafc22c)
AND
DB_GlobalFlag((FLAG)LOW_HouseOfHope_State_VisitedHouseOfHope_c8889a79-8277-48e9-afa0-e14f6359ea10)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "LearnedAboutOrphicHammer_AlreadyInHoH");

IF
FlagSet((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "SpokeToVossInSC");


// - 4100 - ORI_Avatar_Laezel_ShowVossHammer
IF
FlagSet((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc, _, _)
AND
QRY_ORI_Laezel_VossInAct3()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "GotHammer_VossInSC");


// - 4150 - ORI_Avatar_Laezel_ShowVossHammer_Sewers
IF
FlagSet(GLO_Monitor_State_HasOrphicHammer_29842214-5482-dc25-fc89-02e474d7d96b, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
AND
NOT DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "GotHammer_VossInSewers");


// - 4200 - ORI_Avatar_Laezel_ReachAndDealWithOrpheus
IF
FlagSet((FLAG)ORI_Laezel_State_ShowedVossTheHammer_5588f6a2-bb8c-4f91-a152-168492b9c09f, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "ShowedVossHammer");

IF
DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
QRY_ORI_Laezel_PartyHasOrphicHammer()
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "KilledVossGotHammer");

IF
FlagSet((FLAG)END_IllithidOptions_State_PartyHasOrphicHammer_90e5e1a5-2f6b-4b30-948f-c342d6adced5, _, _)
AND
NOT DB_GlobalFlag((FLAG)END_IllithidOptions_State_ArrivedWithOrphicHammer_a350e277-55a7-4e03-9c14-db154b6c682e)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "GotHammerFromRaphaelInAstralPlane");

IF
FlagSet(GLO_Monitor_State_HasOrphicHammer_29842214-5482-dc25-fc89-02e474d7d96b, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "GotHammer_VossNotPresent");

IF
FlagSet(GLO_Monitor_State_HasOrphicHammer_29842214-5482-dc25-fc89-02e474d7d96b, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _)
AND
DB_PermaDefeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "GotHammer_VossNotPresent");

IF
FlagSet((FLAG)END_IllithidOptions_State_ArrivedWithOrphicHammer_a350e277-55a7-4e03-9c14-db154b6c682e, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "EnteredAstralPlane_WithHammer");

IF
FlagSet((FLAG)END_General_State_CurrentlyInAstralPlane_b3cf6c91-4d1c-4dcf-bc57-262f7d0f02b9, _, _)
AND
NOT DB_GlobalFlag((FLAG)END_IllithidOptions_State_ArrivedWithOrphicHammer_a350e277-55a7-4e03-9c14-db154b6c682e)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "EnteredAstralPlane_NoHammer");

IF
FlagSet((FLAG)END_IllithidOptions_Event_TadpoleGroupDiscussion_55831e5e-9916-4099-a397-37f5e6967d2e, _, _)
AND
NOT DB_GlobalFlag((FLAG)END_IllithidOptions_State_PartyHasOrphicHammer_90e5e1a5-2f6b-4b30-948f-c342d6adced5)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "DiscussTadpole_NoHammer");

IF
FlagSet((FLAG)END_IllithidOptions_Event_TadpoleGroupDiscussion_55831e5e-9916-4099-a397-37f5e6967d2e, _, _)
AND
DB_GlobalFlag((FLAG)END_IllithidOptions_State_PartyHasOrphicHammer_90e5e1a5-2f6b-4b30-948f-c342d6adced5)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "DiscussTadpole_WithHammer");

IF
CastedSpell(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea,"Shout_GLO_Voss_TeleportOut",_,_,_)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_VossWaitingForHammerInSewers_47b30289-c885-46a9-ab6e-82b5460c161d)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "AttackedVossGotHammer");


// - 4300 - ORI_Avatar_Laezel_FinishBrainBattle
IF
FlagSet((FLAG)END_IllithidOptions_State_AssimilatedOrpheus_5562cc3f-c168-48c9-87c1-1598a5c58961, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "ResolvedAstralPrism_OrpheusAssimilated");

IF
FlagSet((FLAG)END_IllithidOptions_State_OrpheusIsFree_3b747050-1be0-432e-9de6-e48faa4b74bb, _, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "ResolvedAstralPrism_OrpheusFree");
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "OrpheusFreed");


// SUBQUEST - ORI_Avatar_Laezel_SUB_OrpheusFuture | ORI_Avatar_Laezel_SUB_VlaakithFuture
IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelAvatar_30753d97-84d4-7171-e084-9f815cd4ee27, _)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "VlaakithVisitedInCampOrpheus");
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "VlaakithVisitedInCampVlaakith");

IF
FlagSet((FLAG)END_IllithidOptions_State_OrpheusIsFree_3b747050-1be0-432e-9de6-e48faa4b74bb, _, _)
AND
DB_GlobalFlag((FLAG)END_General_State_OrpheusIsMindFlayer_2b638127-f30a-424e-9d4a-a9f8f100a307)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "OrpheusFreed_OrpheusMF");

IF
FlagSet((FLAG)END_IllithidOptions_State_OrpheusIsFree_3b747050-1be0-432e-9de6-e48faa4b74bb, _, _)
AND
NOT DB_GlobalFlag((FLAG)END_General_State_OrpheusIsMindFlayer_2b638127-f30a-424e-9d4a-a9f8f100a307)
THEN
PROC_ORI_Laezel_QuestUpdate_RespectPriority((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Avatar_Laezel", "OrpheusFreed_OrpheusNotMF");


//END_REGION

//REGION Creche Config Management
IF
EnteredLevel((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, "CRE_Main_A")
THEN
PROC_SetAnubisConfig((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Laezel_Act1b");

IF
LeftLevel(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "CRE_Main_A")
THEN
PROC_SetAnubisConfig((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Laezel");
//END_REGION

//REGION Creche Recruitment
//First time recruitment when coming into CRE
//If dismissed from SCL, the UnrecruitedAtCreche DB would already be set when players enter the region
PROC
PROC_GLO_Origins_SetupRecruitment("CRE_Main_A")
AND
NOT DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_Defeated(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_ORI_Laezel_UnrecruitedAtCreche(1)
THEN
PROC_GlobalSetFlagAndCache((FLAG)ORI_Laezel_State_RecruitmentInCrecheActive_674e1fbb-7174-4c62-9581-08c67aeeaaa4);
PROC_CHA_LaezelRecruit_ResolveScene();
PROC_CRA_LaezelRecruit_EndCrashVersion();
PROC_GlobalClearFlagAndCache((FLAG)ORI_LaezelRecruitment_State_CrashVersionInitiated_a80f2bd8-ffa1-4065-a92a-d01d59907637);
PROC_GlobalClearFlagAndCache((FLAG)ORI_LaezelRecruitment_State_ChapelVersionInitiated_e6015bdf-276e-47b2-9a43-9bc0c981e1ad);
PROC_GlobalClearFlagAndCache((FLAG)ORI_LaezelRecruitment_State_PlainsVersionInitiated_59bda4f5-708b-4f23-aaba-d5f387ae95c2);
TeleportTo((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TRIGGER)S_CRE_LaezelWaitsAtCreche_MountainWaypoint_65a24332-73e3-4358-8d41-a629ebac434a, "", 0, 0, 0, 0, 1);
PROC_TriggerRegisterForPlayers((TRIGGER)S_CRE_CancelLaezelWaitAtInitialPosArea_e3eae98f-58ee-4e06-993c-1c97be2b030b);
PROC_ORI_Laezel_GiveNewEquipment();

IF
EnteredLevel((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,_,"CRE_Main_A")
AND
NOT DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_ORI_Laezel_UnrecruitedAtCreche(1)
AND
NOT DB_Defeated(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
QRY_OnlyOnce("CRE_Laezel_ArrivedForRecruitment")
THEN
SetFlag((FLAG)ORI_Laezel_State_RecruitmentInCrecheStaysAtInitialPos_0e1a2ea6-1fb4-4374-9dea-cfe8e27c9f7f);
PROC_ORI_Laezel_SetupCrecheRecruitment();

PROC
PROC_ORI_Laezel_SetupCrecheRecruitment()
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
DB_ORI_Laezel_UnrecruitedAtCreche(1);
PROC_SetOnStage((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1);
PROC_RemoveAllDialogEntriesForSpeaker(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_Dialogs(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_Recruitment_Creche_6d63ac73-0b10-0097-a299-72889bedc308);

IF
DB_ORI_Laezel_UnrecruitedAtCreche(1)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_CRE_Laezel_RecruitedAtCreche();

PROC
PROC_CRE_Laezel_RecruitedAtCreche()
THEN
NOT DB_ORI_Laezel_UnrecruitedAtCreche(1);
ClearFlag((FLAG)ORI_Laezel_State_StayedBehindInCreche_9705545c-fb54-4ff4-b16b-3326cce76dd8);
PROC_RemoveAllDialogEntriesForSpeaker(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
PROC_GLO_PartyMembers_SetInpartyDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96);
ClearFlag((FLAG)ORI_Laezel_State_RecruitmentInCrecheActive_674e1fbb-7174-4c62-9581-08c67aeeaaa4);

//InitialPos handling
IF
DialogEnded((DIALOGRESOURCE)Laezel_Recruitment_Creche_6d63ac73-0b10-0097-a299-72889bedc308, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_RecruitmentInCrecheStaysAtInitialPos_0e1a2ea6-1fb4-4374-9dea-cfe8e27c9f7f)
THEN
ClearFlag((FLAG)ORI_Laezel_State_RecruitmentInCrecheStaysAtInitialPos_0e1a2ea6-1fb4-4374-9dea-cfe8e27c9f7f);
PROC_TriggerUnregisterForPlayers((TRIGGER)S_CRE_CancelLaezelWaitAtInitialPosArea_e3eae98f-58ee-4e06-993c-1c97be2b030b);

IF
EnteredTrigger(_Player, (TRIGGER)S_CRE_CancelLaezelWaitAtInitialPosArea_e3eae98f-58ee-4e06-993c-1c97be2b030b)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_RecruitmentInCrecheStaysAtInitialPos_0e1a2ea6-1fb4-4374-9dea-cfe8e27c9f7f)
THEN
ClearFlag((FLAG)ORI_Laezel_State_RecruitmentInCrecheStaysAtInitialPos_0e1a2ea6-1fb4-4374-9dea-cfe8e27c9f7f);
PROC_TriggerUnregisterForPlayers((TRIGGER)S_CRE_CancelLaezelWaitAtInitialPosArea_e3eae98f-58ee-4e06-993c-1c97be2b030b);

//END_REGION

//REGION Permanently kill Unrecruited Laezel if Creche is found with Laezel unrecruited
//If the flag is set when she's recruited, but then dismissed, she should not die, but wait inside the Creche instead
IF
FlagSet((FLAG)ORI_Laezel_Knows_FoundCreche_1ea76d79-24c5-4d63-a9cd-178266f1673d, _, _)
AND
NOT DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_PermaDefeated(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_TurnsIntoShadowcursedCreature();

IF
FlagSet((FLAG)ORI_Laezel_Knows_FoundCreche_1ea76d79-24c5-4d63-a9cd-178266f1673d, _, _)
AND
NOT DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
SetTag(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TAG)BLOCK_RESURRECTION_22a75dbb-1588-407e-b559-5aa4e6d4e6a6);

PROC
PROC_ORI_Laezel_TurnsIntoShadowcursedCreature()
THEN
PROC_SetOnStage(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1);
//ToDo: Update Journal
TeleportTo(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TRIGGER)S_SCL_Laezel_FoundDeadUnrecruited_f056fc6d-1f85-4c9d-bd40-e8aada1f6180, "ORI_Laezel_TeleportedToShadowcursedPlace", 0, 0, 0, 0, 1);

IF
EntityEvent((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Laezel_TeleportedToShadowcursedPlace")
THEN
SetFlag((FLAG)ORI_Laezel_State_DeadInSCL_8b0de2ba-cfdc-497b-be7e-9d059fbd8f72);
DB_ORI_Laezel_TurnedIntoShadowcursedCreature(1);
SetTag((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TAG)BLOCK_RESURRECTION_22a75dbb-1588-407e-b559-5aa4e6d4e6a6);

IF
DB_Sees(_Player, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_Players(_Player)
AND
DB_ORI_Laezel_TurnedIntoShadowcursedCreature(1)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_StayedBehindInCreche_9705545c-fb54-4ff4-b16b-3326cce76dd8)
AND
IsTagged(_Player, (TAG)REALLY_HALSIN_9b8709f9-8d2a-4b4e-a465-8505c561d7f5, 0)
AND
IsTagged(_Player, (TAG)REALLY_MINTHARA_3e84e1cd-2193-4f9f-80b4-c2ededefaea6, 0)
AND
QRY_OnlyOnce("ORI_Laezel_PlayersSawLaezelDeadInSCL")
THEN
StartVoiceBark((VOICEBARKRESOURCE)ORI_Laezel_VB_PlayersSeeShadowcursedLaezel_aaecc8a6-a25b-0508-7d33-70dc5dd46c9c, _Player);

//END_REGION

//REGION Camp Night requirements setting
//Needed for disabling the DB_CampNight dbs from being re-added on region change since they are defined in multiple regions so that they can be tested in debug more easily.
IF
FlagSet((FLAG)CAMP_GoblinHuntCelebration_SD_ROM_NightWithLaezel_State_Happened_8860bafa-bdb3-2854-b664-50868c13c9a3,_,_)
THEN
DB_LongRestCountDown(2,(FLAG)ORI_Laezel_State_OneNightPassedAfterAct1RomanceScene_fa547a51-92f8-43b4-819d-0fc3de7713a6);

IF
FlagSet((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b,_,_)
THEN
DB_LongRestCountDown(2,(FLAG)ORI_Laezel_State_OneNightPassedAfterAct2RomanceScene_1e8304bf-f85f-45c3-808b-1b9db5a6f338);

IF
FlagSet((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062,_,_)
THEN
DB_LongRestCountDown(2,(FLAG)ORI_Laezel_State_OneNightPassedAfterVlaakithVisit_cd354839-70c7-4699-a43d-3007d33bb3e1);

//END_REGION

//REGION Creche Map Marker
IF
FlagSet((FLAG)ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2, _, _)
AND
DB_Players(_Player)
AND
QRY_OnlyOnce("CRE_CrecheEntranceMarkerPlaced")
THEN
PROC_ShowMarker(_Player, "CRE_CrecheEntrance");
//END_REGION

//REGION Speak With Dead dialog
IF
TagSet((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, BLOCK_RESURRECTION_22a75dbb-1588-407e-b559-5aa4e6d4e6a6)
THEN
DB_GLO_CharacterCorpseDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_Dead_4d478bfa-5362-06cb-f673-3733a3ff4ce8);

IF
TagCleared((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, BLOCK_RESURRECTION_22a75dbb-1588-407e-b559-5aa4e6d4e6a6)
THEN
NOT DB_GLO_CharacterCorpseDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_Dead_4d478bfa-5362-06cb-f673-3733a3ff4ce8);

IF
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
NOT DB_GLO_CharacterCorpseDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_Dead_4d478bfa-5362-06cb-f673-3733a3ff4ce8);
//END_REGION

//REGION Orpheus Path switching
IF 
TagSet(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TAG)LAEZEL_ORPHEUSPATH_616688cd-b203-4f14-8c33-086bb83062a3)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
SetFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56);

IF 
TagCleared(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TAG)LAEZEL_ORPHEUSPATH_616688cd-b203-4f14-8c33-086bb83062a3)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
ClearFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56);

IF
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
IsTagged(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TAG)LAEZEL_ORPHEUSPATH_616688cd-b203-4f14-8c33-086bb83062a3, 0)
THEN
SetTag(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TAG)LAEZEL_ORPHEUSPATH_616688cd-b203-4f14-8c33-086bb83062a3);

IF
FlagCleared((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56, _, _)
AND
IsTagged(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TAG)LAEZEL_ORPHEUSPATH_616688cd-b203-4f14-8c33-086bb83062a3, 1)
THEN
ClearTag(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (TAG)LAEZEL_ORPHEUSPATH_616688cd-b203-4f14-8c33-086bb83062a3);
//END_REGION

//REGION Leaving Creche before and after everything is done
//Track when the players leave the Creche once they have entered it, before finishing both Vlaakith and the Zaithisk
IF
FlagSet((FLAG)ORI_Laezel_Knows_FoundCreche_1ea76d79-24c5-4d63-a9cd-178266f1673d, _, _)
THEN
DB_TriggerEvents_AllPlayersLeftAllTriggersInSet("CRE_InnerCreche", "CRE_LeftCrecheBeforeEverythingIsDone");

IF
DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
AND
DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
THEN
NOT DB_TriggerEvents_AllPlayersLeftAllTriggersInSet("CRE_InnerCreche", "CRE_LeftCrecheBeforeEverythingIsDone");
DB_TriggerEvents_AllPlayersLeftAllTriggersInSet("CRE_InnerCreche", "CRE_LeftCrecheAfterEverythingIsDone");

IF
EntityEvent(_, "CRE_LeftCrecheBeforeEverythingIsDone")
AND
DB_GlobalFlag((FLAG)CRE_Lance_State_WasActive_9d239e15-4994-49b1-93dc-a89d37e3bff4)
AND
DB_Avatars(_Avatar)
AND
QRY_OnlyOnce("TG_CRE_LeftCrecheBeforeEverythingIsDone_Set")
THEN
SetFlag((FLAG)ORI_Laezel_State_LeftCrecheBeforeEverythingIsDone_ab76c3d8-1e69-4764-be1a-f005684ef11a);

IF
EntityEvent(_, "CRE_LeftCrecheAfterEverythingIsDone")
THEN
SetFlag((FLAG)ORI_Laezel_State_LeftCrecheAfterEverythingIsDone_8d268d89-239d-4542-94e8-85399ac64c21);
//END_REGION

//REGION Endgame
IF
DialogEnded(END_IllithidOptions_EmperorProposal_6769199a-452f-5a13-9178-55a899cccf59, _)
AND
DB_Avatars(_Avatar)
AND
QRY_OnlyOnce("TG_END_EnteredAstralPlaneAfterMorphicPool_Set")
THEN
SetFlag((FLAG)TG_END_EnteredAstralPlaneAfterMorphicPool_671d7b95-328d-4812-95e1-07f5efa31239, _Avatar);

IF
FlagSet((FLAG)END_IllithidOptions_State_ExitPortalAvailable_b97872a1-59cc-40cd-8963-e06be614adc0, _, _)
AND
DB_Avatars(_Avatar)
AND
QRY_OnlyOnce("TG_END_AfterDecidingOrpheusFateInAstralPlane_Set")
THEN
SetFlag((FLAG)TG_END_AfterDecidingOrpheusFateInAstralPlane_580cd20c-de38-4427-a8bb-f0e26174ec89, _Avatar);
//END_REGION

//REGION Switch InPartyDialog for other regions
PROC
PROC_LevelLoadedOnce(_String)
AND
_String != "TUT_Avernus_C"
AND
_String != "END_Main" //Origins have InPartyEND dialog
AND
QRY_OnlyOnce("ORI_Laezel_SwitchInPartyDialog")
THEN
NOT DB_OriginInPartyDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, TUT_Start_Laezel_c62d7e26-beb5-0afe-becd-68a25c7f4314);
DB_OriginInPartyDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, Laezel_InParty_93bf58f5-5111-9730-1ee2-62dfb0b00c96);
//END_REGION

//REGION Leaving logic if Creche isn't done
//If the Creche is finished fully, Laezel can now proceed to Act 3
//Flag is also set in the Act2 Voss Camp Confrontation dialog if the Zaithisk is not visited yet
//Flag is also set in the InParty if you convince her to stay with you when she treatens to leave at Moonrise/Shar
IF
DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
AND
DB_GlobalFlag((FLAG)CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_CanProceedToAct3_64850ffe-e278-4742-91f2-3cecd77d1257)
THEN
SetFlag((FLAG)ORI_Laezel_State_CanProceedToAct3_64850ffe-e278-4742-91f2-3cecd77d1257);

//Permanently leaving when set
//If players enter the Moonrise exterior area (either by leaving Moonrise, or arriving after dealing with Nightsong), or enter the Shar Temple, Laezel can potentially leave the party for good and be found as a shadowcreature in SCL
PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_StayedBehindInCreche_9705545c-fb54-4ff4-b16b-3326cce76dd8, GLO_Laezel_WRD_ProgressInAct2WithoutCreche_aa6fdbc8-6a7f-dd46-4a6f-366e36eeb4ab)
THEN
PROC_Origins_CompanionLeavePermanently((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "LeftInSCL");
ObjectTimerLaunch(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Laezel_LeftInSCL", 1000, 1);

IF
ObjectTimerFinished(_Laezel, "ORI_Laezel_LeftInSCL")
THEN
PROC_DisappearOutOfSight((CHARACTER)_Laezel, "Walk", 0, "ORI_Laezel_LeftInSCL_Disappeared");

IF
EntityEvent(_Laezel, "ORI_Laezel_LeftInSCL_Disappeared")
THEN
PROC_ORI_Laezel_TurnsIntoShadowcursedCreature();

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_StayedBehindInCreche_9705545c-fb54-4ff4-b16b-3326cce76dd8, Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96)
THEN
PROC_Origins_CompanionLeaveTemporarily((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "LaezelLeftAtCreche");
PROC_ORI_Laezel_SetupCrecheRecruitment();
//END_REGION

//REGION Orpheus Books
//Laezel and suitable avatar are both nearby
PROC
PROC_BlockUseOfItem(_Player, _Chapter)
AND
DB_Players((CHARACTER)_Player)
AND
DB_ORI_Laezel_OrpheusChapters((ITEM)_Chapter, _)
AND
DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
QRY_SpeakerIsAvailableAndInDialogRange(_Player, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
QRY_GetBestAvatarForCompanion((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_QRYRTN_GetBestAvatarForCompanion((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _BestAvatar)
AND
QRY_SpeakerIsAvailableAndInDialogRange(_Player, _BestAvatar)
AND
DB_ORI_Laezel_AvatarOrpheusChapters(_Chapter, _ReadFlag, _CurrentlyReadingFlag)
AND
NOT DB_GlobalFlag(_ReadFlag)
AND
NOT DB_GlobalFlag(_CurrentlyReadingFlag)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)Laezel_InParty2_Nested_OrpheusChapters_fb27c985-67fc-6a32-2cf4-f0919ee9e423, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _BestAvatar)
THEN
PROC_GlobalSetFlagAndCache(_CurrentlyReadingFlag);
DB_CustomUseItemResponse(_Player, _Chapter, 0);

//Non-Laezel player reading the book
PROC
PROC_BlockUseOfItem(_Player, _Chapter)
AND
DB_Players((CHARACTER)_Player)
AND
DB_ORI_Laezel_OrpheusChapters((ITEM)_Chapter, _)
AND
IsTagged(_Player, (TAG)REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, 0)
AND
DB_ORI_Laezel_AvatarOrpheusChapters(_Chapter, _ReadFlag, _CurrentlyReadingFlag)
AND
NOT DB_GlobalFlag(_ReadFlag)
AND
NOT DB_GlobalFlag(_CurrentlyReadingFlag)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)GLO_OrpheusChapters_PlayerDecipherChapter_2f5fa3c8-81ed-fe69-119e-cc0384833229, _Player)
THEN
PROC_GlobalSetFlagAndCache(_CurrentlyReadingFlag);
DB_CustomUseItemResponse(_Player, _Chapter, 0);
DB_ORI_Laezel_AvatarReadingChapter(_Chapter);

IF
DialogEnded((DIALOGRESOURCE)GLO_OrpheusChapters_PlayerDecipherChapter_2f5fa3c8-81ed-fe69-119e-cc0384833229, _)
THEN
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter1_2c57476c-aea4-4126-8f6b-557e59b14b62);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter2_b961ce36-ee93-4576-9c37-a416b7bad728);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter3_f834d419-d6a4-4b41-bd0c-665b9e519537);

IF
DialogEnded((DIALOGRESOURCE)GLO_OrpheusChapters_AvatarLaezelReadsChapters_deb6d52b-d3da-d384-383d-8f420d98d7f8, _)
THEN
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter1_2c57476c-aea4-4126-8f6b-557e59b14b62);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter2_b961ce36-ee93-4576-9c37-a416b7bad728);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter3_f834d419-d6a4-4b41-bd0c-665b9e519537);

IF
DialogEnded((DIALOGRESOURCE)Laezel_InParty2_Nested_OrpheusChapters_fb27c985-67fc-6a32-2cf4-f0919ee9e423, _)
THEN
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter1_2c57476c-aea4-4126-8f6b-557e59b14b62);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter2_b961ce36-ee93-4576-9c37-a416b7bad728);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter3_f834d419-d6a4-4b41-bd0c-665b9e519537);

IF
DialogRequestFailed((DIALOGRESOURCE)GLO_OrpheusChapters_PlayerDecipherChapter_2f5fa3c8-81ed-fe69-119e-cc0384833229, _)
THEN
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter1_2c57476c-aea4-4126-8f6b-557e59b14b62);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter2_b961ce36-ee93-4576-9c37-a416b7bad728);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter3_f834d419-d6a4-4b41-bd0c-665b9e519537);

IF
DialogRequestFailed((DIALOGRESOURCE)GLO_OrpheusChapters_AvatarLaezelReadsChapters_deb6d52b-d3da-d384-383d-8f420d98d7f8, _)
THEN
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter1_2c57476c-aea4-4126-8f6b-557e59b14b62);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter2_b961ce36-ee93-4576-9c37-a416b7bad728);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter3_f834d419-d6a4-4b41-bd0c-665b9e519537);

IF
DialogRequestFailed((DIALOGRESOURCE)Laezel_InParty2_Nested_OrpheusChapters_fb27c985-67fc-6a32-2cf4-f0919ee9e423, _)
THEN
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter1_2c57476c-aea4-4126-8f6b-557e59b14b62);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter2_b961ce36-ee93-4576-9c37-a416b7bad728);
ClearFlag((FLAG)ORI_Laezel_Event_CurrentlyReadingOrpheusChapter3_f834d419-d6a4-4b41-bd0c-665b9e519537);

IF
DialogEnded(GLO_OrpheusChapters_PlayerDecipherChapter_2f5fa3c8-81ed-fe69-119e-cc0384833229, _ID)
AND
DB_DialogPlayers(_ID, _Player, _)
AND
DB_ORI_Laezel_AvatarReadingChapter(_Chapter)
AND
IsInInventoryOf(_Chapter, _Player, 0)
THEN
ToInventory(_Chapter, _Player, 1, 1, 1);

IF
DialogEnded(GLO_OrpheusChapters_PlayerDecipherChapter_2f5fa3c8-81ed-fe69-119e-cc0384833229, _ID)
AND
DB_ORI_Laezel_AvatarReadingChapter(_Chapter)
THEN
NOT DB_ORI_Laezel_AvatarReadingChapter(_Chapter);

IF
AddedTo(_Chapter, _Player, _)
AND
DB_Players((CHARACTER)_Player)
AND
DB_ORI_Laezel_OrpheusChapters((ITEM)_Chapter, _)
AND
IsTagged(_Player, (TAG)REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, 0)
AND
GUIDToString(_Chapter, _ChapterString)
AND
QRY_OnlyOnce(_ChapterString)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12) //Should happen after the OnlyOnce - we don't want this to trigger if you recruit laezel later and read or pickup the item
THEN
PROC_TryStartAD((DIALOGRESOURCE)GLO_OrpheusChapters_PAD_FoundBooks_90c4d3d3-b8e1-e891-6098-a2ec45beb86f, _Player);

//Laezel - Avatar or Orphaned Companion
PROC
PROC_BlockUseOfItem((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Chapter)
AND
DB_ORI_Laezel_AvatarOrpheusChapters((ITEM)_Chapter, _ReadFlag, _CurrentlyReadingFlag)
AND
DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_GlobalFlag(_ReadFlag)
AND
NOT DB_GlobalFlag(_CurrentlyReadingFlag)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)GLO_OrpheusChapters_AvatarLaezelReadsChapters_deb6d52b-d3da-d384-383d-8f420d98d7f8, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_GlobalSetFlagAndCache(_CurrentlyReadingFlag);
DB_CustomUseItemResponse(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Chapter, 0);

IF
AddedTo(_Chapter, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _)
AND
DB_ORI_Laezel_AvatarOrpheusChapters((ITEM)_Chapter, _ReadFlag, _CurrentlyReadingFlag)
AND
DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_GlobalFlag(_ReadFlag)
AND
NOT DB_GlobalFlag(_CurrentlyReadingFlag)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)GLO_OrpheusChapters_AvatarLaezelReadsChapters_deb6d52b-d3da-d384-383d-8f420d98d7f8, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_GlobalSetFlagAndCache(_CurrentlyReadingFlag);

PROC
PROC_BlockUseOfItem((CHARACTER)_Player, _OrpheusChapter)
AND
DB_ORI_Laezel_OrpheusChapters(_OrpheusChapter, _BookString)
AND
DB_ORI_Laezel_AvatarOrpheusChapters(_OrpheusChapter, _ReadFlag, _)
AND
DB_GlobalFlag(_ReadFlag)
THEN
DB_CustomUseItemResponse(_Player, _OrpheusChapter, 0);
OpenReferencedBookUI(_Player, _BookString, _OrpheusChapter);

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter1_c8fa6c18-6491-48b6-9197-43285a07f9c9, _)
THEN
SetStoryDisplayName((ITEM)S_GLO_OrpheusChapter1_164b80e2-12a9-45d6-8457-cfe84ebb1a06, "ORI_Laezel_OrpheusChapter1_RealDisplayName");
AddEntryToCustomBook("ORI_Laezel_OrpheusChapter1_Deciphered", "ORI_Laezel_OrpheusChapter1_HiddenText");

PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)GLO_OrpheusChapters_State_ReadOrpheusChapter3_cd913886-8e41-47d2-bba1-fda22b129001, _)
THEN
SetStoryDisplayName((ITEM)S_GLO_OrpheusChapter3_bad6bedb-5be9-407a-840e-977c2e23aba3, "ORI_Laezel_OrpheusChapter3_RealDisplayName");
AddEntryToCustomBook("ORI_Laezel_OrpheusChapter3_Deciphered", "ORI_Laezel_OrpheusChapter3_HiddenText");

//END_REGION

//REGION NIGHT_Laezel_Romance1_AfterCelebration
IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_Romance1_SD_Invitation_264413a4-e515-8e4d-3755-3f84c3fb1b11,_Inst)
AND
DB_DialogSpeakers(_Inst,_Player,2)
AND
GetFlag((FLAG)ORI_Laezel_Event_PlayRomance1_AfterCelebration_3e125bfc-95f4-4a2d-8f59-bc5ad54413a2,_Player,1)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)CAMP_GoblinHuntCelebration_SC_NightWithLaezel_1f65b94b-252d-b56e-e812-478a7ff803a8,(CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,_Player)
THEN
DB_NOOP(1);

QRY
QRY_SpeakerIsAvailableForDialogSlot((GUIDSTRING)_Speaker,(DIALOGRESOURCE)CAMP_GoblinHuntCelebration_SC_NightWithLaezel_1f65b94b-252d-b56e-e812-478a7ff803a8,_,_,_)
AND
_Speaker != NULL_00000000-0000-0000-0000-000000000000
THEN
DB_NOOP(1);

//END_REGION

//REGION NIGHT_Laezel_VossCampConfrontation
IF
TextEvent("test_VossAct2combat")
AND
GetHostCharacter(_Player)
THEN
TeleportTo(S_GLO_VossRaider_7a134719-7e7b-4a1d-899d-3387db7ce04c, _Player, "", 0, 0, 0, 0, 1);
TeleportTo(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, _Player, "Debug_Laezel_VossCampConfrontation_StartFightAnywhere", 0, 0, 0, 0, 1);
SetFaction(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, (FACTION)CAMP_Laezel_VossAct2_f664de60-462f-4d0e-99be-3ef59fdf9139);
Transform((CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, (CHARACTERROOT)GLO_GithKnight_LaezelCampConfrontation_1f11119b-40c6-4169-b329-eb21c5c06d01, (SHAPESHIFTRULE)Disguise_ceccc4eb-d774-4cd5-9147-12322b81b763);
CharacterGiveEquipmentSet((CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, "SCL_Voss");
SetTag(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, (TAG)ACT2_SCL_VOSS_BLOCKACTIONSURGE_835818c1-8cf2-4d0a-85cc-6822f2b27bcf);
PROC_SetRelationToPlayers((FACTION)CAMP_Laezel_VossAct2_f664de60-462f-4d0e-99be-3ef59fdf9139, 0);

IF
TextEvent("test_SetupVossForAct3")
THEN
Transform((CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, (CHARACTERROOT)GLO_GithKnight_Act3_92c4057e-9d55-4530-a535-eac1b58d8629, (SHAPESHIFTRULE)Disguise_ceccc4eb-d774-4cd5-9147-12322b81b763);
CharacterGiveEquipmentSet((CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, "EQ_GLO_Voss");

QRY
QRY_Camp_DoNotHideCamper((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_Camp_QueuedNight((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9)
THEN
DB_NOOP(1);

//Avatar Laezel RestedAfterCreche flag logic
//Normally, it's set during the AfterCrecheReflection camp night, which is queued up after finishing the Creche
//If it doesn't play for 3 nights, the AfterCrecheReflection is cancelled and the VossCampConfrontation is queued up automatically
PROC
PROC_LongRest() 
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_RestedAfterCreche_34d9f1b8-fa2c-4730-a93d-5739668be195)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7) //Catches finishing the Creche
AND
DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
PROC_ORI_Laezel_VossCampConfrontation_RestedTick();

PROC
PROC_ORI_Laezel_VossCampConfrontation_RestedTick()
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_RestedAfterCreche_34d9f1b8-fa2c-4730-a93d-5739668be195)
AND
NOT DB_ORI_Laezel_VossCampConfrontation_TickTimer(_)
THEN
DB_ORI_Laezel_VossCampConfrontation_TickTimer(1);

PROC
PROC_ORI_Laezel_VossCampConfrontation_RestedTick()
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_RestedAfterCreche_34d9f1b8-fa2c-4730-a93d-5739668be195)
AND
DB_ORI_Laezel_VossCampConfrontation_TickTimer(_OldValue)
AND
IntegerSum(_OldValue, 1, _NewValue)
THEN
NOT DB_ORI_Laezel_VossCampConfrontation_TickTimer(_OldValue);
DB_ORI_Laezel_VossCampConfrontation_TickTimer(_NewValue);

IF
DB_ORI_Laezel_VossCampConfrontation_TickTimer(3)
THEN
SetFlag((FLAG)ORI_Laezel_State_RestedAfterCreche_34d9f1b8-fa2c-4730-a93d-5739668be195);

//Companion Laezel gets the RestedAfterCreche flag set the first time the party rests after finishing the Creche
PROC
PROC_LongRest() 
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_RestedAfterCreche_34d9f1b8-fa2c-4730-a93d-5739668be195)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7) //Catches finishing the Creche
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
SetFlag((FLAG)ORI_Laezel_State_RestedAfterCreche_34d9f1b8-fa2c-4730-a93d-5739668be195);

IF
DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
AND
DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND 
NOT DB_CampNight_SCO((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, (DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelAvatar_e43d9a2a-7ea7-41a7-78cb-a62ccdc582b4)
THEN
NOT DB_CampNight_SCO((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, (DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c);
DB_CampNight_SCO((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, (DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelAvatar_e43d9a2a-7ea7-41a7-78cb-a62ccdc582b4);

IF
DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_CampNight_SCO((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, (DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c)
THEN
NOT DB_CampNight_SCO((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, (DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelAvatar_e43d9a2a-7ea7-41a7-78cb-a62ccdc582b4);
DB_CampNight_SCO((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, (DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c);

//Making sure avatar and Laezel are always added to the correct slots
QRY
QRY_Camp_SleepCutsceneOverride_CustomDialogStart((DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c,(CHARACTER)_Player,(CHARACTER)_Player2,(CHARACTER)_Player3,(CHARACTER)_Player4)
AND
QRY_GetBestAvatarForCompanion(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,1,1)
AND
DB_QRYRTN_GetBestAvatarForCompanion(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,_LaezelAvatar)
AND
QRY_ObjectFilterOut(_Player,S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_QRYRTN_ObjectFilterOut(_PlayerNotLaezel)
AND
QRY_ObjectFilterOut(_Player2,S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_QRYRTN_ObjectFilterOut(_Player2NotLaezel)
AND
QRY_ObjectFilterOut(_Player3,S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_QRYRTN_ObjectFilterOut(_Player3NotLaezel)
AND
QRY_ObjectFilterOut(_Player4,S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_QRYRTN_ObjectFilterOut(_Player4NotLaezel)
AND
QRY_Laezel_VossCampConfrontation_ChangeLaezelClothes()
AND
QRY_Laezel_VossCampConfrontation_LaezelCom_SCO((CHARACTER)_LaezelAvatar,(CHARACTER)_PlayerNotLaezel,(CHARACTER)_Player2NotLaezel,(CHARACTER)_Player3NotLaezel,(CHARACTER)_Player4NotLaezel)
THEN
DB_NOOP(1);

QRY
QRY_CAMP_VanityArmour_BlockChangeForCharacter((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c)
THEN
DB_NOOP(1);

QRY
QRY_Laezel_VossCampConfrontation_ChangeLaezelClothes()
THEN
PROC_SetArmourSet((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, ARMOURSET.Normal);

QRY
QRY_Laezel_VossCampConfrontation_ChangeLaezelClothes()
THEN
DB_NOOP(1);

QRY
QRY_Laezel_VossCampConfrontation_LaezelCom_SCO((CHARACTER)_LaezelAvatar,(CHARACTER)_LaezelAvatar,(CHARACTER)_Player2NotLaezel,(CHARACTER)_Player3NotLaezel,(CHARACTER)_Player4NotLaezel)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c,_LaezelAvatar,_Player2NotLaezel,_Player3NotLaezel,_Player4NotLaezel,S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
DB_NOOP(1);

QRY
QRY_Laezel_VossCampConfrontation_LaezelCom_SCO((CHARACTER)_LaezelAvatar,(CHARACTER)_PlayerNotLaezel,(CHARACTER)_LaezelAvatar,(CHARACTER)_Player3NotLaezel,(CHARACTER)_Player4NotLaezel)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c,_LaezelAvatar,_PlayerNotLaezel,_Player3NotLaezel,_Player4NotLaezel,S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
DB_NOOP(1);

QRY
QRY_Laezel_VossCampConfrontation_LaezelCom_SCO((CHARACTER)_LaezelAvatar,(CHARACTER)_PlayerNotLaezel,(CHARACTER)_Player2NotLaezel,(CHARACTER)_LaezelAvatar,(CHARACTER)_Player4NotLaezel)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c,_LaezelAvatar,_PlayerNotLaezel,_Player2NotLaezel,_Player4NotLaezel,S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
DB_NOOP(1);

QRY
QRY_Laezel_VossCampConfrontation_LaezelCom_SCO((CHARACTER)_LaezelAvatar,(CHARACTER)_PlayerNotLaezel,(CHARACTER)_Player2NotLaezel,(CHARACTER)_Player3NotLaezel,(CHARACTER)_LaezelAvatar)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c,_LaezelAvatar,_PlayerNotLaezel,_Player2NotLaezel,_Player3NotLaezel,S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
DB_NOOP(1);

QRY
QRY_Camp_SleepCutsceneOverride_CustomDialogStart((DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c,(CHARACTER)_Player,(CHARACTER)_Player2,(CHARACTER)_Player3,(CHARACTER)_Player4)
THEN
DB_NOOP(1);

//Making sure Avatar Laezel is always the first speaker
QRY
QRY_Camp_SleepCutsceneOverride_CustomDialogStart((DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelAvatar_e43d9a2a-7ea7-41a7-78cb-a62ccdc582b4, _,_,_,_)
AND
QRY_StartDialog_Fixed((DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelAvatar_e43d9a2a-7ea7-41a7-78cb-a62ccdc582b4, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
DB_NOOP(1);

QRY
QRY_Camp_SleepCutsceneOverride_CustomDialogStart((DIALOGRESOURCE)CAMP_Laezel_VossCampConfrontation_SCO_LaezelAvatar_e43d9a2a-7ea7-41a7-78cb-a62ccdc582b4,(CHARACTER)_Player,(CHARACTER)_Player2,(CHARACTER)_Player3,(CHARACTER)_Player4)
THEN
DB_NOOP(1);

PROC
PROC_StartDialog_AddExtraSpeakers(CAMP_Laezel_VossCampConfrontation_SCO_LaezelAvatar_e43d9a2a-7ea7-41a7-78cb-a62ccdc582b4, _ID)
AND
DB_Players(_Player)
AND
IsTagged(_Player, (TAG)REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, 0)
THEN
PROC_DialogAddSpeakingActor(_ID, _Player);

//Needed for the fight against Voss and conversation with Laezel afterwards (in default dialog with exclamation mark)
PROC
PROC_CampNight_StartSelected()
AND
DB_Camp_QueuedNight((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9)
THEN
DB_Camp_PreventEndOfNight(1);

PROC
PROC_StartDialog_AddExtraSpeakers(_VossCampDialog,(INTEGER)_ID)
AND
DB_CAMP_Laezel_VossCampConfrontation_Dialogs(_VossCampDialog)
AND
NOT DB_DialogRequestCache_SpeakerList_Speakers(_,_ID,S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea,_)
THEN
PROC_CAMP_Laezel_VossCampConfrontation_SetupVoss();
PROC_DialogAddSpeakingActor(_ID,S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea);
PROC_DialogAddSpeakingActor(_ID,S_GLO_VossRaider_7a134719-7e7b-4a1d-899d-3387db7ce04c);

PROC
PROC_StartDialog_AddExtraSpeakers(_VossCampDialog,(INTEGER)_ID)
AND
DB_CAMP_Laezel_VossCampConfrontation_Dialogs(_VossCampDialog)
AND
DB_GlobalFlag((FLAG)LAEZELCOMPANION_9c5bc0ce-cb2e-4685-b597-89a290837535)
THEN
PROC_DialogAddSpeakingActor(_ID,S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

PROC
PROC_CAMP_Laezel_VossCampConfrontation_SetupVoss()
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_Camp(_ActiveCamp,_,_,_Entrypoint)
THEN
TeleportTo(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea,_Entrypoint); //Might need specific positions as it can lead into a fight
PROC_SetOnStage(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, 1);
TeleportTo(S_GLO_VossRaider_7a134719-7e7b-4a1d-899d-3387db7ce04c,_Entrypoint);
PROC_SetOnStage(S_GLO_VossRaider_7a134719-7e7b-4a1d-899d-3387db7ce04c, 1);
SetFaction(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, (FACTION)CAMP_Laezel_VossAct2_f664de60-462f-4d0e-99be-3ef59fdf9139);
Transform((CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, (CHARACTERROOT)GLO_GithKnight_LaezelCampConfrontation_1f11119b-40c6-4169-b329-eb21c5c06d01, (SHAPESHIFTRULE)Disguise_ceccc4eb-d774-4cd5-9147-12322b81b763);
PROC_CharacterRemoveEquipmentPermanently((CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea);
CharacterGiveEquipmentSet((CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, "SCL_Voss");
ToInventory((ITEM)S_GLO_GithRadar_4aca442e-5ecb-4611-b481-5eaf35596dea, S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, 1, 0, 0);
PROC_CAMP_Laezel_VossCampConfrontation_TeleportLaezel();

PROC
PROC_CAMP_Laezel_VossCampConfrontation_TeleportLaezel()
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_Defeated((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_CantTalk_IgnoreDialogs(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
TeleportTo(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, S_CAMP_Laezel_VossConfrontation_StartCombatPos_5fd79b56-40a8-403b-8b66-fc977171da4f, "", 0,0,0,0,1);


IF
TemplateAddedTo((ROOT)BOOK_GLO_VossContactInSharessCaress_9cbdc729-696e-4cda-a155-51f02a94d012, _VossNote, S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, _)
THEN
DB_GLO_VossContactLetter((ITEM)_VossNote);

IF
UseFinished(_Player, (ITEM)_VossNote, 1)
AND
DB_Players(_Player)
AND
DB_GLO_VossContactLetter(_VossNote)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_RefusedVossInAct2_7ff16fd5-fa94-4ae7-ba2d-e4cef09c9b82)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_Knows_VossMeetingRaphaelInSharessCaress_d5a087ed-7479-47d1-99e7-6ba9b090f0c5)
THEN
SetFlag((FLAG)ORI_Laezel_Knows_VossMeetingRaphaelInSharessCaress_d5a087ed-7479-47d1-99e7-6ba9b090f0c5);
PROC_TryStartAD((DIALOGRESOURCE)CAMP_VossCampConfrontation_PAD_ReadSharessCaressNote_488f6c11-0555-a807-51d2-6e26bdeabf4e, _Player);

IF
FlagSet((FLAG)ORI_Laezel_Knows_VossMeetingRaphaelInSharessCaress_d5a087ed-7479-47d1-99e7-6ba9b090f0c5, _, _)
THEN
DB_NOOP(1);
//ToDo: Update Quest journal and map marker

IF
DialogEnded(_VossCampDialog, _)
AND
DB_CAMP_Laezel_VossCampConfrontation_Dialogs(_VossCampDialog)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_RefusedVossInAct2_7ff16fd5-fa94-4ae7-ba2d-e4cef09c9b82)
THEN
PROC_SetOnStage(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, 0);
PROC_SetOnStage(S_GLO_VossRaider_7a134719-7e7b-4a1d-899d-3387db7ce04c, 0);
PROC_SetOnStage(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1); //Edge-case: Laezel left in camp and set off stage by the camp system

IF
DialogEnded(_VossCampDialog, _)
AND
DB_CAMP_Laezel_VossCampConfrontation_Dialogs(_VossCampDialog)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_RefusedVossInAct2_7ff16fd5-fa94-4ae7-ba2d-e4cef09c9b82)
THEN
DB_GLO_DefeatCounter(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, "ORI_Laezel_VossCampConfrontation");
DB_GLO_DefeatCounter(S_GLO_VossRaider_7a134719-7e7b-4a1d-899d-3387db7ce04c, "ORI_Laezel_VossCampConfrontation");
PROC_SetOnStage(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1); //Edge-case: Laezel left in camp and set off stage by the camp system

PROC
PROC_GLO_DefeatCounter_AllDefeated("ORI_Laezel_VossCampConfrontation")
AND
DB_Dead(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
THEN
PROC_TryStartAD((DIALOGRESOURCE)CAMP_VossCampConfrontation_AD_AfterVossFight_733be980-f0e7-60bf-0b46-18fd60580ebf, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

//Fallback if night is missed somehow
IF
LevelGameplayStarted(_CurrentLevel, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_MetVossInAct2_26563f96-bf5a-4895-b63b-036c7571bbbc)
AND
NOT DB_GlobalFlag((FLAG)VISITEDREGION_INT_Main_A_a2e1a618-d211-484e-9389-6b37308b8da1)
AND
_CurrentLevel != "CRE_Main_A"
AND
QRY_OnlyOnce("ORI_Laezel_VossCampConfrontation_FallbackCampsAdded")
THEN
NOT DB_CampNight((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, 5050,(CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_CampNight((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, 8050,(CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9,"WLDMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9,"WLDCAVGRN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9,"WLDCAVSND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9,"WLDUND");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9,"SCLMAIN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9,"HAVEN");
DB_CampNight_Camp((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9,"SHARTEMPLE");
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, 
						 (FLAG)LAEZELCOMPANION_9c5bc0ce-cb2e-4685-b597-89a290837535, 
						 (FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7);
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, 
						 (FLAG)LAEZELAVATAR_cea30880-6e09-4daa-ad17-5411885097f3,
						 (FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7);
DB_CampNight_Requirement((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, 
						 (FLAG)LAEZELCAMP_3a157c66-db4a-48ad-95e5-9659c42c4aa0,
						 (FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7);
DB_CampNight_CancelledBy((FLAG)NIGHT_Laezel_VossCampConfrontation_d6828c76-0e03-4aa1-b980-886fcf49f8a9, (FLAG)Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3);

//END_REGION

//REGION NIGHT_Laezel_SecondNight
//Triggered only during a CRD at the SecondNight camp night
IF
FlagSet((FLAG)ORI_Laezel_State_AgreedOnSecondNight_0b00ec42-3b72-40d1-a39c-032d88525da9, _, _)
THEN
DB_CAMP_SkipSleepCutscene(1);

//END_REGION

//REGION NIGHT_Laezel_Romance2
PROC
PROC_CampNight_StartSelected()
AND
DB_Camp_QueuedNight((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b)
THEN
DB_Camp_LaezelRomance2(1);

PROC
PROC_CampNight_StartSelected()
AND
DB_Camp_QueuedNight((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989)
THEN
DB_Camp_LaezelRomance2(1);

PROC
PROC_CampNight_StartSelected()
AND
DB_Camp_QueuedNight((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9)
THEN
DB_Camp_LaezelRomance2(1);

QRY
QRY_Camp_DoNotHideCamper((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_Camp_QueuedNight((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b)
THEN
DB_NOOP(1);

QRY
QRY_Camp_DoNotHideCamper((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_Camp_QueuedNight((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989)
THEN
DB_NOOP(1);

QRY
QRY_Camp_DoNotHideCamper((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_Camp_QueuedNight((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9)
THEN
DB_NOOP(1);

PROC
PROC_Camp_WakeUpAtNightHook()
AND
DB_Camp_LaezelRomance2(1)
THEN
PROC_SetOnStage(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1);

//If dialog ends with player refusing the duel, they continue sleeping
PROC
PROC_GlobalFlagReactionAfterDialog((FLAG)ORI_Laezel_State_RefusedLaezelInRomance2_fcb3c76e-c8c5-4c52-be1e-e00c00f9c65c)
THEN
NOT DB_Camp_LaezelRomance2(1);

IF
FlagSet((FLAG)CAMP_Laezel_Romance2_Event_LaezelDuelStart_d9ddf643-4065-4798-a2d8-57fd345c113b, _Avatar, _Id)
THEN
DB_Camp_PreventEndOfNight(1);
DB_ORI_Laezel_Romance2_AvatarOpponent((CHARACTER)_Avatar);

IF
FlagSet((FLAG)CAMP_Laezel_Romance2_Event_LaezelDuelStart_d9ddf643-4065-4798-a2d8-57fd345c113b, _, _Id)
AND
DB_Players(_Player)
AND
_Player != S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12
AND
QRY_Camp_GetCamperPos(_Player)
AND
DB_QRYRTN_Camp_GetCamperPos(_Player,_CamperPos)
THEN
TeleportTo(_Player, _CamperPos, "", 0, 0, 0, 0, 0);

PROC
PROC_FlagReactionAfterDialog(_, CAMP_Laezel_Romance2_Event_LaezelDuelStart_d9ddf643-4065-4798-a2d8-57fd345c113b, _)
AND
DB_ORI_Laezel_Romance2_AvatarOpponent(_Avatar)
THEN
ApplyStatus(_Avatar, "ORI_LAEZEL_ROMANCE2_AVATAR_FACTION", -1.0, 1, NULL_00000000-0000-0000-0000-000000000000);
ApplyStatus(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_LAEZEL_ROMANCE2_LAEZEL_FACTION", -1.0, 1, NULL_00000000-0000-0000-0000-000000000000);
PROC_ORI_Laezel_Romance2Fight_Start(_Avatar);

PROC
PROC_ORI_Laezel_Romance2Fight_Start(_)
THEN
DB_CAMP_SkipSleepCutscene(1);
DB_ORI_Laezel_Romance2_EnableADs(1);
DB_CombatReact_AD_OnTurn(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelFirstTurn_2950a8ef-8d2b-83e4-096b-2915af1eabbe, 1);
DB_CombatReact_AD_AppliedStatusGroup(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelImmobilized_8f6bade0-fa8f-3ae1-628f-d82e897978cc, "SG_Restrained");

IF
AutomatedDialogEnded((DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelFirstTurn_2950a8ef-8d2b-83e4-096b-2915af1eabbe, _)
THEN
DB_CombatReact_AD_OnHPPercentage(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelOnBeingHit_0f7c6bc1-36f5-b1ea-1ae8-7d491a5b9e26, 99);

IF
AutomatedDialogEnded((DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelOnBeingHit_0f7c6bc1-36f5-b1ea-1ae8-7d491a5b9e26, _)
THEN
DB_CombatReact_AD_OnHPPercentage(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelOnHalfHealth_b25390ad-f36c-9eda-3638-d8d1cd91ab73, 50);

IF
HitpointsChanged(_Avatar, _RemainingHP)
AND
DB_ORI_Laezel_Romance2_EnableADs(1)
AND
_RemainingHP <= 50.0
AND
DB_ORI_Laezel_Romance2_AvatarOpponent((CHARACTER)_Avatar)
AND
QRY_OnlyOnce("ORI_Laezel_Romance2_LaezelOnAvatarHalfHealth_ADPlayed")
THEN
PROC_TryStartAD((DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelOnAvatarHalfHealth_b2feab99-0ae9-d08c-b2ab-6b7dce7eb34a, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

IF
UseFinished(_Avatar, _Potion, 1)
AND
DB_ORI_Laezel_Romance2_EnableADs(1)
AND
DB_ORI_Laezel_Romance2_AvatarOpponent((CHARACTER)_Avatar)
AND
IsTagged(_Potion, (TAG)POTION_56c99a77-8f6a-4584-8e41-2a3b9f6b5261, 1)
AND
QRY_OnlyOnce("ORI_Laezel_Romance2_LaezelOnAvatarUsingItems_ADPlayed")
THEN
PROC_TryStartAD((DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelOnAvatarUsingItems_2c9eac2a-1461-529f-96e1-f9ea84bcf858, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

IF
AttackedBy((CHARACTER)_AvatarInDuel, (CHARACTER)_PlayerOwner, _, _, _, _, _)
AND
DB_ORI_Laezel_Romance2_EnableADs(1)
AND
DB_ORI_Laezel_Romance2_AvatarOpponent(_Avatar)
AND
NOT DB_ORI_Laezel_Romance2_AvatarOpponent(_PlayerOwner)
AND
IsTagged(_PlayerOwner, (TAG)REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, 0)
AND
QRY_OnlyOnce("CAMP_LaezelRomance2_AD_LaezelOnSomeoneInterfering_ADPlayed")
THEN
PROC_TryStartAD((DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelOnSomeoneInterfering_fe579707-3d54-5fb5-308a-fb751fadee33, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

IF
AttackedBy((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (CHARACTER)_PlayerOwner, _, _, _, _, _)
AND
DB_ORI_Laezel_Romance2_EnableADs(1)
AND
NOT DB_ORI_Laezel_Romance2_AvatarOpponent(_PlayerOwner)
AND
IsTagged(_PlayerOwner, (TAG)REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, 0)
AND
QRY_OnlyOnce("CAMP_LaezelRomance2_AD_LaezelOnSomeoneInterfering_ADPlayed")
THEN
PROC_TryStartAD((DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelOnSomeoneInterfering_fe579707-3d54-5fb5-308a-fb751fadee33, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

PROC
PROC_ORI_Laezel_Romance2Fight_Start(_)
THEN
DB_CAMP_Laezel_Romance2_DuelOngoing(1);

PROC
PROC_ORI_Laezel_Romance2Fight_Start((CHARACTER)_Avatar)
AND
DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
DB_CAMP_Laezel_Romance2_ReturnToAvatar(_Avatar);

PROC
PROC_ORI_Laezel_Romance2Fight_Start((CHARACTER)_Avatar)
THEN
DB_GLO_PartyMembers_BlockReturnToRecruitmentPosition(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
PROC_GLO_PartyMembers_MakeNPC(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
RemoveStatus((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,"LONG_REST");
SetHostileAndEnterCombat((FACTION)CAMP_Laezel_Romance2_Laezel_3dc77873-29b2-418b-97b1-647d85593df0, (FACTION)CAMP_Laezel_Romance2_Avatar_17db6e60-1086-4fbb-b615-8ca6aafb925f, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Avatar);

PROC
PROC_GLO_PartyMembers_MakeNPCHook(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_CAMP_Laezel_Romance2_DuelOngoing(1)
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_ORI_Laezel_Romance2_LaezelFightPosition(_ActiveCamp, _Trigger)
THEN
TeleportTo(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Trigger, "", 0, 0, 0, 0, 1);

IF
HitpointsChanged(_Avatar, _Percentage)
AND
DB_ORI_Laezel_Romance2_AvatarOpponent((CHARACTER)_Avatar)
AND
DB_CAMP_Laezel_Romance2_DuelOngoing(1)
AND
_Percentage <= 20.0
AND
QRY_OnlyOnce("CAMP_Laezel_Romance2_DuelFinished")
THEN
SetHitpoints(_Avatar, 1);
PROC_CAMP_Laezel_Romance2_DuelFinished();

IF
HitpointsChanged(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Percentage)
AND
DB_CAMP_Laezel_Romance2_DuelOngoing(1)
AND
_Percentage <= 20.0
AND
DB_ORI_Laezel_Romance2_AvatarOpponent(_Avatar)
AND
QRY_OnlyOnce("CAMP_Laezel_Romance2_DuelFinished")
THEN
SetHitpoints(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1);
SetFlag((FLAG)CAMP_Laezel_Romance2_Event_WonDuel_be40f533-843e-4d5b-9aef-0dc54eab1b5c, _Avatar);
PROC_CAMP_Laezel_Romance2_DuelFinished();

QRY
QRY_CAMP_VanityArmour_BlockChangeForCharacterDuringFight(_)
AND
DB_Camp_QueuedNight((FLAG)NIGHT_Laezel_Romance2_66c4c3b0-b608-46af-86b2-3e3dd4e44f5b)
THEN
DB_NOOP(1);

QRY
QRY_CAMP_VanityArmour_BlockChangeForCharacterDuringFight(_)
AND
DB_Camp_QueuedNight((FLAG)NIGHT_Laezel_Romance2_Karlach_be83bf66-7298-42b2-8e80-9df60ad00989)
THEN
DB_NOOP(1);

QRY
QRY_CAMP_VanityArmour_BlockChangeForCharacterDuringFight(_)
AND
DB_Camp_QueuedNight((FLAG)NIGHT_Laezel_Romance2_SkippedRomance1_242309e0-a758-44b4-85cc-90fc24986df9)
THEN
DB_NOOP(1);

QRY
QRY_CAMP_VanityArmour_BlockChangeForCharacter((CHARACTER)_, (DIALOGRESOURCE)CAMP_Laezel_ROM_Romance2_AfterDuel_4b526494-b38d-d768-b1db-5f72b758ab15)
THEN
DB_NOOP(1);

PROC
PROC_CAMP_Laezel_Romance2_DuelFinished()
THEN
NOT DB_ORI_Laezel_Romance2_EnableADs(1);
NOT DB_CombatReact_AD_OnTurn(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelFirstTurn_2950a8ef-8d2b-83e4-096b-2915af1eabbe, 1);
NOT DB_CombatReact_AD_AppliedStatusGroup(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelImmobilized_8f6bade0-fa8f-3ae1-628f-d82e897978cc, "SG_Restrained");
NOT DB_CombatReact_AD_OnHPPercentage(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelOnBeingHit_0f7c6bc1-36f5-b1ea-1ae8-7d491a5b9e26, 99);
NOT DB_CombatReact_AD_OnHPPercentage(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelOnHalfHealth_b25390ad-f36c-9eda-3638-d8d1cd91ab73, 50);

PROC
PROC_CAMP_Laezel_Romance2_DuelFinished()
THEN
PROC_NotifyWhenReadyToMoveOn((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Laezel_Romance2_ReadyToStartAfterDuel");

//Restore factions
PROC
PROC_CAMP_Laezel_Romance2_DuelFinished()
AND
DB_CAMP_Laezel_Romance2_DuelOngoing(1)
AND
DB_ORI_Laezel_Romance2_AvatarOpponent(_Avatar)
THEN
RemoveStatus(_Avatar, "ORI_LAEZEL_ROMANCE2_AVATAR_FACTION");
RemoveStatus(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_LAEZEL_ROMANCE2_LAEZEL_FACTION");
NOT DB_GLO_PartyMembers_BlockReturnToRecruitmentPosition(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

PROC
PROC_CAMP_Laezel_Romance2_DuelFinished()
AND
DB_CAMP_Laezel_Romance2_DuelOngoing(1)
AND
DB_CAMP_Laezel_Romance2_ReturnToAvatar(_Avatar)
THEN
PROC_GLO_PartyMembers_Add((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (CHARACTER)_Avatar);
NOT DB_CAMP_Laezel_Romance2_ReturnToAvatar(_Avatar);

PROC
PROC_CAMP_Laezel_Romance2_DuelFinished()
AND
DB_CAMP_Laezel_Romance2_DuelOngoing(1)
AND
NOT DB_CAMP_Laezel_Romance2_ReturnToAvatar(_)
THEN
DB_CAMP_Laezel_Romance2_SendToCampAfterRomanceScene(1);

PROC
PROC_CAMP_Laezel_Romance2_DuelFinished()
AND
DB_CAMP_Laezel_Romance2_DuelOngoing(1)
THEN
NOT DB_CAMP_Laezel_Romance2_DuelOngoing(1);

PROC
PROC_ReadyToMoveOn((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_Laezel_Romance2_ReadyToStartAfterDuel")
AND
DB_ORI_Laezel_Romance2_AvatarOpponent(_Avatar)
AND
NOT QRY_StartDialogCustom_Fixed((DIALOGRESOURCE)CAMP_Laezel_ROM_Romance2_AfterDuel_4b526494-b38d-d768-b1db-5f72b758ab15, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Avatar, 0, 0, 0, 0)
THEN
DB_Dialogs_DatingDialog((DIALOGRESOURCE)CAMP_Laezel_ROM_Romance2_AfterDuel_4b526494-b38d-d768-b1db-5f72b758ab15);
PROC_CampRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_Laezel_ROM_Romance2_AfterDuel_4b526494-b38d-d768-b1db-5f72b758ab15, 0);
PROC_Try_CampRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,1);

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_ROM_Romance2_AfterDuel_4b526494-b38d-d768-b1db-5f72b758ab15, _)
AND
DB_Players(_Player)
THEN
PROC_Camp_TryLeaveNightMode((CHARACTER)_Player);

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_ROM_Romance2_AfterDuel_4b526494-b38d-d768-b1db-5f72b758ab15, _Id)
AND
DB_CAMP_Laezel_Romance2_SendToCampAfterRomanceScene(1)
AND
DB_ORI_Laezel_Romance2_AvatarOpponent(_Avatar)
THEN
NOT DB_CAMP_Laezel_Romance2_SendToCampAfterRomanceScene(1);
PROC_ORI_SendToCampAfterDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Id, "Walk", _Avatar);

PROC
PROC_LongRest()
AND
DB_ORI_Laezel_Romance2_AvatarOpponent(_Avatar)
THEN
NOT DB_ORI_Laezel_Romance2_AvatarOpponent(_Avatar);

PROC
PROC_LongRest()
AND
DB_Camp_LaezelRomance2(1)
THEN
NOT DB_CAMP_SkipSleepCutscene(1);
NOT DB_Camp_LaezelRomance2(1);
PROC_ORI_Laezel_Romance2_FallbackCleanup();
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_Laezel_ROM_Romance2_AfterDuel_4b526494-b38d-d768-b1db-5f72b758ab15,(FLAG)NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_ORI_Laezel_Romance2_FallbackCleanup()
THEN
NOT DB_ORI_Laezel_Romance2_EnableADs(1);
NOT DB_CombatReact_AD_OnTurn(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelFirstTurn_2950a8ef-8d2b-83e4-096b-2915af1eabbe, 1);
NOT DB_CombatReact_AD_AppliedStatusGroup(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelImmobilized_8f6bade0-fa8f-3ae1-628f-d82e897978cc, "SG_Restrained");
NOT DB_CombatReact_AD_OnHPPercentage(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelOnBeingHit_0f7c6bc1-36f5-b1ea-1ae8-7d491a5b9e26, 99);
NOT DB_CombatReact_AD_OnHPPercentage(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)CAMP_LaezelRomance2_AD_LaezelOnHalfHealth_b25390ad-f36c-9eda-3638-d8d1cd91ab73, 50);
NOT DB_GLO_PartyMembers_BlockReturnToRecruitmentPosition(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
NOT DB_CAMP_Laezel_Romance2_DuelOngoing(1);
//END_REGION

//REGION NIGHT_Laezel_VlaakithVisit
IF
DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_Act3_ORI_Laezel(1)
AND
NOT DB_CampNight_CFM((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, (DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelAvatar_30753d97-84d4-7171-e084-9f815cd4ee27)
AND
DB_CampNight((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, _)
THEN
NOT DB_CampNight_CFM((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, (DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2);
DB_CampNight_CFM((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, (DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelAvatar_30753d97-84d4-7171-e084-9f815cd4ee27);
DB_CampfireMoment_FixedSpeakers((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelAvatar_30753d97-84d4-7171-e084-9f815cd4ee27, S_GLO_Vlaakith_6b00f9fb-b932-4ac9-8ed8-1ca89dd7d247);
DB_CampfireMoment_FixedPlayer((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelAvatar_30753d97-84d4-7171-e084-9f815cd4ee27, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

IF
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_Act3_ORI_Laezel(1)
AND
NOT DB_CampNight_CFM((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, (DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2)
AND
DB_CampNight((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, _)
THEN
NOT DB_CampNight_CFM((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, (DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelAvatar_30753d97-84d4-7171-e084-9f815cd4ee27);
DB_CampNight_CFM((FLAG)NIGHT_Laezel_VlaakithVisit_254a4c0b-9fd2-4b41-97e9-5f60e338e062, (DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2);
DB_CampfireMoment_FixedSpeakers((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, S_GLO_Vlaakith_6b00f9fb-b932-4ac9-8ed8-1ca89dd7d247, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

//Setup Vlaakith offstage for the dialog to play
PROC
PROC_CampfireMoment_PreDialog(_VlaakithVisitDialog)
AND
DB_CAMP_Laezel_VlaakithVisit_OMDialogs(_VlaakithVisitDialog)
AND
DB_ActiveCamp(_ActiveCamp)
AND
DB_Camp(_ActiveCamp,_,_,_Entrypoint)
THEN
TeleportTo(S_GLO_Vlaakith_6b00f9fb-b932-4ac9-8ed8-1ca89dd7d247,_Entrypoint);
PROC_SetOnStage(S_GLO_Vlaakith_6b00f9fb-b932-4ac9-8ed8-1ca89dd7d247, 0);
//END_REGION

//REGION Gith Radar
//If picked up from Voss's body - VB
IF
AddedTo((ITEM)S_GLO_GithRadar_4aca442e-5ecb-4611-b481-5eaf35596dea, _Player, _)
AND
DB_Players((CHARACTER)_Player)
AND
DB_Defeated(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
QRY_OnlyOnce("ORI_Laezel_CommentedAboutGithRadar")
THEN
StartVoiceBark((VOICEBARKRESOURCE)CAMP_VossCampConfrontation_VB_PickupGithRadar_57d1f418-1c8e-94e8-b7e4-47e4f6933bcf, (CHARACTER)_Player);
//END_REGION

//REGION Laezel WRDs

//REGION WRD - After Voss Camp Confrontation
IF
DialogEnded(CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c, _)
THEN
PROC_CampRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,(DIALOGRESOURCE)GLO_Laezel_WRD_AfterVossCampConfrontation_320ec283-5803-0bf5-5c1f-77fe0961bef6,(FLAG)NULL_00000000-0000-0000-0000-000000000000, 0, 0);
PROC_Try_CampRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1);

//END_REGION

//REGION WRD - After Orpheus in Intermezzo
IF
ReadyCheckPassed("INT_EmperorRevealed_ReturnReadyCheck")
THEN
DB_INT_Laezel_WaitingToReturnToCamp(1);

IF
DB_InCamp((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_INT_Laezel_WaitingToReturnToCamp(1)
THEN
NOT DB_INT_Laezel_WaitingToReturnToCamp(1);
PROC_CampRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,(DIALOGRESOURCE)INT_Laezel_WRD_AboutOrpheusAfterIntermezzo_54bd43a1-faf4-0143-8d75-2318ea061fbc,(FLAG)NULL_00000000-0000-0000-0000-000000000000, 0, 0);
PROC_Try_CampRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1);

IF
FlagSet((FLAG)ORI_Laezel_State_DiscussedOrpheusAfterIntermezzo_be2155c2-1e8d-4c74-9b15-567bd1bcfcfc, _, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)INT_Laezel_WRD_AboutOrpheusAfterIntermezzo_54bd43a1-faf4-0143-8d75-2318ea061fbc, (FLAG)NULL_00000000-0000-0000-0000-000000000000);

IF
DialogEnded((DIALOGRESOURCE)CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)INT_Laezel_WRD_AboutOrpheusAfterIntermezzo_54bd43a1-faf4-0143-8d75-2318ea061fbc, (FLAG)NULL_00000000-0000-0000-0000-000000000000);
//END_REGION

//REGION WRD - After Vlaakith Visit in Act3
IF
DialogEnded(CAMP_Laezel_VlaakithVisit_CFM_LaezelCom_5d6a5411-28a0-89d1-2e25-b0c4bf4d46e2, _)
THEN
PROC_CampRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,(DIALOGRESOURCE)CAMP_Laezel_WRD_AfterVlaakithVisit_733e7f87-f3b7-902a-487b-9af85c13590d,(FLAG)NULL_00000000-0000-0000-0000-000000000000, 0, 0);
PROC_Try_CampRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1);

IF
FlagSet((FLAG)CURRENTREGION_END_Main_140b4d3e-6cc7-48cb-b66f-dbc4eba710e1, _, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,(DIALOGRESOURCE)CAMP_Laezel_WRD_AfterVlaakithVisit_733e7f87-f3b7-902a-487b-9af85c13590d,(FLAG)NULL_00000000-0000-0000-0000-000000000000);
//END_REGION

//REGION WRD - Learning about Orphic Hammer
IF
FlagSet((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2, _, _)
AND
NOT DB_GlobalFlag((FLAG)WYR_RaphaelTango_Event_BeganSoloScene_1048973a-9ed0-89e5-ce68-11e03fafc22c)
THEN
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_LearnedAboutOrphicHammer_ebc25934-7068-3bc2-f997-79b7d03b4737, (FLAG)NULL_00000000-0000-0000-0000-000000000000, (GUIDSTRING)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0, 0);

IF
FlagSet((FLAG)LOW_HouseOfHope_State_PlayersStoleMainTreasure_ffa3d3be-d30f-296f-d794-4c24d63eb25c, _, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_LearnedAboutOrphicHammer_ebc25934-7068-3bc2-f997-79b7d03b4737, (FLAG)NULL_00000000-0000-0000-0000-000000000000);
//END_REGION

//REGION WRD - After speaking to Raphael in SC
IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_Raphael_SoloScene_e95ac422-e05d-f119-68fd-e382d71f7c79, _)
AND
NOT DB_GlobalFlag((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2)
THEN
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, (FLAG)NULL_00000000-0000-0000-0000-000000000000, (GUIDSTRING)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0);

//Should queue the same WRD again in this case, a different greeting node will play
IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_Raphael_SoloScene_e95ac422-e05d-f119-68fd-e382d71f7c79, _)
AND
DB_GlobalFlag((FLAG)GLO_Orpheus_Knows_OrphicHammerIsTheKey_980541fb-1483-ea1a-3387-64405eace9a2)
AND
NOT DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
THEN
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, (FLAG)NULL_00000000-0000-0000-0000-000000000000, (GUIDSTRING)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0);

//This should also queue the same WRD again with yet another greeting node
IF
DialogEnded((DIALOGRESOURCE)WYR_RaphaelTango_Raphael_SoloScene_e95ac422-e05d-f119-68fd-e382d71f7c79, _)
AND
DB_GlobalFlag((FLAG)GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc)
THEN
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, (FLAG)NULL_00000000-0000-0000-0000-000000000000, (GUIDSTRING)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0);

IF
FlagSet((FLAG)WYR_RaphaelTango_Event_VossFullDialogue_d50e7399-5968-34d4-4f5a-b6c16efee0e0, _, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)WYR_RaphaelTango_WRD_LaezelAfterRaphaelSoloScene_f540d320-bebb-2f8f-9a24-a734d1e47f5c, (FLAG)NULL_00000000-0000-0000-0000-000000000000);
//END_REGION

//REGION WRD - After obtaining Hammer from HoH
IF
FlagSet((FLAG)ORI_Laezel_State_GotHammerFromHoH_8a8dd999-aa9e-42b2-9c84-e63b5eb6bc5e, _, _)
AND
NOT DB_GlobalFlag((FLAG)CURRENTREGION_END_Main_140b4d3e-6cc7-48cb-b66f-dbc4eba710e1)
THEN
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)LOW_HouseOfHope_WRD_LaezelTookHammerFromHoH_154f0dd8-568c-5631-a8f8-85ffebbfcfa3, (FLAG)NULL_00000000-0000-0000-0000-000000000000, (GUIDSTRING)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0);
//END_REGION

//REGION WRD - Got Silver Sword
IF
FlagSet((FLAG)ORI_Laezel_State_TookSilverSword_a1e6810f-08e9-4994-b780-098e1635f60a, _, _)
AND
NOT DB_GlobalFlag((FLAG)Laezel_InParty2_Event_AskedSilverSword_17657401-977c-edce-4a9f-cbf61a2de36a)
THEN
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)LOW_Laezel_WRD_GotSilverSword_61a02700-e193-7b09-29bc-aee682d06a15, (FLAG)NULL_00000000-0000-0000-0000-000000000000, (GUIDSTRING)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0);

IF
FlagSet((FLAG)Laezel_InParty2_Event_AskedSilverSword_17657401-977c-edce-4a9f-cbf61a2de36a, _, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)LOW_Laezel_WRD_GotSilverSword_61a02700-e193-7b09-29bc-aee682d06a15, (FLAG)NULL_00000000-0000-0000-0000-000000000000);
//END_REGION

//REGION IPRD - Voss Dead
IF
FlagSet((FLAG)GLO_Voss_Knows_PlayersKnowVossIsDead_db411e5e-c525-4fe1-b532-097bb5c5ee15, _, _)
AND
DB_GlobalFlag((FLAG)VISITEDREGION_BGO_Main_A_40f06537-814f-4796-b012-5ffaa648a8d9)
AND
NOT DB_GlobalFlag((FLAG)CURRENTREGION_END_Main_140b4d3e-6cc7-48cb-b66f-dbc4eba710e1)
AND
NOT DB_GlobalFlag((FLAG)Laezel_InParty2_Event_OrpheusPathVossKilled_a19ee16e-a8ae-75e7-b2c1-d41fe6b2a836)
THEN
DB_ExclamationDialog_NeverStop((DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_VossDead_70e3c905-55ed-40e4-82f2-f8f113bda331);
DB_RelationshipDialog_WRD_TriggerInCamp((DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_VossDead_70e3c905-55ed-40e4-82f2-f8f113bda331);
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_VossDead_70e3c905-55ed-40e4-82f2-f8f113bda331, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0);

IF
FlagSet((FLAG)Laezel_InParty2_Event_OrpheusPathVossKilled_a19ee16e-a8ae-75e7-b2c1-d41fe6b2a836, _, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_VossDead_70e3c905-55ed-40e4-82f2-f8f113bda331);

IF
FlagSet((FLAG)CURRENTREGION_END_Main_140b4d3e-6cc7-48cb-b66f-dbc4eba710e1, _, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_VossDead_70e3c905-55ed-40e4-82f2-f8f113bda331);
//END_REGION

//REGION IPRD - Voss attacked and teleported out in the Sewers
PROC
PROC_GLO_VossSewers_VossTeleportedOutAfterAttacked_Hook((CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
DB_ExclamationDialog_NeverStop((DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_VossAttackedInSewers_838ebe73-7ccc-42d8-9ca1-91bea8121663);
DB_RelationshipDialog_WRD_TriggerInCamp((DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_VossAttackedInSewers_838ebe73-7ccc-42d8-9ca1-91bea8121663);
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_VossAttackedInSewers_838ebe73-7ccc-42d8-9ca1-91bea8121663, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0);

IF
FlagSet((FLAG)CURRENTREGION_END_Main_140b4d3e-6cc7-48cb-b66f-dbc4eba710e1, _, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_VossAttackedInSewers_838ebe73-7ccc-42d8-9ca1-91bea8121663);

//END_REGION

//END_REGION

//REGION Orpheus Questions
IF
FlagSet((FLAG)Laezel_InParty2_Event_Comet_cd92769a-9357-2d1e-ea15-c4898662a217, _Character, _)
THEN
DB_ORI_Laezel_AskedAboutOrpheus_Comet(_Character);

IF
FlagSet((FLAG)Laezel_InParty2_Event_WhyKeepOrpheusAlive_2af1a373-1a1d-b29a-8778-a2160c8b8597, _Character, _)
THEN
DB_ORI_Laezel_AskedAboutOrpheus_WhyKeepOrpheusAlive(_Character);

IF
FlagSet((FLAG)Laezel_InParty2_Event_KeepAlive_db6d9457-94af-9e5d-5a70-ff5014592a74, _Character, _)
THEN
DB_ORI_Laezel_AskedAboutOrpheus_KeepAlive(_Character);

IF
FlagSet((FLAG)Laezel_InParty_Event_AskedAboutHonourGuard_802e7aba-8248-a7ff-e5fe-0f2091264634, _Character, _)
THEN
DB_ORI_Laezel_AskedAboutOrpheus_AskedAboutHonourGuard(_Character);

IF
FlagSet((FLAG)Laezel_InParty2_Event_Protection_6fae951a-7d68-cd2a-0242-9ba27d9c11a5, _Character, _)
THEN
DB_ORI_Laezel_AskedAboutOrpheus_Protection(_Character);

IF
DB_ORI_Laezel_AskedAboutOrpheus_Comet(_Character)
AND
DB_ORI_Laezel_AskedAboutOrpheus_WhyKeepOrpheusAlive(_Character)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_Knows_MetVlaakith_c93015c2-6ae4-4013-b439-433b588f881c) //This unlocks the KeepAlive topic
AND
DB_ORI_Laezel_AskedAboutOrpheus_AskedAboutHonourGuard(_Character)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
SetFlag((FLAG)ORI_Laezel_State_AskedAllAboutOrpheusQuestions_ce9f0fd3-812c-422b-ad56-16ec8279a6c2, _Character);

IF
DB_ORI_Laezel_AskedAboutOrpheus_Comet(_Character)
AND
DB_ORI_Laezel_AskedAboutOrpheus_WhyKeepOrpheusAlive(_Character)
AND
DB_ORI_Laezel_AskedAboutOrpheus_KeepAlive(_Character)
AND
DB_ORI_Laezel_AskedAboutOrpheus_AskedAboutHonourGuard(_Character)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
SetFlag((FLAG)ORI_Laezel_State_AskedAllAboutOrpheusQuestions_ce9f0fd3-812c-422b-ad56-16ec8279a6c2, _Character);

IF
DB_ORI_Laezel_AskedAboutOrpheus_Comet(_Character)
AND
DB_ORI_Laezel_AskedAboutOrpheus_WhyKeepOrpheusAlive(_Character)
AND
DB_ORI_Laezel_AskedAboutOrpheus_KeepAlive(_Character)
AND
DB_ORI_Laezel_AskedAboutOrpheus_AskedAboutHonourGuard(_Character)
AND
DB_ORI_Laezel_AskedAboutOrpheus_Protection(_Character) //Vlaakithpath only question
THEN
SetFlag((FLAG)ORI_Laezel_State_AskedAllAboutOrpheusQuestions_ce9f0fd3-812c-422b-ad56-16ec8279a6c2, _Character);

IF
DB_ORI_Laezel_AskedAboutOrpheus_Comet(_Character)
AND
DB_ORI_Laezel_AskedAboutOrpheus_WhyKeepOrpheusAlive(_Character)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_Knows_MetVlaakith_c93015c2-6ae4-4013-b439-433b588f881c) //This unlocks the KeepAlive topic
AND
DB_ORI_Laezel_AskedAboutOrpheus_AskedAboutHonourGuard(_Character)
AND
DB_ORI_Laezel_AskedAboutOrpheus_Protection(_Character) //Vlaakithpath only question
THEN
SetFlag((FLAG)ORI_Laezel_State_AskedAllAboutOrpheusQuestions_ce9f0fd3-812c-422b-ad56-16ec8279a6c2, _Character);

IF
FlagCleared((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56, _, _)
AND
DB_Avatars(_Avatar)
AND
NOT DB_ORI_Laezel_AskedAboutOrpheus_Protection(_Avatar)
AND
GetFlag(ORI_Laezel_State_AskedAllAboutOrpheusQuestions_ce9f0fd3-812c-422b-ad56-16ec8279a6c2, _Avatar, 1)
THEN
ClearFlag(ORI_Laezel_State_AskedAllAboutOrpheusQuestions_ce9f0fd3-812c-422b-ad56-16ec8279a6c2, _Avatar);

IF
FlagSet((FLAG)ORI_Laezel_Knows_MetVlaakith_c93015c2-6ae4-4013-b439-433b588f881c, _, _)
AND
DB_Avatars(_Avatar)
AND
GetFlag(ORI_Laezel_State_AskedAllAboutOrpheusQuestions_ce9f0fd3-812c-422b-ad56-16ec8279a6c2, _Avatar, 1)
THEN
ClearFlag(ORI_Laezel_State_AskedAllAboutOrpheusQuestions_ce9f0fd3-812c-422b-ad56-16ec8279a6c2, _Avatar);

//END_REGION

//REGION Killing Voss logic
//Setting flag on the avatar of the user who killed Voss - except if they did it while controlling Laezel
IF
AttackedBy(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, _AttackerOwner, _Attacker, _, _, _, _)
AND
DB_State_Current(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, _StateTree, _CurrentState)
AND
DB_GLO_Voss_PermanentHostilityIfAttackedInState(_StateTree, _CurrentState)
AND
DB_PartyMembers((CHARACTER)_AttackerOwner)
AND
QRY_GetCharacterOwnerIfItemSummon(_AttackerOwner, _Attacker)
AND
DB_QRYRTN_GetCharacterOwnerIfItemSummon(_MainAttacker)
AND
QRY_OnlyOnce("WYR_Voss_TurnedHostileAtSC")
THEN
PROC_GLO_Voss_PermanentHostilityAgainstTarget(_MainAttacker);

IF
AttackedBy(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, _AttackerOwner, _Attacker, _, _, _, _)
AND
DB_CurrentLevel("CTY_Main_A") //Only time he's in CTY_Main_A is while he's in the sewers and this should always apply if he's attacked there
AND
DB_PartyMembers((CHARACTER)_AttackerOwner)
AND
QRY_GetCharacterOwnerIfItemSummon(_AttackerOwner, _Attacker)
AND
DB_QRYRTN_GetCharacterOwnerIfItemSummon(_MainAttacker)
AND
QRY_OnlyOnce("WYR_Voss_TurnedHostileInSewers")
THEN
PROC_GLO_Voss_PermanentHostilityAgainstTarget(_MainAttacker);

PROC
PROC_GLO_Voss_PermanentHostilityAgainstTarget((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
SetFlag((FLAG)ORI_Laezel_State_VossKiller_361ade1f-df33-40da-bea7-a58e1ce06576, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

PROC
PROC_GLO_Voss_PermanentHostilityAgainstTarget(_Attacker)
AND
_Attacker != S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12
AND
DB_Avatars(_Attacker)
THEN
SetFlag((FLAG)ORI_Laezel_State_VossKiller_361ade1f-df33-40da-bea7-a58e1ce06576, _Attacker);

PROC
PROC_GLO_Voss_PermanentHostilityAgainstTarget(_Attacker)
AND
_Attacker != S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12
AND
NOT DB_Avatars(_Attacker)
AND
QRY_GetBestAvatarForCompanion(_Attacker)
AND
DB_QRYRTN_GetBestAvatarForCompanion(_Attacker, _Avatar)
THEN
SetFlag((FLAG)ORI_Laezel_State_VossKiller_361ade1f-df33-40da-bea7-a58e1ce06576, _Avatar);

PROC
PROC_GLO_Voss_PermanentHostilityAgainstTarget(_)
AND
GetFaction(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, _VossFaction)
THEN
DB_CombatReact_AD_OnEntered(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea,(DIALOGRESOURCE)LOW_Laezel_AD_VossSewersAttackedByPlayer_c53e5242-8129-c723-3bcf-1180c71b0b32);
PROC_SetRelationToPlayers(_VossFaction, 0);
PROC_ORI_Laezel_CheckVossAttackedApprovalDrop();

PROC
PROC_ORI_Laezel_CheckVossAttackedApprovalDrop()
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
THEN
PROC_ChangeApprovalRatingForAllAvatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, -20);

IF
DB_Is_InCombat(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, _Id)
AND
DB_State_Current(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, _StateTree, _CurrentState)
AND
DB_GLO_Voss_PermanentHostilityIfAttackedInState(_StateTree, _CurrentState)
AND
DB_Players(_Player)
AND
DB_Is_InCombat(_Player, _Id)
AND
IsEnemy((CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea, _Player, 1)
AND
QRY_OnlyOnce("WYR_VossSC_TurnedHostile")
THEN
DB_CombatReact_AD_OnNextTurn(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea,(DIALOGRESOURCE)LOW_Laezel_AD_VossSewersAttackedByPlayer_c53e5242-8129-c723-3bcf-1180c71b0b32);

IF
DB_Dead(S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_Sees((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
AND
DB_GlobalFlag((FLAG)VISITEDREGION_BGO_Main_A_40f06537-814f-4796-b012-5ffaa648a8d9)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_IsOnOrpheusPath_97244ccc-a6b5-403e-9cfe-a3502eb4af56)
AND
QRY_OnlyOnce("ORI_Laezel_VlaakithPathCommentsOnVossDead")
THEN
PROC_TryStartAD((DIALOGRESOURCE)CAMP_VossCampConfrontation_AD_AfterVossFight_733be980-f0e7-60bf-0b46-18fd60580ebf, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

QRY
QRY_CorpseLooting_BlockMakeOwned((CHARACTER)S_GLO_GithKnight_2adce2df-0799-49dc-b867-ba7ca21e9aea)
THEN
DB_NOOP(1);

//Obtaining the Silver Sword
IF
TemplateAddedTo((ROOT)MAG_GreaterSilver_Greatsword_f01c3f5d-c542-420f-86c5-bdddf7819e29, _SilverSword, _Player, _)
AND
DB_Players((CHARACTER)_Player)
THEN
DB_HasItemEvent((ITEM)_SilverSword, (FLAG)ORI_Laezel_State_HasSilverSword_5fa3c5e1-c6c6-40a5-98ba-88e4c7f820db);

IF
FlagSet((FLAG)ORI_Laezel_State_HasSilverSword_5fa3c5e1-c6c6-40a5-98ba-88e4c7f820db, _Player, _)
AND
DB_Players((CHARACTER)_Player)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_TookSilverSword_a1e6810f-08e9-4994-b780-098e1635f60a)
THEN
SetFlag((FLAG)ORI_Laezel_State_TookSilverSword_a1e6810f-08e9-4994-b780-098e1635f60a);

//END_REGION

//REGION Karlach Romance 1 Bypass
IF
DB_GlobalFlag((FLAG)GLO_ForgingOfTheHeart_State_KarlachSecondUpgrade_f6dc0de4-1089-43c0-b392-306a9a44387c)
AND
DB_Avatars((CHARACTER)S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c)
THEN
SetFlag((FLAG)ORI_Karlach_State_CanRomanceLaezel_467800f4-89b1-4d70-a327-3e6e24e0e78c, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c);

//END_REGION

//REGION Goblin Hunt Night
PROC
PROC_DialogFlagSetup((DIALOGRESOURCE)CAMP_GoblinHuntCelebration_SD_SelectNight_750df06d-5a74-8f6b-cd1f-947055afbc2e, _ID)
AND
DB_Players(_Player)
AND
NOT DB_GlobalFlag((FLAG)CAMP_GoblinHuntCelebration_SD_ROM_NightWithLaezel_State_Happened_8860bafa-bdb3-2854-b664-50868c13c9a3)
AND
GetFlag(ORI_Laezel_Event_Act1RomanceAccept_67d4a4cb-7506-f12c-cff9-473871d4d646, _Player, 1)
AND
GetFlag(ORI_State_DatingLaezel_86eaa84a-350b-401b-8b43-b53eeb534579, _Player, 1)
THEN
SetFlag((FLAG)CAMP_GoblinHunt_State_LaezelAgreedBefore_ed47bc1e-699e-4de0-9d09-6da14e5327e3, _Player);
//END_REGION

//REGION Romance 1 activation conditions
//Romance question becomes available
IF
FlagSet(_Flag, _, _)
AND
DB_ORI_Laezel_Romance1ActivationFlags(_Flag)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_CanAskStartRomance_cc04358c-256d-4f2c-bcdb-8b1ffa211874)
THEN
SetFlag((FLAG)ORI_Laezel_State_CanAskStartRomance_cc04358c-256d-4f2c-bcdb-8b1ffa211874);

IF
FlagSet(_Flag, _, _)
AND
DB_ORI_Laezel_Romance1ActivationFlags_FallbackRegions(_Flag)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_CanAskStartRomance_cc04358c-256d-4f2c-bcdb-8b1ffa211874)
THEN
DB_LongRestCountDown(1,(FLAG)ORI_Laezel_State_CanAskStartRomance_cc04358c-256d-4f2c-bcdb-8b1ffa211874);

//Trigger IPRD after the defeated flags are set
IF
FlagSet(_Flag, _, _)
AND
DB_ORI_Laezel_Romance1ActivationFlags(_Flag)
AND
DB_Players((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
QRY_GetBestAvatarForCompanion((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_QRYRTN_GetBestAvatarForCompanion((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Avatar)
AND
QRY_CompanionHasSingleAttachedAvatar((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
_Avatar != S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c
AND
GetApprovalRating((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Avatar, _Approval)
AND
_Approval >= 20
AND
GetFlag((FLAG)ORI_Laezel_Event_Act1Proposition_4ed664ac-f511-bbef-84bd-6d12d7db9d9d, _Avatar, 0)
AND
GetFlag((FLAG)ORI_State_Partnered_6c1a31e8-1d3d-42a5-af4f-72ef7a798f74, _Avatar, 0)
AND
GetFlag((FLAG)ORI_State_DoubleDating_41320aeb-8e1a-433d-a82e-3d78aff578da, _Avatar, 0)
AND
GetFlag((FLAG)ORI_State_WasPartneredWithLaezel_6d402d9b-7af9-43ea-b0eb-98e9612dde27, _Avatar, 0)
AND
GetFlag((FLAG)ORI_State_DatingLaezel_86eaa84a-350b-401b-8b43-b53eeb534579, _Avatar, 0)
THEN
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, (FLAG)ORI_Laezel_IPRD_LaezelInitiatesRomance_a5777360-1b79-466e-9bde-cab4931ded37, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0, 20);

//Block Romance question after the Vlaakith Betrayal until after Voss encounter
IF
FlagSet((FLAG)ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7, _, _)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_TemporaryBlockInitiatingRomance_eefd9c73-2b56-4564-a003-ec284ec88c57)
AND
GetFlag((FLAG)ORI_State_Dating_a3346d5b-c54b-4c73-bf18-0a2bf90c35da, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0)
THEN
SetFlag((FLAG)ORI_Laezel_State_TemporaryBlockInitiatingRomance_eefd9c73-2b56-4564-a003-ec284ec88c57);

IF
FlagSet((FLAG)CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d, _, _)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_TemporaryBlockInitiatingRomance_eefd9c73-2b56-4564-a003-ec284ec88c57)
AND
GetFlag((FLAG)ORI_State_Dating_a3346d5b-c54b-4c73-bf18-0a2bf90c35da, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0)
THEN
SetFlag((FLAG)ORI_Laezel_State_TemporaryBlockInitiatingRomance_eefd9c73-2b56-4564-a003-ec284ec88c57);

IF
FlagSet((FLAG)ORI_Laezel_State_MetVossInAct2_26563f96-bf5a-4895-b63b-036c7571bbbc, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_TemporaryBlockInitiatingRomance_eefd9c73-2b56-4564-a003-ec284ec88c57)
THEN
DB_ORI_Laezel_ClearTemporaryBlockInitiatingRomanceFlagAfterLongRest(1);

IF
DB_CurrentLevel(_Level)
AND
_Level != "CRE_Main_A"
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_TemporaryBlockInitiatingRomance_eefd9c73-2b56-4564-a003-ec284ec88c57)
THEN
ClearFlag((FLAG)ORI_Laezel_State_TemporaryBlockInitiatingRomance_eefd9c73-2b56-4564-a003-ec284ec88c57);

PROC
PROC_LongRest()
AND
DB_ORI_Laezel_ClearTemporaryBlockInitiatingRomanceFlagAfterLongRest(1)
THEN
NOT DB_ORI_Laezel_ClearTemporaryBlockInitiatingRomanceFlagAfterLongRest(1);
ClearFlag((FLAG)ORI_Laezel_State_TemporaryBlockInitiatingRomance_eefd9c73-2b56-4564-a003-ec284ec88c57);
//END_REGION

//REGION Gith Egg Related
IF
AddedTo(S_CRE_GithyankiEgg_999b6dd7-2901-4604-8280-1931a5217a94, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _)
THEN
SetFlag((FLAG)ORI_Laezel_State_CarryingGithEgg_e59dca02-3c76-4e0e-9e3f-e5d4e37a7652);

IF
RemovedFrom(S_CRE_GithyankiEgg_999b6dd7-2901-4604-8280-1931a5217a94, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CarryingGithEgg_e59dca02-3c76-4e0e-9e3f-e5d4e37a7652)
THEN
ClearFlag((FLAG)ORI_Laezel_State_CarryingGithEgg_e59dca02-3c76-4e0e-9e3f-e5d4e37a7652);

//Caring about egg logic
IF
AddedTo(S_CRE_GithyankiEgg_999b6dd7-2901-4604-8280-1931a5217a94, _Player, _)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_Players((CHARACTER)_Player)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b)
THEN
SetFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b);

IF
FlagSet((FLAG)CRE_Hatchery_State_EggDestroyed_b4b6244e-2c61-479b-95ef-8238dfee3e22, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b)
THEN
ClearFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b);

//WRD reaction after getting egg from Hatchery
IF
AddedTo(S_CRE_GithyankiEgg_999b6dd7-2901-4604-8280-1931a5217a94, _Player, _)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_Players((CHARACTER)_Player)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT QRY_ORI_Laezel_TooFarToReactToEggEvent((FLAG)ORI_Laezel_State_WantsToTalkAboutGettingGithEgg_84048cd6-f418-4867-9915-406b76170504)
AND
QRY_OnlyOnce("ORI_Laezel_GotEgg")
THEN
SetFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutGettingGithEgg_84048cd6-f418-4867-9915-406b76170504);
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_GithEggRelated_fad8e633-576a-f03d-38e8-4a4b5af4bc60, ORI_Laezel_WRD_GithEggRelated_GotEgg_dbb26ff6-fe4b-4f3a-8c1c-f2059540f32e,(CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,0);

//WRD reaction after giving the egg away to the Expeditioner in Act1b or the Society of Brilliance in Act3 (only one of those can happen)
IF
FlagSet((FLAG)CRE_Expeditioner_State_GithyankiEggDelivered_10fc6465-656e-4f7a-a769-19bada4280d6, _, _)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT QRY_ORI_Laezel_TooFarToReactToEggEvent((FLAG)RI_Laezel_State_WantsToTalkAboutSellingGithEgg_880bf97c-f68d-4544-bbf6-01bec9f2c684)
AND
QRY_OnlyOnce("ORI_Laezel_SoldGithEgg")
THEN
SetFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutSellingGithEgg_880bf97c-f68d-4544-bbf6-01bec9f2c684);
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_GithEggRelated_fad8e633-576a-f03d-38e8-4a4b5af4bc60, ORI_Laezel_WRD_GithEggRelated_SoldEgg_c49677fd-d7b2-46e2-9175-30ddc8dccb57,(CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,0);

IF
FlagSet((FLAG)CRE_Expeditioner_State_GithyankiEggDelivered_10fc6465-656e-4f7a-a769-19bada4280d6, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b)
THEN
ClearFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b);

//Not checking PartOfTheTeam in case it happens while Laezel is abducted by Orin. If she was never recruited it won't make a difference that these flags are set at all.
//ToDo: Request different lines for players selling the egg a second time (only needed if she wasn't part of the dialog where she has inclusions for selling the egg)
IF
FlagSet((FLAG)LOW_TheLodge_State_GaveHavkelaagGithEgg_689dea93-b42f-4b14-b268-a492ad5d0a12, _, _)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT QRY_ORI_Laezel_TooFarToReactToEggEvent((FLAG)ORI_Laezel_State_WantsToTalkAboutSellingGithEgg_880bf97c-f68d-4544-bbf6-01bec9f2c684)
AND
QRY_OnlyOnce("ORI_Laezel_SoldGithEgg")
THEN
SetFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutSellingGithEgg_880bf97c-f68d-4544-bbf6-01bec9f2c684);
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_GithEggRelated_fad8e633-576a-f03d-38e8-4a4b5af4bc60, ORI_Laezel_WRD_GithEggRelated_SoldEgg_c49677fd-d7b2-46e2-9175-30ddc8dccb57,(CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,0);

IF
FlagSet((FLAG)LOW_TheLodge_State_GaveHavkelaagGithEgg_689dea93-b42f-4b14-b268-a492ad5d0a12, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b)
THEN
ClearFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b);

IF
DialogEnded((DIALOGRESOURCE)LOW_TheLodge_GithBoy_67cf0943-fc4e-ce86-34e2-4f37a5bcdaa0, _)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
NOT QRY_ORI_Laezel_TooFarToReactToEggEvent((FLAG)ORI_Laezel_State_WantsToTalkAboutPtaris_ce6a94c3-181a-4809-916e-4766a2ae448b)
AND
QRY_OnlyOnce("ORI_Laezel_MetPtaris")
THEN
SetFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutPtaris_ce6a94c3-181a-4809-916e-4766a2ae448b);
PROC_RelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_GithEggRelated_fad8e633-576a-f03d-38e8-4a4b5af4bc60, ORI_Laezel_WRD_GithEggRelated_MetPtaris_50249fa2-7de0-464f-808d-7c683a128fe4,(CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12,0);

QRY
QRY_ORI_Laezel_TooFarToReactToEggEvent((FLAG)_Flag)
AND
DB_ORI_Laezel_EggEventsAllowedTriggersForReaction(_Flag, (TRIGGER)_Trigger)
AND
NOT DB_InRegion((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Trigger)
THEN
DB_ORI_Laezel_LateReactionToGithEggEvent(_Flag);

QRY
QRY_ORI_Laezel_TooFarToReactToEggEvent((FLAG)_Flag)
AND
DB_ORI_Laezel_EggEventsAllowedTriggerSetsForReaction(_Flag, (STRING)_TriggerSet)
AND
NOT QRY_TriggerEvents_InTriggerSet(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _TriggerSet)
THEN
DB_ORI_Laezel_LateReactionToGithEggEvent(_Flag);

PROC
PROC_CampNight_PreSelection_Hook()
AND
DB_ORI_Laezel_LateReactionToGithEggEvent(_Flag)
THEN
PROC_GlobalSetFlagAndCache(_Flag);
NOT DB_ORI_Laezel_LateReactionToGithEggEvent(_Flag);

//CRD reaction after realizing the egg is gone after initiating a long rest
PROC
PROC_CampNight_PreSelection_Hook()
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutLostGithEgg_a9048195-ecf7-4590-b2f7-e786c8b304d9)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_DiscussedLostEgg_5205df84-cd67-4b71-9400-1afceeb7dd86)
AND
NOT QRY_ItemInPartyPosession((ITEM)S_CRE_GithyankiEgg_999b6dd7-2901-4604-8280-1931a5217a94) //Item is Global
THEN
PROC_GlobalSetFlagAndCache((FLAG)ORI_Laezel_State_WantsToTalkAboutLostGithEgg_a9048195-ecf7-4590-b2f7-e786c8b304d9);

PROC
PROC_CampNight_PreSelection_Hook()
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b)
AND
NOT QRY_ItemInPartyPosession((ITEM)S_CRE_GithyankiEgg_999b6dd7-2901-4604-8280-1931a5217a94) //Item is Global
THEN
ClearFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b);

//If she's nearby she would react to this with a WRD, otherwise the rule above will take care of it on Long Rest. This is to avoid breaking it infront of her without a reaction
//DB_Sees I feel is too janky, she should be able to tell what happened if she's anywhere nearby I reckon
IF
DestroyedBy((ITEM)S_CRE_GithyankiEgg_999b6dd7-2901-4604-8280-1931a5217a94, _Destroyer, _, _)
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b)
AND
GetDistanceTo(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Destroyer, _Dist)
AND
_Dist <= 20.0
THEN
ClearFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b);
SetFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutLostGithEgg_a9048195-ecf7-4590-b2f7-e786c8b304d9);// Flag and dialog doubles down for destroying the egg as well, but doesn't work well as WRD so leaving as question only

//Cancelling topics if they become irrellevant
IF
FlagSet((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutLostGithEgg_a9048195-ecf7-4590-b2f7-e786c8b304d9)
THEN
ClearFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutLostGithEgg_a9048195-ecf7-4590-b2f7-e786c8b304d9);

IF
FlagSet((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutSellingGithEgg_880bf97c-f68d-4544-bbf6-01bec9f2c684)
THEN
ClearFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutSellingGithEgg_880bf97c-f68d-4544-bbf6-01bec9f2c684);
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_GithEggRelated_fad8e633-576a-f03d-38e8-4a4b5af4bc60, (FLAG)ORI_Laezel_WRD_GithEggRelated_SoldEgg_c49677fd-d7b2-46e2-9175-30ddc8dccb57);

IF
FlagCleared((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b, _, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutGettingGithEgg_84048cd6-f418-4867-9915-406b76170504)
THEN
ClearFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutGettingGithEgg_84048cd6-f418-4867-9915-406b76170504);
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_GithEggRelated_fad8e633-576a-f03d-38e8-4a4b5af4bc60, (FLAG)ORI_Laezel_WRD_GithEggRelated_GotEgg_dbb26ff6-fe4b-4f3a-8c1c-f2059540f32e);

PROC
PROC_LevelLoadedOnce("BGO_Main_A")
AND
NOT DB_Avatars((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_PartOfTheTeam((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
THEN
ClearFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutGettingGithEgg_84048cd6-f418-4867-9915-406b76170504);
ClearFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutSellingGithEgg_880bf97c-f68d-4544-bbf6-01bec9f2c684);
ClearFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutLostGithEgg_a9048195-ecf7-4590-b2f7-e786c8b304d9);

PROC
PROC_LevelLoadedOnce("END_Main")
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutPtaris_ce6a94c3-181a-4809-916e-4766a2ae448b)
THEN
ClearFlag((FLAG)ORI_Laezel_State_WantsToTalkAboutPtaris_ce6a94c3-181a-4809-916e-4766a2ae448b);

//Edge-case cleanup
//Since you can discuss the WRD dialogs inside of Laezel's questions dialog, if players click very quickly on her before the WRD is triggered they can finish the discussion but the exclamation mark will remain
IF
FlagSet((FLAG)ORI_Laezel_State_DiscussedGettingGithEgg_c2d845e5-8926-40fc-9c02-c5be5ea7e5ea, _, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_GithEggRelated_fad8e633-576a-f03d-38e8-4a4b5af4bc60, (FLAG)ORI_Laezel_WRD_GithEggRelated_GotEgg_dbb26ff6-fe4b-4f3a-8c1c-f2059540f32e);

IF
FlagSet((FLAG)ORI_Laezel_State_DiscussedSellingGithEgg_67326ddd-fda4-4ac2-9961-84f84ebb8d91, _, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_GithEggRelated_fad8e633-576a-f03d-38e8-4a4b5af4bc60, (FLAG)ORI_Laezel_WRD_GithEggRelated_SoldEgg_c49677fd-d7b2-46e2-9175-30ddc8dccb57);

IF
FlagSet((FLAG)ORI_Laezel_State_DiscussedPtaris_c751f5fb-0253-4d37-9944-ffb39674c4a4, _, _)
THEN
PROC_CancelRelationshipDialog((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (DIALOGRESOURCE)GLO_Laezel_WRD_GithEggRelated_fad8e633-576a-f03d-38e8-4a4b5af4bc60, (FLAG)ORI_Laezel_WRD_GithEggRelated_MetPtaris_50249fa2-7de0-464f-808d-7c683a128fe4);

//ToDo: Request new lines for losing the egg a second time after the Act3 dialog where Laezel warms up to the egg
//Example: Players lose the egg after getting it in the Creche -> talk to Laezel about losing it -> find it and pick it back up -> have the warming up to egg dialog in Act3 -> lose it again or destroy it (new lines needed here)

//Temporary workaround for missing lines - check if the egg is in another player's locked inventory - the dialog option for checking up on the egg will not be present if so
//ToDo: Add lines for telling Laezel to get the egg from whoever has it in case it's in another player's locked inventory
PROC
PROC_DialogFlagSetup((DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Avatar)
AND
DB_LevelLoadedOnce("BGO_Main_A")
AND
DB_GlobalFlag((FLAG)ORI_Laezel_State_CaringAboutGithEgg_b5a0ea04-d824-4e1a-bb90-b421acc6092b)
AND
NOT DB_GlobalFlag((FLAG)ORI_Laezel_State_CheckedUpOnEggInAct3_23169e78-2cfd-47a0-84ff-facaac739f3c)
AND
GetFlag((FLAG)CRE_Hatchery_State_HasGithYankiEgg_30e136f5-b082-419f-9675-5310edaf782c, _Avatar, 0) //If the current avatar doesn't have the egg in magic pockets
AND
DB_Avatars(_OtherAvatar)
AND
_OtherAvatar != _Avatar
AND
GetFlag((FLAG)CRE_Hatchery_State_HasGithYankiEgg_30e136f5-b082-419f-9675-5310edaf782c, _OtherAvatar, 1) //But another avatar has, meaning it's not in camp or camp chest
THEN
SetFlag((FLAG)ORI_Laezel_Event_CheckIfEggIsLockedInAnotherPlayerInventory_223d7aef-38b0-4c54-8742-d006a74ef928);

IF
DialogEnded((DIALOGRESOURCE)Laezel_InParty2_93bf58f5-5111-9730-1ee2-62dfb0b00c96, _)
AND
DB_GlobalFlag((FLAG)ORI_Laezel_Event_CheckIfEggIsLockedInAnotherPlayerInventory_223d7aef-38b0-4c54-8742-d006a74ef928)
THEN
ClearFlag((FLAG)ORI_Laezel_Event_CheckIfEggIsLockedInAnotherPlayerInventory_223d7aef-38b0-4c54-8742-d006a74ef928);

//END_REGION

//REGION Camp Behaviour Specific
//CAMP_Laezel.Sharpen & CAMP_Laezel.TrainWithDummy
IF
FlagSet((FLAG)CAMP_Laezel_State_NoOffhandWeaponBehaviourActive_30f13f96-d651-4f3a-a56f-9277ff2bc826, _, _)
AND
GetEquippedItem((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "Melee Offhand Weapon", _OffhandItem)
THEN
DB_CAMP_Laezel_TemporaryUnequippedOffhand((ITEM)_OffhandItem);
Unequip((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _OffhandItem);

IF
FlagCleared((FLAG)CAMP_Laezel_State_NoOffhandWeaponBehaviourActive_30f13f96-d651-4f3a-a56f-9277ff2bc826, _, _)
THEN
RealtimeObjectTimerLaunch(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "CAMP_Laezel_EquipOffHandDelay", 500);

//Timer added to avoid equipping the offhand if two behaviours play back to back that unset and immediately set the flag back
IF
ObjectTimerFinished(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "CAMP_Laezel_EquipOffHandDelay")
AND
NOT DB_GlobalFlag((FLAG)CAMP_Laezel_State_NoOffhandWeaponBehaviourActive_30f13f96-d651-4f3a-a56f-9277ff2bc826)
AND
DB_CAMP_Laezel_TemporaryUnequippedOffhand((ITEM)_OffhandItem)
AND
NOT QRY_CAMP_Laezel_PreventReequippingOffhand(_OffhandItem)
THEN
NOT DB_CAMP_Laezel_TemporaryUnequippedOffhand((ITEM)_OffhandItem);
Equip((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _OffhandItem, 0, 0, 0);

QRY
QRY_CAMP_Laezel_PreventReequippingOffhand((ITEM)_OffhandItem)
AND
GetEquippedItem((CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "Melee Offhand Weapon", _)
THEN
NOT DB_CAMP_Laezel_TemporaryUnequippedOffhand((ITEM)_OffhandItem);

QRY
QRY_CAMP_Laezel_PreventReequippingOffhand((ITEM)_OffhandItem)
AND
IsInInventoryOf(_OffhandItem, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0)
THEN
NOT DB_CAMP_Laezel_TemporaryUnequippedOffhand((ITEM)_OffhandItem);

//CAMP_Laezel.TrainWithDummy
IF
Equipped(_Item, (CHARACTER)S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12)
AND
DB_GlobalFlag((FLAG)CAMP_Laezel_State_TrainingWithDummyBehaviourActive_df5017a5-f742-4ca1-aaf4-720b6780a95b)
THEN
SetEntityEvent(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "InterruptCampBehaviour_WithoutReselection", 1);
//END_REGION
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "ModWrapper_Gustav"
